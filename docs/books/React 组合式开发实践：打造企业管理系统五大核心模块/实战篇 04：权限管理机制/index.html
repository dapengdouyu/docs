<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Dapengçš„åšå®¢ Blog RSS Feed">
<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?7dda2565ba246ecd62878c13153e2941",e.defer=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
<meta name="baidu-site-verification" content="IXU12YQUjF">
<link rel="preconnect" href="https://hmcdn.baidu.com">
<link rel="stylesheet" href="https://cansiny.oss-cn-shanghai.aliyuncs.com/assets/fonts.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">å®æˆ˜ç¯‡ 04ï¼šæƒé™ç®¡ç†æœºåˆ¶ - Dapengçš„åšå®¢</title><meta data-react-helmet="true" property="og:url" content="https://dapengdouyu.github.io/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 04ï¼šæƒé™ç®¡ç†æœºåˆ¶"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="å®æˆ˜ç¯‡ 04ï¼šæƒé™ç®¡ç†æœºåˆ¶ - Dapengçš„åšå®¢"><meta data-react-helmet="true" name="description" content="æœ¬èŠ‚å‚è€ƒä»£ç ï¼š"><meta data-react-helmet="true" property="og:description" content="æœ¬èŠ‚å‚è€ƒä»£ç ï¼š"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://dapengdouyu.github.io/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 04ï¼šæƒé™ç®¡ç†æœºåˆ¶"><link data-react-helmet="true" rel="alternate" href="https://dapengdouyu.github.io/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 04ï¼šæƒé™ç®¡ç†æœºåˆ¶" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://dapengdouyu.github.io/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 04ï¼šæƒé™ç®¡ç†æœºåˆ¶" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.5ab70b72.css">
<link rel="preload" href="/assets/js/runtime~main.b2d0e262.js" as="script">
<link rel="preload" href="/assets/js/main.82ba9a71.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.jpg" alt="DAPENG" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.jpg" alt="DAPENG" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">DAPENG</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">åšå®¢</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/tags/java-script">JavaScript</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">å‰ç«¯</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/program/javascript/index">Javascript</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">é˜…è¯»</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/books/Babel æ’ä»¶é€šå…³ç§˜ç±/index">Babel æ’ä»¶é€šå…³ç§˜ç±</a></li></ul></div><a href="https://github.com/dapengdouyu" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Babel æ’ä»¶é€šå…³ç§˜ç±</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">MySQL æ˜¯æ€æ ·è¿è¡Œçš„ï¼šä»æ ¹å„¿ä¸Šç†è§£ MySQL</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">React Hooks ä¸ Immutable æ•°æ®æµå®æˆ˜</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/index">index</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/ä»¥å²ä¸ºé‰´ï¼šå‰ç«¯å¼€å‘çš„å››ä¸ªæ—¶ä»£">ä»¥å²ä¸ºé‰´ï¼šå‰ç«¯å¼€å‘çš„å››ä¸ªæ—¶ä»£</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/ä¼¼æ°´æµå¹´ï¼šä¼ä¸šç®¡ç†ç³»ç»Ÿçš„å‰ä¸–ä»Šç”Ÿ">ä¼¼æ°´æµå¹´ï¼šä¼ä¸šç®¡ç†ç³»ç»Ÿçš„å‰ä¸–ä»Šç”Ÿ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 01ï¼šå¼€å‘å‰å‡†å¤‡">å®æˆ˜ç¯‡ 01ï¼šå¼€å‘å‰å‡†å¤‡</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 02ï¼šé¡¹ç›®è„šæ‰‹æ¶">å®æˆ˜ç¯‡ 02ï¼šé¡¹ç›®è„šæ‰‹æ¶</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 03ï¼šé¡µé¢å¸ƒå±€æ–¹æ¡ˆ">å®æˆ˜ç¯‡ 03ï¼šé¡µé¢å¸ƒå±€æ–¹æ¡ˆ</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 04ï¼šæƒé™ç®¡ç†æœºåˆ¶">å®æˆ˜ç¯‡ 04ï¼šæƒé™ç®¡ç†æœºåˆ¶</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 05ï¼šèœå•åŒ¹é…é€»è¾‘">å®æˆ˜ç¯‡ 05ï¼šèœå•åŒ¹é…é€»è¾‘</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 06ï¼šæ¶ˆæ¯é€šçŸ¥è®¾è®¡">å®æˆ˜ç¯‡ 06ï¼šæ¶ˆæ¯é€šçŸ¥è®¾è®¡</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 07ï¼šå¤šè¯­è¨€æ”¯æŒ">å®æˆ˜ç¯‡ 07ï¼šå¤šè¯­è¨€æ”¯æŒ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/æ€»ç»“">æ€»ç»“</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/ç»§å¾€å¼€æ¥ï¼šå¯è§†åŒ–é¡µé¢æ­å»ºå·¥å…·">ç»§å¾€å¼€æ¥ï¼šå¯è§†åŒ–é¡µé¢æ­å»ºå·¥å…·</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reactå®æˆ˜ï¼šè®¾è®¡æ¨¡å¼å’Œæœ€ä½³å®è·µ</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Taro å¤šç«¯å¼€å‘å®ç°åŸç†ä¸é¡¹ç›®å®æˆ˜</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">å‰ç«¯æ€§èƒ½ä¼˜åŒ–åŸç†ä¸å®è·µ</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">å‰ç«¯é¢è¯•ä¹‹é“</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">å¾®ä¿¡å°ç¨‹åºå¼€å‘å…¥é—¨ï¼šä» 0 åˆ° 1 å®ç°å¤©æ°”å°ç¨‹åº</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">æ·±å…¥æµ…å‡ºTypeScriptï¼šä»åŸºç¡€çŸ¥è¯†åˆ°ç±»å‹ç¼–ç¨‹</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">å®æˆ˜ç¯‡ 04ï¼šæƒé™ç®¡ç†æœºåˆ¶</h1></header><blockquote><p>æœ¬èŠ‚å‚è€ƒä»£ç ï¼š</p><ol><li><a href="https://github.com/AlanWei/react-acl-router" target="_blank" rel="noopener noreferrer">react-acl-router</a></li><li><a href="https://github.com/AlanWei/react-boilerplate-pro/blob/master/src/app/init/router.js" target="_blank" rel="noopener noreferrer">react-boilerplate-pro/src/app/init/router.js</a></li><li><a href="https://github.com/AlanWei/react-boilerplate-pro/blob/master/src/app/config/routes.js" target="_blank" rel="noopener noreferrer">react-boilerplate-pro/src/app/config/routes.js</a></li></ol></blockquote><p><img src="https://user-gold-cdn.xitu.io/2018/6/20/1641c84270857908?w=600&amp;h=400&amp;f=jpeg&amp;s=43441"></p><p>æƒé™ç®¡ç†ä½œä¸ºä¼ä¸šç®¡ç†ç³»ç»Ÿä¸­éå¸¸æ ¸å¿ƒçš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œä¸€ç›´ä»¥æ¥å› ä¸ºä¸šåŠ¡æ–¹å¾ˆå¤šæ—¶å€™æ— æ³•ä½¿ç”¨å‡†ç¡®çš„æœ¯è¯­æ¥æè¿°éœ€æ±‚æˆä¸ºäº†å›°æ‰°å¼€å‘è€…ä»¬çš„ä¸€å¤§éš¾é¢˜ã€‚è¿™é‡Œæˆ‘ä»¬å…ˆæ¥ä»‹ç»ä¸¤ç§å¸¸è§çš„æƒé™ç®¡ç†è®¾è®¡æ¨¡å¼ï¼Œå³åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ä»¥åŠè®¿é—®æ§åˆ¶åˆ—è¡¨ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="è®¾è®¡ç­–ç•¥"></a>è®¾è®¡ç­–ç•¥<a class="hash-link" href="#è®¾è®¡ç­–ç•¥" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆrole-based-access-controlï¼‰"></a>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆ<a href="https://en.wikipedia.org/wiki/Role-based_access_control" target="_blank" rel="noopener noreferrer">Role-based access control</a>ï¼‰<a class="hash-link" href="#åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆrole-based-access-controlï¼‰" title="Direct link to heading">#</a></h3><p>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ä¸ç›´æ¥å°†ç³»ç»Ÿæ“ä½œçš„å„ç§æƒé™èµ‹äºˆå…·ä½“ç”¨æˆ·ï¼Œè€Œæ˜¯åœ¨ç”¨æˆ·ä¸æƒé™ä¹‹é—´å»ºç«‹èµ·è§’è‰²é›†åˆï¼Œå°†æƒé™èµ‹äºˆè§’è‰²å†å°†è§’è‰²èµ‹äºˆç”¨æˆ·ã€‚è¿™æ ·å°±å®ç°äº†å¯¹äºæƒé™å’Œè§’è‰²çš„é›†ä¸­ç®¡ç†ï¼Œé¿å…ç”¨æˆ·ä¸æƒé™ä¹‹é—´ç›´æ¥äº§ç”Ÿå¤æ‚çš„å¤šå¯¹å¤šå…³ç³»ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆaccess-control-listï¼‰"></a>è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆ<a href="https://en.wikipedia.org/wiki/Access_control_list" target="_blank" rel="noopener noreferrer">Access control list</a>ï¼‰<a class="hash-link" href="#è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆaccess-control-listï¼‰" title="Direct link to heading">#</a></h3><p>å…·ä½“åˆ°è§’è‰²ä¸æƒé™ä¹‹é—´ï¼Œè®¿é—®æ§åˆ¶åˆ—è¡¨æŒ‡ä»£çš„æ˜¯æŸä¸ªè§’è‰²æ‰€æ‹¥æœ‰çš„ç³»ç»Ÿæƒé™åˆ—è¡¨ã€‚åœ¨ä¼ ç»Ÿè®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæƒé™ä¸€èˆ¬æŒ‡çš„æ˜¯å¯¹äºæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œå¢åˆ æ”¹æŸ¥çš„æƒåŠ›ã€‚è€Œåœ¨ Web åº”ç”¨ä¸­ï¼Œå¤§éƒ¨åˆ†ç³»ç»Ÿåªéœ€è¦åšåˆ°é¡µé¢çº§åˆ«çš„æƒé™æ§åˆ¶å³å¯ï¼Œç®€å•æ¥è¯´å°±æ˜¯æ ¹æ®å½“å‰ç”¨æˆ·çš„è§’è‰²æ¥å†³å®šå…¶æ˜¯å¦æ‹¥æœ‰æŸ¥çœ‹å½“å‰é¡µé¢çš„æƒåˆ©ã€‚</p><p>ä¸‹é¢å°±è®©æˆ‘ä»¬æŒ‰ç…§è¿™æ ·çš„æ€è·¯å®ç°ä¸€ä¸ªåŸºç¡€ç‰ˆçš„åŒ…å«æƒé™ç®¡ç†åŠŸèƒ½çš„åº”ç”¨è·¯ç”±ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å®æˆ˜ä»£ç "></a>å®æˆ˜ä»£ç <a class="hash-link" href="#å®æˆ˜ä»£ç " title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="è·¯ç”±å®¹å™¨"></a>è·¯ç”±å®¹å™¨<a class="hash-link" href="#è·¯ç”±å®¹å™¨" title="Direct link to heading">#</a></h3><p>åœ¨ç¼–å†™æƒé™ç®¡ç†ç›¸å…³çš„ä»£ç å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä¸ºæ‰€æœ‰çš„é¡µé¢è·¯ç”±æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„å®¹å™¨ï¼Œå³ <code>react-router</code> ä¸­çš„ <code>Switch</code> ç»„ä»¶ã€‚ä¸å¤šä¸ªç‹¬ç«‹è·¯ç”±ä¸åŒçš„æ˜¯ï¼ŒåŒ…è£¹åœ¨ <code>Switch</code> ä¸­çš„è·¯ç”±æ¯æ¬¡åªä¼šæ¸²æŸ“è·¯å¾„åŒ¹é…æˆåŠŸçš„ç¬¬ä¸€ä¸ªï¼Œè€Œä¸æ˜¯æ‰€æœ‰ç¬¦åˆè·¯å¾„åŒ¹é…æ¡ä»¶çš„è·¯ç”±ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Router</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Route</span><span class="token plain"> path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/about&quot;</span><span class="token plain"> component</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">About</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Route</span><span class="token plain"> path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/:user&quot;</span><span class="token plain"> component</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">User</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Route</span><span class="token plain"> component</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">NoMatch</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">Router</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Router</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Switch</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Route</span><span class="token plain"> path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/about&quot;</span><span class="token plain"> component</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">About</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Route</span><span class="token plain"> path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/:user&quot;</span><span class="token plain"> component</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">User</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Route</span><span class="token plain"> component</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">NoMatch</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">Switch</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">Router</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ä»¥ä¸Šé¢ä¸¤æ®µä»£ç ä¸ºä¾‹ï¼Œå¦‚æœå½“å‰é¡µé¢è·¯å¾„æ˜¯ <code>/about</code> çš„è¯ï¼Œå› ä¸º <code>&lt;About /&gt;</code>ã€<code>&lt;User /&gt;</code> åŠ <code>&lt;NoMatch /&gt;</code> è¿™ä¸‰ä¸ªè·¯ç”±çš„è·¯å¾„éƒ½ç¬¦åˆ <code>/about</code>ï¼Œæ‰€ä»¥å®ƒä»¬ä¼šåŒæ—¶è¢«æ¸²æŸ“åœ¨å½“å‰é¡µé¢ã€‚è€Œå°†å®ƒä»¬åŒ…è£¹åœ¨ <code>Switch</code> ä¸­åï¼Œ<code>react-router</code> åœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ <code>&lt;About /&gt;</code> è·¯ç”±åå°±ä¼šåœæ­¢æŸ¥æ‰¾ç›´æ¥æ¸²æŸ“ <code>&lt;About /&gt;</code> ç»„ä»¶ã€‚</p><p>åœ¨ä¼ä¸šç®¡ç†ç³»ç»Ÿä¸­å› ä¸ºé¡µé¢ä¸é¡µé¢ä¹‹é—´ä¸€èˆ¬éƒ½æ˜¯å¹³è¡Œä¸”æ’ä»–çš„å…³ç³»ï¼Œæ‰€ä»¥åˆ©ç”¨å¥½ <code>Switch</code> è¿™ä¸ªç‰¹æ€§å¯¹äºæˆ‘ä»¬ç®€åŒ–é¡µé¢æ¸²æŸ“é€»è¾‘æœ‰ç€æå¤§çš„å¸®åŠ©ã€‚</p><p>å¦å¤–å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨ <code>react-router</code> ä½œè€… <a href="https://github.com/ryanflorence" target="_blank" rel="noopener noreferrer">Ryan Florence</a> çš„æ–°ä½œ <a href="https://reach.tech/router" target="_blank" rel="noopener noreferrer">@reach/router</a> ä¸­ï¼Œ<code>Switch</code> çš„è¿™ä¸€ç‰¹æ€§è¢«é»˜è®¤åŒ…å«äº†è¿›å»ï¼Œè€Œä¸” <code>@reach/router</code> ä¼šè‡ªåŠ¨åŒ¹é…æœ€ç¬¦åˆå½“å‰è·¯å¾„çš„è·¯ç”±ã€‚è¿™å°±ä½¿å¾—ä½¿ç”¨è€…ä¸å¿…å†å»æ‹…å¿ƒè·¯ç”±çš„ä¹¦å†™é¡ºåºï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥å…³æ³¨ä¸€ä¸‹ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æƒé™ç®¡ç†"></a>æƒé™ç®¡ç†<a class="hash-link" href="#æƒé™ç®¡ç†" title="Direct link to heading">#</a></h3><p>ç°åœ¨æˆ‘ä»¬çš„è·¯ç”±å·²ç»æœ‰äº†ä¸€ä¸ªå¤§ä½“çš„æ¡†æ¶ï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬ä¸ºå…¶æ·»åŠ å…·ä½“çš„æƒé™åˆ¤æ–­é€»è¾‘ã€‚</p><p>å¯¹äºä¸€ä¸ªåº”ç”¨æ¥è¯´ï¼Œé™¤å»éœ€è¦é‰´æƒçš„é¡µé¢å¤–ï¼Œä¸€å®šè¿˜å­˜åœ¨ç€ä¸éœ€è¦é‰´æƒçš„é¡µé¢ï¼Œè®©æˆ‘ä»¬å…ˆå°†è¿™äº›é¡µé¢æ·»åŠ åˆ°æˆ‘ä»¬çš„è·¯ç”±ä¸­ï¼Œå¦‚ç™»å½•é¡µã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Router</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Switch</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Route</span><span class="token plain"> path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/login&quot;</span><span class="token plain"> component</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">Login</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">Switch</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">Router</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å¯¹äºéœ€è¦é‰´æƒçš„è·¯ç”±ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŠ½è±¡å‡ºä¸€ä¸ªåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™çš„å‡½æ•°æ¥ä½œä¸ºåˆ¤æ–­ä¾æ®ï¼Œè€Œæ ¹æ®å…·ä½“çš„éœ€æ±‚ï¼Œç”¨æˆ·å¯ä»¥æ‹¥æœ‰å•ä¸ªè§’è‰²æˆ–å¤šä¸ªè§’è‰²ï¼ŒæŠ‘æˆ–æ›´å¤æ‚çš„ä¸€ä¸ªé‰´æƒå‡½æ•°ã€‚è¿™é‡Œç¬”è€…æä¾›ä¸€ä¸ªæœ€åŸºç¡€çš„ç‰ˆæœ¬ï¼Œå³æˆ‘ä»¬å°†ç”¨æˆ·çš„è§’è‰²ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å­˜å‚¨åœ¨åå°ï¼Œå¦‚ä¸€ä¸ªç”¨æˆ·çš„è§’è‰²æ˜¯ adminï¼Œå¦ä¸€ä¸ªç”¨æˆ·çš„è§’è‰²æ˜¯ userã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">isEmpty</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;lodash/isEmpty&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">isArray</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;lodash/isArray&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">isString</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;lodash/isString&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">isFunction</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;lodash/isFunction&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">indexOf</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;lodash/indexOf&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">checkPermissions</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">authorities</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> permissions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">isEmpty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">permissions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">isArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">authorities</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> authorities</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">indexOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">permissions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> authorities</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">isString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">authorities</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">indexOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">permissions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> authorities</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">isFunction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">authorities</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">authorities</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">permissions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;[react-acl-router]: Unsupport type of authorities.&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> checkPermissions</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>åœ¨ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬æåˆ°äº†è·¯ç”±çš„é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ºæ¯ä¸€ä¸ªéœ€è¦é‰´æƒçš„è·¯ç”±å†æ·»åŠ ä¸€ä¸ªå±æ€§ <code>permissions</code>ï¼Œå³å“ªäº›è§’è‰²å¯ä»¥è®¿é—®è¯¥é¡µé¢ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> routes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/outlets&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  exact</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  permissions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;admin&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;user&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Outlets</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  unauthorized</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Unauthorized</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  pageTitle</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Outlet Management&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  breadcrumb</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;/outlets&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/outlets/:id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  exact</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  permissions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;admin&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">OutletDetail</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  redirect</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  pageTitle</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Outlet Detail&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  breadcrumb</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;/outlets&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/outlets/:id&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>åœ¨ä¸Šé¢çš„é…ç½®ä¸­ï¼Œadmin å’Œ user éƒ½å¯ä»¥è®¿é—®é—¨åº—åˆ—è¡¨é¡µé¢ï¼Œä½†åªæœ‰ admin æ‰å¯ä»¥è®¿é—®é—¨åº—è¯¦æƒ…é¡µé¢ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2018/7/9/1647dbdca3edc792?w=2560&amp;h=1600&amp;f=png&amp;s=178741"></p><p>å¯¹äºæ²¡æœ‰æƒé™æŸ¥çœ‹å½“å‰é¡µé¢çš„æƒ…å†µï¼Œä¸€èˆ¬æ¥è®²æœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼Œä¸€æ˜¯ç›´æ¥é‡å®šå‘åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼ˆå¦‚é¦–é¡µï¼‰ï¼ŒäºŒæ˜¯æ¸²æŸ“ä¸€ä¸ªæ— æƒé™é¡µé¢ï¼Œæç¤ºç”¨æˆ·å› ä¸ºæ²¡æœ‰å½“å‰é¡µé¢çš„æƒé™æ‰€ä»¥æ— æ³•æŸ¥çœ‹ã€‚äºŒè€…æ˜¯æ’ä»–çš„ï¼Œå³æ¯ä¸ªé¡µé¢åªéœ€è¦ä½¿ç”¨å…¶ä¸­ä¸€ç§å³å¯ï¼Œäºæ˜¯æˆ‘ä»¬åœ¨è·¯ç”±é…ç½®ä¸­å¯ä»¥æ ¹æ®éœ€è¦å»é…ç½® <code>redirect</code> æˆ– <code>unauthorized</code> å±æ€§ï¼Œåˆ†åˆ«å¯¹åº”<strong>æ— æƒé™é‡å®šå‘</strong>åŠ<strong>æ— æƒé™æ˜¾ç¤ºæ— æƒé™é¡µé¢</strong>ä¸¤ç§å¤„ç†æ–¹å¼ã€‚å…·ä½“ä»£ç å¤§å®¶å¯ä»¥å‚è€ƒç¤ºä¾‹é¡¹ç›® <a href="https://github.com/AlanWei/react-acl-router/blob/master/src/AclRouter.jsx" target="_blank" rel="noopener noreferrer">react-acl-router</a> ä¸­çš„å®ç°ï¼Œè¿™é‡Œæ‘˜å½•ä¸€å°æ®µæ ¸å¿ƒéƒ¨åˆ†ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-variable function" style="color:#d73a49">renderRedirectRoute</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">route</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Route</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    key</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">route</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">path</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token spread operator" style="color:#393A34">...</span><span class="token method function property-access" style="color:#d73a49">omitRouteRenderProperties</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">route</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    render</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Redirect</span><span class="token plain"> to</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">route</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">redirect</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-variable function" style="color:#d73a49">renderAuthorizedRoute</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">route</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> authorizedLayout</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">AuthorizedLayout</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> authorities </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">state</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    permissions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">RouteComponent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    unauthorized</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Unauthorized</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> route</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hasPermission </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkPermissions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">authorities</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> permissions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">hasPermission </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> route</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">unauthorized</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Route</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        key</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token spread operator" style="color:#393A34">...</span><span class="token method function property-access" style="color:#d73a49">omitRouteRenderProperties</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">route</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        render</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token parameter">props</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">AuthorizedLayout</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Unauthorized</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">AuthorizedLayout</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">hasPermission </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> route</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">redirect</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">renderRedirectRoute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">route</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Route</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      key</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token spread operator" style="color:#393A34">...</span><span class="token method function property-access" style="color:#d73a49">omitRouteRenderProperties</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">route</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      render</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token parameter">props</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">AuthorizedLayout</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">RouteComponent</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">AuthorizedLayout</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>äºæ˜¯ï¼Œåœ¨æœ€ç»ˆçš„è·¯ç”±ä¸­ï¼Œæˆ‘ä»¬ä¼šä¼˜å…ˆåŒ¹é…æ— éœ€é‰´æƒçš„é¡µé¢è·¯å¾„ï¼Œä¿è¯æ‰€æœ‰ç”¨æˆ·åœ¨è®¿é—®æ— éœ€é‰´æƒçš„é¡µé¢æ—¶ï¼Œç¬¬ä¸€æ—¶é—´å°±å¯ä»¥çœ‹åˆ°é¡µé¢ã€‚ç„¶åå†å»åŒ¹é…éœ€è¦é‰´æƒçš„é¡µé¢è·¯å¾„ï¼Œæœ€ç»ˆå¦‚æœæ‰€æœ‰çš„è·¯å¾„éƒ½åŒ¹é…ä¸åˆ°çš„è¯ï¼Œå†æ¸²æŸ“ 404 é¡µé¢å‘ŠçŸ¥ç”¨æˆ·å½“å‰é¡µé¢è·¯å¾„ä¸å­˜åœ¨ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2018/6/20/1641c97456cd6847?w=2560&amp;h=1600&amp;f=png&amp;s=119442"></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Switch</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">normalRoutes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">route</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">renderNormalRoute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">route</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">authorizedRoutes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">route</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">renderAuthorizedRoute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">route</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">renderNotFoundRoute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">Switch</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>éœ€è¦é‰´æƒçš„è·¯ç”±å’Œä¸éœ€è¦é‰´æƒçš„è·¯ç”±ä½œä¸ºä¸¤ç§ä¸åŒçš„é¡µé¢ï¼Œä¸€èˆ¬è€Œè¨€å®ƒä»¬çš„é¡µé¢å¸ƒå±€ä¹Ÿæ˜¯ä¸åŒçš„ã€‚å¦‚ç™»å½•é¡µé¢ä½¿ç”¨çš„å°±æ˜¯æ™®é€šé¡µé¢å¸ƒå±€ï¼š</p><p><img src="https://user-gold-cdn.xitu.io/2018/7/9/1647d205501260fd?w=2560&amp;h=1600&amp;f=png&amp;s=162652"></p><p>åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥å°†ä¸åŒçš„é¡µé¢å¸ƒå±€ä¸é‰´æƒé€»è¾‘ç›¸ç»“åˆä»¥è¾¾åˆ°åªéœ€è¦åœ¨è·¯ç”±é…ç½®ä¸­é…ç½®ç›¸åº”çš„å±æ€§ï¼Œæ–°å¢åŠ çš„é¡µé¢å°±å¯ä»¥åŒæ—¶è·å¾—é‰´æƒé€»è¾‘å’ŒåŸºç¡€å¸ƒå±€çš„æ•ˆæœã€‚è¿™å°†æå¤§åœ°æå‡å¼€å‘è€…ä»¬çš„å·¥ä½œæ•ˆç‡ï¼Œå°¤å…¶æ˜¯å¯¹äºé¡¹ç›®ç»„çš„æ–°æˆå‘˜æ¥è¯´çº¯é…ç½®çš„ä¸Šæ‰‹æ–¹å¼æ˜¯æœ€å‹å¥½çš„ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="åº”ç”¨é›†æˆ"></a>åº”ç”¨é›†æˆ<a class="hash-link" href="#åº”ç”¨é›†æˆ" title="Direct link to heading">#</a></h2><p>è‡³æ­¤ä¸€ä¸ªåŒ…å«åŸºç¡€æƒé™ç®¡ç†çš„åº”ç”¨è·¯ç”±å°±å¤§åŠŸå‘Šæˆäº†ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒæŠ½è±¡ä¸ºä¸€ä¸ªç‹¬ç«‹çš„è·¯ç”±ç»„ä»¶ï¼Œä½¿ç”¨æ—¶åªéœ€è¦é…ç½®éœ€è¦é‰´æƒçš„è·¯ç”±å’Œä¸éœ€è¦é‰´æƒçš„è·¯ç”±ä¸¤éƒ¨åˆ†å³å¯ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> authorizedRoutes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/outlets&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  exact</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  permissions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;admin&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;user&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Outlets</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  unauthorized</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Unauthorized</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  pageTitle</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;pageTitle_outlets&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  breadcrumb</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;/outlets&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/outlets/:id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  exact</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  permissions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;admin&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;user&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">OutletDetail</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  unauthorized</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Unauthorized</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  pageTitle</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;pageTitle_outletDetail&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  breadcrumb</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;/outlets&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/outlets/:id&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/exception/403&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  exact</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  permissions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;god&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">WorkInProgress</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  unauthorized</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Unauthorized</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> normalRoutes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  exact</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  redirect</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/outlets&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/login&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  exact</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Login</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">Router</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">props</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">ConnectedRouter</span><span class="token plain"> history</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">history</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">MultiIntlProvider</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      defaultLocale</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">locale</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      messageMap</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">messages</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// the router component</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">AclRouter</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        authorities</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">authorities</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        authorizedRoutes</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">authorizedRoutes</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        authorizedLayout</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">BasicLayout</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        normalRoutes</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">normalRoutes</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        normalLayout</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">NormalLayout</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        notFound</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">NotFound</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">MultiIntlProvider</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">ConnectedRouter</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">mapStateToProps</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">propTypes</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> propTypes</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mapStateToProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Router</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>react-redux</code> æä¾›çš„ <code>connect</code> ç»„ä»¶å°†åº”ç”¨è·¯ç”± connect è‡³ redux storeï¼Œä»¥æ–¹ä¾¿æˆ‘ä»¬ç›´æ¥è¯»å–å½“å‰ç”¨æˆ·çš„è§’è‰²ä¿¡æ¯ã€‚ä¸€æ—¦ç™»å½•ç”¨æˆ·çš„è§’è‰²å‘ç”Ÿå˜åŒ–ï¼Œå®¢æˆ·ç«¯è·¯ç”±å°±å¯ä»¥è¿›è¡Œç›¸åº”çš„åˆ¤æ–­ä¸å“åº”ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç»„åˆå¼å¼€å‘ï¼šæƒé™ç®¡ç†"></a>ç»„åˆå¼å¼€å‘ï¼šæƒé™ç®¡ç†<a class="hash-link" href="#ç»„åˆå¼å¼€å‘ï¼šæƒé™ç®¡ç†" title="Direct link to heading">#</a></h2><p>å¯¹äºé¡µé¢çº§åˆ«çš„æƒé™ç®¡ç†æ¥è¯´ï¼Œæƒé™ç®¡ç†éƒ¨åˆ†çš„é€»è¾‘æ˜¯ç‹¬ç«‹äºé¡µé¢çš„ï¼Œæ˜¯ä¸é¡µé¢ä¸­çš„å…·ä½“å†…å®¹æ— å…³çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæƒé™ç®¡ç†éƒ¨åˆ†çš„ä»£ç å¹¶ä¸åº”è¯¥æˆä¸ºé¡µé¢ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯åº”è¯¥åœ¨æ‹¿åˆ°ç”¨æˆ·æƒé™ååˆ›å»ºåº”ç”¨è·¯ç”±æ—¶å°±å°†æ²¡æœ‰æƒé™çš„é¡µé¢æ›¿æ¢ä¸ºé‡å®šå‘æˆ–æ— æƒé™é¡µé¢ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œé¡µé¢éƒ¨åˆ†çš„ä»£ç å°±å¯ä»¥å®ç°ä¸æƒé™ç®¡ç†é€»è¾‘çš„å½»åº•è§£è€¦ï¼Œä»¥è‡³äºå¦‚æœæŠ½æ‰æƒé™ç®¡ç†è¿™ä¸€å±‚åï¼Œé¡µé¢å°±å˜æˆäº†ä¸€ä¸ªæ— éœ€æƒé™åˆ¤æ–­çš„é¡µé¢ä¾ç„¶å¯ä»¥ç‹¬ç«‹è¿è¡Œã€‚è€Œé€šç”¨éƒ¨åˆ†çš„æƒé™ç®¡ç†ä»£ç ä¹Ÿå¯ä»¥åœ¨æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¾®è°ƒåæœåŠ¡äºæ›´å¤šçš„é¡¹ç›®ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å°ç»“"></a>å°ç»“<a class="hash-link" href="#å°ç»“" title="Direct link to heading">#</a></h2><p>åœ¨æœ¬èŠ‚ä¸­æˆ‘ä»¬ä»æƒé™ç®¡ç†çš„åŸºç¡€è®¾è®¡æ€æƒ³è®²èµ·ï¼Œå®ç°äº†ä¸€å¥—åŸºäºè§’è‰²çš„é¡µé¢çº§åˆ«çš„åº”ç”¨æƒé™ç®¡ç†ç³»ç»Ÿå¹¶åˆ†åˆ«è®¨è®ºäº†æ— æƒé™é‡å®šå‘åŠæ— æƒé™æ˜¾ç¤ºæ— æƒé™é¡µé¢ä¸¤ç§æ— æƒé™æŸ¥çœ‹æ—¶çš„å¤„ç†æ–¹æ³•ã€‚</p><p>åœ¨ä¸‹ä¸€èŠ‚ä¸­æˆ‘ä»¬å°†ä¼šæ¢è®¨å½“å‰é¡µé¢å¦‚ä½•åŒ¹é…ä¼ä¸šç®¡ç†ç³»ç»Ÿä¸­çš„å¤šçº§èœå•ä»¥åŠå¦‚ä½•è®©è·¯å¾„è¾ƒæ·±çš„å­é¡µé¢é«˜äº®å…¶éš¶å±äºçš„çˆ¶çº§èœå•ã€‚</p><p>å¦‚æœä½ æƒ³å‚ä¸åˆ°æ–‡ç« ä¸­å†…å®¹çš„è®¨è®ºï¼Œæ¬¢è¿åœ¨ä¸‹é¢çš„è¯„è®ºåŒºç•™è¨€ï¼ŒæœŸå¾…ä¸å¤§å®¶çš„äº¤æµã€‚</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/dapengdouyu/docs/tree/master/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 04ï¼šæƒé™ç®¡ç†æœºåˆ¶.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2021-10-11T06:28:32.000Z">10/11/2021</time></b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 03ï¼šé¡µé¢å¸ƒå±€æ–¹æ¡ˆ"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« å®æˆ˜ç¯‡ 03ï¼šé¡µé¢å¸ƒå±€æ–¹æ¡ˆ</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/books/React ç»„åˆå¼å¼€å‘å®è·µï¼šæ‰“é€ ä¼ä¸šç®¡ç†ç³»ç»Ÿäº”å¤§æ ¸å¿ƒæ¨¡å—/å®æˆ˜ç¯‡ 05ï¼šèœå•åŒ¹é…é€»è¾‘"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">å®æˆ˜ç¯‡ 05ï¼šèœå•åŒ¹é…é€»è¾‘ Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#è®¾è®¡ç­–ç•¥" class="table-of-contents__link">è®¾è®¡ç­–ç•¥</a><ul><li><a href="#åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆrole-based-access-controlï¼‰" class="table-of-contents__link">åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRole-based access controlï¼‰</a></li><li><a href="#è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆaccess-control-listï¼‰" class="table-of-contents__link">è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆAccess control listï¼‰</a></li></ul></li><li><a href="#å®æˆ˜ä»£ç " class="table-of-contents__link">å®æˆ˜ä»£ç </a><ul><li><a href="#è·¯ç”±å®¹å™¨" class="table-of-contents__link">è·¯ç”±å®¹å™¨</a></li><li><a href="#æƒé™ç®¡ç†" class="table-of-contents__link">æƒé™ç®¡ç†</a></li></ul></li><li><a href="#åº”ç”¨é›†æˆ" class="table-of-contents__link">åº”ç”¨é›†æˆ</a></li><li><a href="#ç»„åˆå¼å¼€å‘ï¼šæƒé™ç®¡ç†" class="table-of-contents__link">ç»„åˆå¼å¼€å‘ï¼šæƒé™ç®¡ç†</a></li><li><a href="#å°ç»“" class="table-of-contents__link">å°ç»“</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 dapeng (å¼ äºšé¹) Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b2d0e262.js"></script>
<script src="/assets/js/main.82ba9a71.js"></script>
</body>
</html>