# React与Vue特性对比
现在的前端框架使用最多的就是`vue`和`react`了,其实Vue和React实现原理和流程基本一致，都是使用`Virtual DOM`+ `Diff算法`。 他们的通用流程就是:

vue template/react jsx -> render函数 -> 生成VNode -> 当有变化时，新老VNode diff -> diff算法对比，并真正去更新真实DOM。

## 为什么Vue和React都选择Virtual DOM?
- 减少直接操作DOM。框架给我们提供了屏蔽底层dom书写的方式，减少频繁的整更新dom，同时也使得数据驱动视图
- 为`函数式UI编程`提供可能（`React核心思想`）
- 可以`跨平台`，渲染到DOM（web）之外的平台。比如ReactNative，Weex

既然他们有这么多的相似点，让我们来做技术选型的时候，你是更推崇vue还是react呢?

## 设计理念
vue 引用官网的一句话：
>Vue (读音 /vjuː/，类似于 view) 是一套用于构建用户界面的`渐进式框架`

react 官网是这样定义的:
> 用于构建用户界面的 `JavaScript 库`


## 库和框架
> 库是将代码集合成一个产品,库是我们调用库中的方法实现自己的功能。
> 框架则是为解决一类问题而`开发的产品`,框架是我们在指定的位置编写好代码，框架帮我们调用。


其实react只是一个UI库,官方只提出了 Flux 架构的概念，后续是社区去实现了`redux`库,所以react更加自由，但是需要你自己去筛选适合的的工具链

vue是官方提供一整套的业务方案，比如vuex，vue-router,相对来说更容易上手

## 核心思想不同
- Vue早期定位是尽可能的`降低前端开发`的门槛,所以Vue推崇灵活易用（`渐进式开发体验`），`数据可变`，`双向数据绑定`（依赖收集）。

- React早期的口号是`重新思考最佳实践`,React想要做的是用更好的方式去颠覆前端开发方式（事实上跟早期jquery称霸前端，的确是颠覆了),所以React推崇`函数式编程`（纯组件），`数据不可变`以及`单向数据流`。函数式编程最大的好处是其稳定性（无副作用）和可测试性（输入相同，输出一定相同)。
### 1.1 核心思想不同导致了写法有差异
`Vue推崇template（简单易懂，从传统前端转过来易于理解）、单文件vue`。而且虽然Vue2.0以后使用了Virtual DOM，使得Vue也可以使用JSX（bebel工具转换支持），但Vue官方依然首先推荐`template`，这跟Vue的核心思想和定位有一定关系。

`React推崇JSX、HOC、all in js`

### 1.2 核心思想不同导致api差异

`Vue定位简单易上手，基于template模板 + options API`，所以不可避免的有较多的概念和api。比如template模板中需要理解slot、filter、指令等概念和api，options API中需要理解watch、computed（依赖收集）等概念和api。

`React本质上核心只有一个Virtual DOM + Diff算法`，所以API非常少，知道`setState`就能开始开发了。

### 1.3 核心思想不同导致未来升级方向不同

核心思想不同，决定了Vue和React未来不管怎么升级变化，Vue和React考虑的基本盘不变。

Vue依然会定位`简单易上手`（渐进式开发），依然是考虑通过依赖收集来实现数据可变。这点从Vue3核心更新内容可以看到：`template语法基本不变`、`options api`只增加了`setup`选项（composition api）、基于依赖收集（`Proxy`）的数据可变

React的`函数式编程`这个基本盘不会变。React核心思想，是把UI作为`基本类型`，比如String、Array类型，然后经过render处理，转换为另外一个value（纯函数）。从`React Hooks`可以看出，React团队致力于组件函数式编程，（纯组件，无class组件），尽量减少副作用（减少`this`，`this`会引起副作用）。

## 2. 组件实现不同
Vue源码实现是把options挂载到Vue核心类上，然后再`new Vue({options})`拿到实例（vue组件的script导出的是一个挂满options的纯对象而已）。所以options api中的this指向内部Vue实例，对用户是不透明的，所以需要文档去说明this.slot、this.slot、this.slot、this.xxx这些api。另外Vue插件都是基于Vue原型类基础之上建立的，这也是Vue插件使用Vue.install的原因，因为要确保第三方库的Vue和当前应用的Vue对象是同一个。

React内部实现比较简单，直接定义render函数以生成VNode，而React内部使用了四大组件类包装VNode，不同类型的VNode使用相应的组件类处理，职责划分清晰明了（后面的Diff算法也非常清晰）。React类组件都是继承自`React.Component`类，其this指向用户自定义的类，对用户来说是透明的。


## 3. 响应式原理不同
### Vue

- Vue`依赖收集`，`自动优化`，数据可变。
- Vue递归监听data的所有属性,直接修改。
- 当数据改变时，自动找到引用组件重新渲染。

![](https://s4.aconvert.com/convert/p3r68-cdx67/au8d1-65xap.jpg)
在vue中组件编译,会触发data里面的属性的get方法,将视图和属性绑定，当属性修改的时候，会触发绑定的视图去更新页面

### React

- `React基于状态机，手动优化`，数据不可变，需要setState驱动新的State替换老的State。
- 当数据改变时，以`组件`为根目录，默认全部重新渲染

![](https://img2018.cnblogs.com/blog/1459640/201811/1459640-20181124224144801-1561228641.png)
组件会在生命周期函数，和合成事件中包裹一层，默认在函数执行之前将 是否批量更新字段设置成false, 在函数执行之后将 是否批量更新字段设置成true, 当我们执行setState的时候，内部会先判断当前 当前是否是批量更新模式，如果是，就将state存在一个更新队列中，否就将依次执行队列中的函数

> 其实react和vue更新都是相对于·组件层面的更新 ,但是当组件的状态发生变化时，React的机制会`触发整个组件树`的重新呈现,它的子树中的所有组件都将重新渲染。但在 Vue 中，会`跟踪依赖项`以防止不必要的重新渲染.

## 4. diff算法不同

两者流程思维上是类似的，都是基于两个假设（使得算法复杂度降为O(n)）：

- key和type相同，两个元素就是同一个元素，直接复用
- 只比较同层节点的差异


但两者源码实现上有区别：

- Vue Diff使用双向指针，边对比，边更新DOM。

- React主要使用diff队列保存需要更新哪些DOM，得到patch树，再统一操作批量更新DOM


## 5. 事件机制不同
Vue

- Vue原生事件使用标准Web事件
- Vue组件自定义事件机制，是父子组件通信基础


React

- React原生事件被包装，所有事件都冒泡到顶层document监听，然后在这里合成事件下发。基于这套，可以跨端使用事件机制，而不是和Web DOM强绑定。
- React组件上无事件，父子组件通信使用props




## 我的看法
1、react在中后台项目中由于在处理复杂的业务逻辑或组件的复用问题比vue优雅而被人认可，但这种优雅是要有成本代价的，它更需要团队技术整体比较给力，领头大佬的设计与把关能力要更优秀，因此开发成本更大。
2、vue更友好更易上手的写法著称，渐进式的框架、更友好的api、更亲民的设计让开发成本大大下降而效率大大提升。
3、另一方面，vue因为规定了很多精巧常用的api（语法糖），规范了开发者，同时也一定程度上限制了开发者的发散思维；而react因为更少的常用api提高了开发者的创造力，同时也因为每个react开发者对react有不同的理解而产生不同的代码风格。
4、vue与react在发展长河中越发成熟，深思熟虑后觉得两者不管在移动端或大型中后台都是非常可行的，其实框架本无好坏之分，我们更应该思考的是团队想要用什么技术栈、自己喜欢与擅长什么技术栈
