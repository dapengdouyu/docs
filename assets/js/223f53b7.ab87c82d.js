"use strict";(self.webpackChunkdapengdouyu=self.webpackChunkdapengdouyu||[]).push([[3497],{3905:function(e,n,t){t.d(n,{Zo:function(){return s},kt:function(){return d}});var i=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=i.createContext({}),k=function(e){var n=i.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},s=function(e){var n=k(e.components);return i.createElement(o.Provider,{value:n},e.children)},N={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),m=k(t),d=a,L=m["".concat(o,".").concat(d)]||m[d]||N[d]||r;return t?i.createElement(L,p(p({ref:n},s),{},{components:t})):i.createElement(L,p({ref:n},s))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,p=new Array(r);p[0]=m;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l.mdxType="string"==typeof e?e:a,p[1]=l;for(var k=2;k<r;k++)p[k]=t[k];return i.createElement.apply(null,p)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},79340:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return o},metadata:function(){return k},toc:function(){return s},default:function(){return m}});var i=t(83117),a=t(80102),r=(t(67294),t(3905)),p=["components"],l={},o="Explain \u8be6\u89e3\uff08\u4e0b\uff09",k={unversionedId:"books/MySQL \u662f\u600e\u6837\u8fd0\u884c\u7684\uff1a\u4ece\u6839\u513f\u4e0a\u7406\u89e3 MySQL/17\u3001\u67e5\u8be2\u4f18\u5316\u7684\u767e\u79d1\u5168\u4e66 \u2014\u2014 Explain \u8be6\u89e3\uff08\u4e0b\uff09",id:"books/MySQL \u662f\u600e\u6837\u8fd0\u884c\u7684\uff1a\u4ece\u6839\u513f\u4e0a\u7406\u89e3 MySQL/17\u3001\u67e5\u8be2\u4f18\u5316\u7684\u767e\u79d1\u5168\u4e66 \u2014\u2014 Explain \u8be6\u89e3\uff08\u4e0b\uff09",title:"Explain \u8be6\u89e3\uff08\u4e0b\uff09",description:"\u6807\u7b7e\uff1a MySQL \u662f\u600e\u6837\u8fd0\u884c\u7684",source:"@site/docs/books/MySQL \u662f\u600e\u6837\u8fd0\u884c\u7684\uff1a\u4ece\u6839\u513f\u4e0a\u7406\u89e3 MySQL/17\u3001\u67e5\u8be2\u4f18\u5316\u7684\u767e\u79d1\u5168\u4e66 \u2014\u2014 Explain \u8be6\u89e3\uff08\u4e0b\uff09.md",sourceDirName:"books/MySQL \u662f\u600e\u6837\u8fd0\u884c\u7684\uff1a\u4ece\u6839\u513f\u4e0a\u7406\u89e3 MySQL",slug:"/books/MySQL \u662f\u600e\u6837\u8fd0\u884c\u7684\uff1a\u4ece\u6839\u513f\u4e0a\u7406\u89e3 MySQL/17\u3001\u67e5\u8be2\u4f18\u5316\u7684\u767e\u79d1\u5168\u4e66 \u2014\u2014 Explain \u8be6\u89e3\uff08\u4e0b\uff09",permalink:"/docs/books/MySQL \u662f\u600e\u6837\u8fd0\u884c\u7684\uff1a\u4ece\u6839\u513f\u4e0a\u7406\u89e3 MySQL/17\u3001\u67e5\u8be2\u4f18\u5316\u7684\u767e\u79d1\u5168\u4e66 \u2014\u2014 Explain \u8be6\u89e3\uff08\u4e0b\uff09",editUrl:"https://github.com/dapengdouyu/docs/tree/master/docs/books/MySQL \u662f\u600e\u6837\u8fd0\u884c\u7684\uff1a\u4ece\u6839\u513f\u4e0a\u7406\u89e3 MySQL/17\u3001\u67e5\u8be2\u4f18\u5316\u7684\u767e\u79d1\u5168\u4e66 \u2014\u2014 Explain \u8be6\u89e3\uff08\u4e0b\uff09.md",tags:[],version:"current",frontMatter:{},sidebar:"books",previous:{title:"Explain \u8be6\u89e3\uff08\u4e0a\uff09",permalink:"/docs/books/MySQL \u662f\u600e\u6837\u8fd0\u884c\u7684\uff1a\u4ece\u6839\u513f\u4e0a\u7406\u89e3 MySQL/16\u3001\u67e5\u8be2\u4f18\u5316\u7684\u767e\u79d1\u5168\u4e66 \u2014\u2014 Explain \u8be6\u89e3\uff08\u4e0a\uff09"},next:{title:"optimizer trace \u8868\u7684\u795e\u5947\u529f\u6548",permalink:"/docs/books/MySQL \u662f\u600e\u6837\u8fd0\u884c\u7684\uff1a\u4ece\u6839\u513f\u4e0a\u7406\u89e3 MySQL/18\u3001\u795e\u5175\u5229\u5668 \u2014\u2014 optimizer trace \u7684\u795e\u5668\u529f\u6548"}},s=[{value:"\u6267\u884c\u8ba1\u5212\u8f93\u51fa\u4e2d\u5404\u5217\u8be6\u89e3",id:"\u6267\u884c\u8ba1\u5212\u8f93\u51fa\u4e2d\u5404\u5217\u8be6\u89e3",children:[{value:"Extra",id:"extra",children:[],level:3}],level:2},{value:"Json\u683c\u5f0f\u7684\u6267\u884c\u8ba1\u5212",id:"json\u683c\u5f0f\u7684\u6267\u884c\u8ba1\u5212",children:[],level:2},{value:"Extented EXPLAIN",id:"extented-explain",children:[],level:2}],N={toc:s};function m(e){var n=e.components,t=(0,a.Z)(e,p);return(0,r.kt)("wrapper",(0,i.Z)({},N,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"explain-\u8be6\u89e3\u4e0b"},"Explain \u8be6\u89e3\uff08\u4e0b\uff09"),(0,r.kt)("p",null,"\u6807\u7b7e\uff1a MySQL \u662f\u600e\u6837\u8fd0\u884c\u7684"),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"\u6267\u884c\u8ba1\u5212\u8f93\u51fa\u4e2d\u5404\u5217\u8be6\u89e3"},"\u6267\u884c\u8ba1\u5212\u8f93\u51fa\u4e2d\u5404\u5217\u8be6\u89e3"),(0,r.kt)("p",null,"\u672c\u7ae0\u7d27\u63a5\u7740\u4e0a\u4e00\u8282\u7684\u5185\u5bb9\uff0c\u7ee7\u7eed\u5520\u53e8",(0,r.kt)("inlineCode",{parentName:"p"},"EXPLAIN"),"\u8bed\u53e5\u8f93\u51fa\u7684\u5404\u4e2a\u5217\u7684\u610f\u601d\u3002"),(0,r.kt)("h3",{id:"extra"},"Extra"),(0,r.kt)("p",null,"\u987e\u540d\u601d\u4e49\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u662f\u7528\u6765\u8bf4\u660e\u4e00\u4e9b\u989d\u5916\u4fe1\u606f\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e9b\u989d\u5916\u4fe1\u606f\u6765\u66f4\u51c6\u786e\u7684\u7406\u89e3",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u5230\u5e95\u5c06\u5982\u4f55\u6267\u884c\u7ed9\u5b9a\u7684\u67e5\u8be2\u8bed\u53e5\u3002",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u63d0\u4f9b\u7684\u989d\u5916\u4fe1\u606f\u6709\u597d\u51e0\u5341\u4e2a\uff0c\u6211\u4eec\u5c31\u4e0d\u4e00\u4e2a\u4e00\u4e2a\u4ecb\u7ecd\u4e86\uff08\u90fd\u4ecb\u7ecd\u4e86\u611f\u89c9\u6211\u4eec\u7684\u6587\u7ae0\u5c31\u8ddf\u6587\u6863\u5dee\u4e0d\u591a\u4e86\uff5e\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u6311\u4e00\u4e9b\u5e73\u65f6\u5e38\u89c1\u7684\u6216\u8005\u6bd4\u8f83\u91cd\u8981\u7684\u989d\u5916\u4fe1\u606f\u4ecb\u7ecd\u7ed9\u5927\u5bb6\u54c8\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"No tables used")),(0,r.kt)("p",{parentName:"li"},"\u5f53\u67e5\u8be2\u8bed\u53e5\u7684\u6ca1\u6709",(0,r.kt)("inlineCode",{parentName:"p"},"FROM"),"\u5b50\u53e5\u65f6\u5c06\u4f1a\u63d0\u793a\u8be5\u989d\u5916\u4fe1\u606f\uff0c\u6bd4\u5982\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT 1;\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra          |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+\n|  1 | SIMPLE      | NULL  | NULL       | NULL | NULL          | NULL | NULL    | NULL | NULL |     NULL | No tables used |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+\n1 row in set, 1 warning (0.00 sec)\n\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Impossible WHERE")),(0,r.kt)("p",{parentName:"li"},"\u67e5\u8be2\u8bed\u53e5\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE"),"\u5b50\u53e5\u6c38\u8fdc\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"FALSE"),"\u65f6\u5c06\u4f1a\u63d0\u793a\u8be5\u989d\u5916\u4fe1\u606f\uff0c\u6bd4\u65b9\u8bf4\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 WHERE 1 != 1;\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+------------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra            |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+------------------+\n|  1 | SIMPLE      | NULL  | NULL       | NULL | NULL          | NULL | NULL    | NULL | NULL |     NULL | Impossible WHERE |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+------------------+\n1 row in set, 1 warning (0.01 sec)\n\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"No matching min/max row")),(0,r.kt)("p",{parentName:"li"},"\u5f53\u67e5\u8be2\u5217\u8868\u5904\u6709",(0,r.kt)("inlineCode",{parentName:"p"},"MIN"),"\u6216\u8005",(0,r.kt)("inlineCode",{parentName:"p"},"MAX"),"\u805a\u96c6\u51fd\u6570\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u7b26\u5408",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE"),"\u5b50\u53e5\u4e2d\u7684\u641c\u7d22\u6761\u4ef6\u7684\u8bb0\u5f55\u65f6\uff0c\u5c06\u4f1a\u63d0\u793a\u8be5\u989d\u5916\u4fe1\u606f\uff0c\u6bd4\u65b9\u8bf4\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT MIN(key1) FROM s1 WHERE key1 = 'abcdefg';\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                   |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------------------+\n|  1 | SIMPLE      | NULL  | NULL       | NULL | NULL          | NULL | NULL    | NULL | NULL |     NULL | No matching min/max row |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------------------+\n1 row in set, 1 warning (0.00 sec)\n\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Using index")),(0,r.kt)("p",{parentName:"li"},"\u5f53\u6211\u4eec\u7684\u67e5\u8be2\u5217\u8868\u4ee5\u53ca\u641c\u7d22\u6761\u4ef6\u4e2d\u53ea\u5305\u542b\u5c5e\u4e8e\u67d0\u4e2a\u7d22\u5f15\u7684\u5217\uff0c\u4e5f\u5c31\u662f\u5728\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15\u8986\u76d6\u7684\u60c5\u51b5\u4e0b\uff0c\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u5c06\u4f1a\u63d0\u793a\u8be5\u989d\u5916\u4fe1\u606f\u3002\u6bd4\u65b9\u8bf4\u4e0b\u8fb9\u8fd9\u4e2a\u67e5\u8be2\u4e2d\u53ea\u9700\u8981\u7528\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"idx_key1"),"\u800c\u4e0d\u9700\u8981\u56de\u8868\u64cd\u4f5c\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT key1 FROM s1 WHERE key1 = 'a';\n+----+-------------+-------+------------+------+---------------+----------+---------+-------+------+----------+-------------+\n| id | select_type | table | partitions | type | possible_keys | key      | key_len | ref   | rows | filtered | Extra       |\n+----+-------------+-------+------------+------+---------------+----------+---------+-------+------+----------+-------------+\n|  1 | SIMPLE      | s1    | NULL       | ref  | idx_key1      | idx_key1 | 303     | const |    8 |   100.00 | Using index |\n+----+-------------+-------+------------+------+---------------+----------+---------+-------+------+----------+-------------+\n1 row in set, 1 warning (0.00 sec)\n\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Using index condition")),(0,r.kt)("p",{parentName:"li"},"\u6709\u4e9b\u641c\u7d22\u6761\u4ef6\u4e2d\u867d\u7136\u51fa\u73b0\u4e86\u7d22\u5f15\u5217\uff0c\u4f46\u5374\u4e0d\u80fd\u4f7f\u7528\u5230\u7d22\u5f15\uff0c\u6bd4\u5982\u4e0b\u8fb9\u8fd9\u4e2a\u67e5\u8be2\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"SELECT * FROM s1 WHERE key1 > 'z' AND key1 LIKE '%a';\n\n")),(0,r.kt)("p",{parentName:"li"},"\u5176\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"key1 > 'z'"),"\u53ef\u4ee5\u4f7f\u7528\u5230\u7d22\u5f15\uff0c\u4f46\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"key1 LIKE '%a'"),"\u5374\u65e0\u6cd5\u4f7f\u7528\u5230\u7d22\u5f15\uff0c\u5728\u4ee5\u524d\u7248\u672c\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u4e2d\uff0c\u662f\u6309\u7167\u4e0b\u8fb9\u6b65\u9aa4\u6765\u6267\u884c\u8fd9\u4e2a\u67e5\u8be2\u7684\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5148\u6839\u636e",(0,r.kt)("inlineCode",{parentName:"li"},"key1 > 'z'"),"\u8fd9\u4e2a\u6761\u4ef6\uff0c\u4ece\u4e8c\u7ea7\u7d22\u5f15",(0,r.kt)("inlineCode",{parentName:"li"},"idx_key1"),"\u4e2d\u83b7\u53d6\u5230\u5bf9\u5e94\u7684\u4e8c\u7ea7\u7d22\u5f15\u8bb0\u5f55\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6839\u636e\u4e0a\u4e00\u6b65\u9aa4\u5f97\u5230\u7684\u4e8c\u7ea7\u7d22\u5f15\u8bb0\u5f55\u4e2d\u7684\u4e3b\u952e\u503c\u8fdb\u884c\u56de\u8868\uff0c\u627e\u5230\u5b8c\u6574\u7684\u7528\u6237\u8bb0\u5f55\u518d\u68c0\u6d4b\u8be5\u8bb0\u5f55\u662f\u5426\u7b26\u5408",(0,r.kt)("inlineCode",{parentName:"li"},"key1 LIKE '%a'"),"\u8fd9\u4e2a\u6761\u4ef6\uff0c\u5c06\u7b26\u5408\u6761\u4ef6\u7684\u8bb0\u5f55\u52a0\u5165\u5230\u6700\u540e\u7684\u7ed3\u679c\u96c6\u3002")),(0,r.kt)("p",{parentName:"li"},"\u4f46\u662f\u867d\u7136",(0,r.kt)("inlineCode",{parentName:"p"},"key1 LIKE '%a'"),"\u4e0d\u80fd\u7ec4\u6210\u8303\u56f4\u533a\u95f4\u53c2\u4e0e",(0,r.kt)("inlineCode",{parentName:"p"},"range"),"\u8bbf\u95ee\u65b9\u6cd5\u7684\u6267\u884c\uff0c\u4f46\u8fd9\u4e2a\u6761\u4ef6\u6bd5\u7adf\u53ea\u6d89\u53ca\u5230\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"key1"),"\u5217\uff0c\u6240\u4ee5\u8bbe\u8ba1",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u7684\u5927\u53d4\u628a\u4e0a\u8fb9\u7684\u6b65\u9aa4\u6539\u8fdb\u4e86\u4e00\u4e0b\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5148\u6839\u636e",(0,r.kt)("inlineCode",{parentName:"li"},"key1 > 'z'"),"\u8fd9\u4e2a\u6761\u4ef6\uff0c\u5b9a\u4f4d\u5230\u4e8c\u7ea7\u7d22\u5f15",(0,r.kt)("inlineCode",{parentName:"li"},"idx_key1"),"\u4e2d\u5bf9\u5e94\u7684\u4e8c\u7ea7\u7d22\u5f15\u8bb0\u5f55\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u6307\u5b9a\u7684\u4e8c\u7ea7\u7d22\u5f15\u8bb0\u5f55\uff0c\u5148\u4e0d\u7740\u6025\u56de\u8868\uff0c\u800c\u662f\u5148\u68c0\u6d4b\u4e00\u4e0b\u8be5\u8bb0\u5f55\u662f\u5426\u6ee1\u8db3",(0,r.kt)("inlineCode",{parentName:"li"},"key1 LIKE '%a'"),"\u8fd9\u4e2a\u6761\u4ef6\uff0c\u5982\u679c\u8fd9\u4e2a\u6761\u4ef6\u4e0d\u6ee1\u8db3\uff0c\u5219\u8be5\u4e8c\u7ea7\u7d22\u5f15\u8bb0\u5f55\u538b\u6839\u513f\u5c31\u6ca1\u5fc5\u8981\u56de\u8868\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u6ee1\u8db3",(0,r.kt)("inlineCode",{parentName:"li"},"key1 LIKE '%a'"),"\u8fd9\u4e2a\u6761\u4ef6\u7684\u4e8c\u7ea7\u7d22\u5f15\u8bb0\u5f55\u6267\u884c\u56de\u8868\u64cd\u4f5c\u3002")),(0,r.kt)("p",{parentName:"li"},"\u6211\u4eec\u8bf4\u56de\u8868\u64cd\u4f5c\u5176\u5b9e\u662f\u4e00\u4e2a\u968f\u673a",(0,r.kt)("inlineCode",{parentName:"p"},"IO"),"\uff0c\u6bd4\u8f83\u8017\u65f6\uff0c\u6240\u4ee5\u4e0a\u8ff0\u4fee\u6539\u867d\u7136\u53ea\u6539\u8fdb\u4e86\u4e00\u70b9\u70b9\uff0c\u4f46\u662f\u53ef\u4ee5\u7701\u53bb\u597d\u591a\u56de\u8868\u64cd\u4f5c\u7684\u6210\u672c\u3002\u8bbe\u8ba1",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u7684\u5927\u53d4\u4eec\u628a\u4ed6\u4eec\u7684\u8fd9\u4e2a\u6539\u8fdb\u79f0\u4e4b\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"\u7d22\u5f15\u6761\u4ef6\u4e0b\u63a8"),"\uff08\u82f1\u6587\u540d\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"Index Condition Pushdown"),"\uff09\u3002"),(0,r.kt)("p",{parentName:"li"},"\u5982\u679c\u5728\u67e5\u8be2\u8bed\u53e5\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\u5c06\u8981\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"\u7d22\u5f15\u6761\u4ef6\u4e0b\u63a8"),"\u8fd9\u4e2a\u7279\u6027\uff0c\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u4e2d\u5c06\u4f1a\u663e\u793a",(0,r.kt)("inlineCode",{parentName:"p"},"Using index condition"),"\uff0c\u6bd4\u5982\u8fd9\u6837\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 WHERE key1 > 'z' AND key1 LIKE '%b';\n  +----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-----------------------+\n  | id | select_type | table | partitions | type  | possible_keys | key      | key_len | ref  | rows | filtered | Extra                 |\n  +----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-----------------------+\n  |  1 | SIMPLE      | s1    | NULL       | range | idx_key1      | idx_key1 | 303     | NULL |  266 |   100.00 | Using index condition |\n  +----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-----------------------+\n  1 row in set, 1 warning (0.01 sec)\n\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Using where")),(0,r.kt)("p",{parentName:"li"},"\u5f53\u6211\u4eec\u4f7f\u7528\u5168\u8868\u626b\u63cf\u6765\u6267\u884c\u5bf9\u67d0\u4e2a\u8868\u7684\u67e5\u8be2\uff0c\u5e76\u4e14\u8be5\u8bed\u53e5\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE"),"\u5b50\u53e5\u4e2d\u6709\u9488\u5bf9\u8be5\u8868\u7684\u641c\u7d22\u6761\u4ef6\u65f6\uff0c\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u4e2d\u4f1a\u63d0\u793a\u4e0a\u8ff0\u989d\u5916\u4fe1\u606f\u3002\u6bd4\u5982\u4e0b\u8fb9\u8fd9\u4e2a\u67e5\u8be2\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 WHERE common_field = 'a';\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+\n|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 9688 |    10.00 | Using where |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+\n1 row in set, 1 warning (0.01 sec)\n\n")),(0,r.kt)("p",{parentName:"li"},"\u5f53\u4f7f\u7528\u7d22\u5f15\u8bbf\u95ee\u6765\u6267\u884c\u5bf9\u67d0\u4e2a\u8868\u7684\u67e5\u8be2\uff0c\u5e76\u4e14\u8be5\u8bed\u53e5\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE"),"\u5b50\u53e5\u4e2d\u6709\u9664\u4e86\u8be5\u7d22\u5f15\u5305\u542b\u7684\u5217\u4e4b\u5916\u7684\u5176\u4ed6\u641c\u7d22\u6761\u4ef6\u65f6\uff0c\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u4e2d\u4e5f\u4f1a\u63d0\u793a\u4e0a\u8ff0\u989d\u5916\u4fe1\u606f\u3002\u6bd4\u5982\u4e0b\u8fb9\u8fd9\u4e2a\u67e5\u8be2\u867d\u7136\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"idx_key1"),"\u7d22\u5f15\u6267\u884c\u67e5\u8be2\uff0c\u4f46\u662f\u641c\u7d22\u6761\u4ef6\u4e2d\u9664\u4e86\u5305\u542b",(0,r.kt)("inlineCode",{parentName:"p"},"key1"),"\u7684\u641c\u7d22\u6761\u4ef6",(0,r.kt)("inlineCode",{parentName:"p"},"key1 = 'a'"),"\uff0c\u8fd8\u6709\u5305\u542b",(0,r.kt)("inlineCode",{parentName:"p"},"common_field"),"\u7684\u641c\u7d22\u6761\u4ef6\uff0c\u6240\u4ee5",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u4f1a\u663e\u793a",(0,r.kt)("inlineCode",{parentName:"p"},"Using where"),"\u7684\u63d0\u793a\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 WHERE key1 = 'a' AND common_field = 'a';\n+----+-------------+-------+------------+------+---------------+----------+---------+-------+------+----------+-------------+\n| id | select_type | table | partitions | type | possible_keys | key      | key_len | ref   | rows | filtered | Extra       |\n+----+-------------+-------+------------+------+---------------+----------+---------+-------+------+----------+-------------+\n|  1 | SIMPLE      | s1    | NULL       | ref  | idx_key1      | idx_key1 | 303     | const |    8 |    10.00 | Using where |\n+----+-------------+-------+------------+------+---------------+----------+---------+-------+------+----------+-------------+\n1 row in set, 1 warning (0.00 sec)\n\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Using join buffer (Block Nested Loop)")),(0,r.kt)("p",{parentName:"li"},"\u5728\u8fde\u63a5\u67e5\u8be2\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u88ab\u9a71\u52a8\u8868\u4e0d\u80fd\u6709\u6548\u7684\u5229\u7528\u7d22\u5f15\u52a0\u5feb\u8bbf\u95ee\u901f\u5ea6\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u4e00\u822c\u4f1a\u4e3a\u5176\u5206\u914d\u4e00\u5757\u540d\u53eb",(0,r.kt)("inlineCode",{parentName:"p"},"join buffer"),"\u7684\u5185\u5b58\u5757\u6765\u52a0\u5feb\u67e5\u8be2\u901f\u5ea6\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u6240\u8bb2\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"\u57fa\u4e8e\u5757\u7684\u5d4c\u5957\u5faa\u73af\u7b97\u6cd5"),"\uff0c\u6bd4\u5982\u4e0b\u8fb9\u8fd9\u4e2a\u67e5\u8be2\u8bed\u53e5\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s1.common_field = s2.common_field;\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                                              |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+\n|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 9688 |   100.00 | NULL                                               |\n|  1 | SIMPLE      | s2    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 9954 |    10.00 | Using where; Using join buffer (Block Nested Loop) |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+\n2 rows in set, 1 warning (0.03 sec)\n\n")),(0,r.kt)("p",{parentName:"li"},"\u53ef\u4ee5\u5728\u5bf9",(0,r.kt)("inlineCode",{parentName:"p"},"s2"),"\u8868\u7684\u6267\u884c\u8ba1\u5212\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u663e\u793a\u4e86\u4e24\u4e2a\u63d0\u793a\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Using join buffer (Block Nested Loop)"),"\uff1a\u8fd9\u662f\u56e0\u4e3a\u5bf9\u8868",(0,r.kt)("inlineCode",{parentName:"li"},"s2"),"\u7684\u8bbf\u95ee\u4e0d\u80fd\u6709\u6548\u5229\u7528\u7d22\u5f15\uff0c\u53ea\u597d\u9000\u800c\u6c42\u5176\u6b21\uff0c\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"join buffer"),"\u6765\u51cf\u5c11\u5bf9",(0,r.kt)("inlineCode",{parentName:"li"},"s2"),"\u8868\u7684\u8bbf\u95ee\u6b21\u6570\uff0c\u4ece\u800c\u63d0\u9ad8\u6027\u80fd\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Using where"),"\uff1a\u53ef\u4ee5\u770b\u5230\u67e5\u8be2\u8bed\u53e5\u4e2d\u6709\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"li"},"s1.common_field = s2.common_field"),"\u6761\u4ef6\uff0c\u56e0\u4e3a",(0,r.kt)("inlineCode",{parentName:"li"},"s1"),"\u662f\u9a71\u52a8\u8868\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"s2"),"\u662f\u88ab\u9a71\u52a8\u8868\uff0c\u6240\u4ee5\u5728\u8bbf\u95ee",(0,r.kt)("inlineCode",{parentName:"li"},"s2"),"\u8868\u65f6\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"s1.common_field"),"\u7684\u503c\u5df2\u7ecf\u786e\u5b9a\u4e0b\u6765\u4e86\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u67e5\u8be2",(0,r.kt)("inlineCode",{parentName:"li"},"s2"),"\u8868\u7684\u6761\u4ef6\u5c31\u662f",(0,r.kt)("inlineCode",{parentName:"li"},"s2.common_field = \u4e00\u4e2a\u5e38\u6570"),"\uff0c\u6240\u4ee5\u63d0\u793a\u4e86",(0,r.kt)("inlineCode",{parentName:"li"},"Using where"),"\u989d\u5916\u4fe1\u606f\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Not exists")),(0,r.kt)("p",{parentName:"li"},"\u5f53\u6211\u4eec\u4f7f\u7528\u5de6\uff08\u5916\uff09\u8fde\u63a5\u65f6\uff0c\u5982\u679c",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE"),"\u5b50\u53e5\u4e2d\u5305\u542b\u8981\u6c42\u88ab\u9a71\u52a8\u8868\u7684\u67d0\u4e2a\u5217\u7b49\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),"\u503c\u7684\u641c\u7d22\u6761\u4ef6\uff0c\u800c\u4e14\u90a3\u4e2a\u5217\u53c8\u662f\u4e0d\u5141\u8bb8\u5b58\u50a8",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),"\u503c\u7684\uff0c\u90a3\u4e48\u5728\u8be5\u8868\u7684\u6267\u884c\u8ba1\u5212\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u5c31\u4f1a\u63d0\u793a",(0,r.kt)("inlineCode",{parentName:"p"},"Not exists"),"\u989d\u5916\u4fe1\u606f\uff0c\u6bd4\u5982\u8fd9\u6837\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 LEFT JOIN s2 ON s1.key1 = s2.key1 WHERE s2.id IS NULL;\n+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+-------------------------+\n| id | select_type | table | partitions | type | possible_keys | key      | key_len | ref               | rows | filtered | Extra                   |\n+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+-------------------------+\n|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL     | NULL    | NULL              | 9688 |   100.00 | NULL                    |\n|  1 | SIMPLE      | s2    | NULL       | ref  | idx_key1      | idx_key1 | 303     | xiaohaizi.s1.key1 |    1 |    10.00 | Using where; Not exists |\n+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+-------------------------+\n2 rows in set, 1 warning (0.00 sec)\n\n")),(0,r.kt)("p",{parentName:"li"},"\u4e0a\u8ff0\u67e5\u8be2\u4e2d",(0,r.kt)("inlineCode",{parentName:"p"},"s1"),"\u8868\u662f\u9a71\u52a8\u8868\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"s2"),"\u8868\u662f\u88ab\u9a71\u52a8\u8868\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"s2.id"),"\u5217\u662f\u4e0d\u5141\u8bb8\u5b58\u50a8",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),"\u503c\u7684\uff0c\u800c",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE"),"\u5b50\u53e5\u4e2d\u53c8\u5305\u542b",(0,r.kt)("inlineCode",{parentName:"p"},"s2.id IS NULL"),"\u7684\u641c\u7d22\u6761\u4ef6\uff0c\u8fd9\u610f\u5473\u7740\u5fc5\u5b9a\u662f\u9a71\u52a8\u8868\u7684\u8bb0\u5f55\u5728\u88ab\u9a71\u52a8\u8868\u4e2d\u627e\u4e0d\u5230\u5339\u914d",(0,r.kt)("inlineCode",{parentName:"p"},"ON"),"\u5b50\u53e5\u6761\u4ef6\u7684\u8bb0\u5f55\u624d\u4f1a\u628a\u8be5\u9a71\u52a8\u8868\u7684\u8bb0\u5f55\u52a0\u5165\u5230\u6700\u7ec8\u7684\u7ed3\u679c\u96c6\uff0c\u6240\u4ee5\u5bf9\u4e8e\u67d0\u6761\u9a71\u52a8\u8868\u4e2d\u7684\u8bb0\u5f55\u6765\u8bf4\uff0c\u5982\u679c\u80fd\u5728\u88ab\u9a71\u52a8\u8868\u4e2d\u627e\u52301\u6761\u7b26\u5408",(0,r.kt)("inlineCode",{parentName:"p"},"ON"),"\u5b50\u53e5\u6761\u4ef6\u7684\u8bb0\u5f55\uff0c\u90a3\u4e48\u8be5\u9a71\u52a8\u8868\u7684\u8bb0\u5f55\u5c31\u4e0d\u4f1a\u88ab\u52a0\u5165\u5230\u6700\u7ec8\u7684\u7ed3\u679c\u96c6\uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u6ca1\u6709\u5fc5\u8981\u5230\u88ab\u9a71\u52a8\u8868\u4e2d\u627e\u5230\u5168\u90e8\u7b26\u5408ON\u5b50\u53e5\u6761\u4ef6\u7684\u8bb0\u5f55\uff0c\u8fd9\u6837\u53ef\u4ee5\u7a0d\u5fae\u8282\u7701\u4e00\u70b9\u6027\u80fd\u3002"),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"\u5c0f\u8d34\u58eb\uff1a \u53f3\uff08\u5916\uff09\u8fde\u63a5\u53ef\u4ee5\u88ab\u8f6c\u6362\u4e3a\u5de6\uff08\u5916\uff09\u8fde\u63a5\uff0c\u6240\u4ee5\u5c31\u4e0d\u63d0\u53f3\uff08\u5916\uff09\u8fde\u63a5\u7684\u60c5\u51b5\u4e86\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Using intersect(...)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"Using union(...)"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"Using sort_union(...)")),(0,r.kt)("p",{parentName:"li"},"\u5982\u679c\u6267\u884c\u8ba1\u5212\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u51fa\u73b0\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"Using intersect(...)"),"\u63d0\u793a\uff0c\u8bf4\u660e\u51c6\u5907\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"Intersect"),"\u7d22\u5f15\u5408\u5e76\u7684\u65b9\u5f0f\u6267\u884c\u67e5\u8be2\uff0c\u62ec\u53f7\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"..."),"\u8868\u793a\u9700\u8981\u8fdb\u884c\u7d22\u5f15\u5408\u5e76\u7684\u7d22\u5f15\u540d\u79f0\uff1b\u5982\u679c\u51fa\u73b0\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"Using union(...)"),"\u63d0\u793a\uff0c\u8bf4\u660e\u51c6\u5907\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"Union"),"\u7d22\u5f15\u5408\u5e76\u7684\u65b9\u5f0f\u6267\u884c\u67e5\u8be2\uff1b\u51fa\u73b0\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"Using sort_union(...)"),"\u63d0\u793a\uff0c\u8bf4\u660e\u51c6\u5907\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"Sort-Union"),"\u7d22\u5f15\u5408\u5e76\u7684\u65b9\u5f0f\u6267\u884c\u67e5\u8be2\u3002\u6bd4\u5982\u8fd9\u4e2a\u67e5\u8be2\u7684\u6267\u884c\u8ba1\u5212\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 WHERE key1 = 'a' AND key3 = 'a';\n+----+-------------+-------+------------+-------------+-------------------+-------------------+---------+------+------+----------+-------------------------------------------------+\n| id | select_type | table | partitions | type        | possible_keys     | key               | key_len | ref  | rows | filtered | Extra                                           |\n+----+-------------+-------+------------+-------------+-------------------+-------------------+---------+------+------+----------+-------------------------------------------------+\n|  1 | SIMPLE      | s1    | NULL       | index_merge | idx_key1,idx_key3 | idx_key3,idx_key1 | 303,303 | NULL |    1 |   100.00 | Using intersect(idx_key3,idx_key1); Using where |\n+----+-------------+-------+------------+-------------+-------------------+-------------------+---------+------+------+----------+-------------------------------------------------+\n1 row in set, 1 warning (0.01 sec)\n\n")),(0,r.kt)("p",{parentName:"li"},"\u5176\u4e2d",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u5c31\u663e\u793a\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"Using intersect(idx_key3,idx_key1)"),"\uff0c\u8868\u660e",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u5373\u5c06\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"idx_key3"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"idx_key1"),"\u8fd9\u4e24\u4e2a\u7d22\u5f15\u8fdb\u884c",(0,r.kt)("inlineCode",{parentName:"p"},"Intersect"),"\u7d22\u5f15\u5408\u5e76\u7684\u65b9\u5f0f\u6267\u884c\u67e5\u8be2\u3002"),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"\u5c0f\u8d34\u58eb\uff1a \u5269\u4e0b\u4e24\u79cd\u7c7b\u578b\u7684\u7d22\u5f15\u5408\u5e76\u7684Extra\u5217\u4fe1\u606f\u5c31\u4e0d\u4e00\u4e00\u4e3e\u4f8b\u5b50\u4e86\uff0c\u81ea\u5df1\u5199\u4e2a\u67e5\u8be2\u7785\u7785\u5457\uff5e"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Zero limit")),(0,r.kt)("p",{parentName:"li"},"\u5f53\u6211\u4eec\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"LIMIT"),"\u5b50\u53e5\u7684\u53c2\u6570\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"0"),"\u65f6\uff0c\u8868\u793a\u538b\u6839\u513f\u4e0d\u6253\u7b97\u4ece\u8868\u4e2d\u8bfb\u51fa\u4efb\u4f55\u8bb0\u5f55\uff0c\u5c06\u4f1a\u63d0\u793a\u8be5\u989d\u5916\u4fe1\u606f\uff0c\u6bd4\u5982\u8fd9\u6837\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 LIMIT 0;\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra      |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+------------+\n|  1 | SIMPLE      | NULL  | NULL       | NULL | NULL          | NULL | NULL    | NULL | NULL |     NULL | Zero limit |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+------------+\n1 row in set, 1 warning (0.00 sec)\n\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Using filesort")),(0,r.kt)("p",{parentName:"li"},"\u6709\u4e00\u4e9b\u60c5\u51b5\u4e0b\u5bf9\u7ed3\u679c\u96c6\u4e2d\u7684\u8bb0\u5f55\u8fdb\u884c\u6392\u5e8f\u662f\u53ef\u4ee5\u4f7f\u7528\u5230\u7d22\u5f15\u7684\uff0c\u6bd4\u5982\u4e0b\u8fb9\u8fd9\u4e2a\u67e5\u8be2\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 ORDER BY key1 LIMIT 10;\n+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-------+\n| id | select_type | table | partitions | type  | possible_keys | key      | key_len | ref  | rows | filtered | Extra |\n+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-------+\n|  1 | SIMPLE      | s1    | NULL       | index | NULL          | idx_key1 | 303     | NULL |   10 |   100.00 | NULL  |\n+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-------+\n1 row in set, 1 warning (0.03 sec)\n\n")),(0,r.kt)("p",{parentName:"li"},"\u8fd9\u4e2a\u67e5\u8be2\u8bed\u53e5\u53ef\u4ee5\u5229\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"idx_key1"),"\u7d22\u5f15\u76f4\u63a5\u53d6\u51fa",(0,r.kt)("inlineCode",{parentName:"p"},"key1"),"\u5217\u768410\u6761\u8bb0\u5f55\uff0c\u7136\u540e\u518d\u8fdb\u884c\u56de\u8868\u64cd\u4f5c\u5c31\u597d\u4e86\u3002\u4f46\u662f\u5f88\u591a\u60c5\u51b5\u4e0b\u6392\u5e8f\u64cd\u4f5c\u65e0\u6cd5\u4f7f\u7528\u5230\u7d22\u5f15\uff0c\u53ea\u80fd\u5728\u5185\u5b58\u4e2d\uff08\u8bb0\u5f55\u8f83\u5c11\u7684\u65f6\u5019\uff09\u6216\u8005\u78c1\u76d8\u4e2d\uff08\u8bb0\u5f55\u8f83\u591a\u7684\u65f6\u5019\uff09\u8fdb\u884c\u6392\u5e8f\uff0c\u8bbe\u8ba1",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u7684\u5927\u53d4\u628a\u8fd9\u79cd\u5728\u5185\u5b58\u4e2d\u6216\u8005\u78c1\u76d8\u4e0a\u8fdb\u884c\u6392\u5e8f\u7684\u65b9\u5f0f\u7edf\u79f0\u4e3a\u6587\u4ef6\u6392\u5e8f\uff08\u82f1\u6587\u540d\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"filesort"),"\uff09\u3002\u5982\u679c\u67d0\u4e2a\u67e5\u8be2\u9700\u8981\u4f7f\u7528\u6587\u4ef6\u6392\u5e8f\u7684\u65b9\u5f0f\u6267\u884c\u67e5\u8be2\uff0c\u5c31\u4f1a\u5728\u6267\u884c\u8ba1\u5212\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u4e2d\u663e\u793a",(0,r.kt)("inlineCode",{parentName:"p"},"Using filesort"),"\u63d0\u793a\uff0c\u6bd4\u5982\u8fd9\u6837\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 ORDER BY common_field LIMIT 10;\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra          |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+\n|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 9688 |   100.00 | Using filesort |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+\n1 row in set, 1 warning (0.00 sec)\n\n")),(0,r.kt)("p",{parentName:"li"},"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u67e5\u8be2\u4e2d\u9700\u8981\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"filesort"),"\u7684\u65b9\u5f0f\u8fdb\u884c\u6392\u5e8f\u7684\u8bb0\u5f55\u975e\u5e38\u591a\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u5f88\u8017\u8d39\u6027\u80fd\u7684\uff0c\u6211\u4eec\u6700\u597d\u60f3\u529e\u6cd5\u5c06\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"\u6587\u4ef6\u6392\u5e8f"),"\u7684\u6267\u884c\u65b9\u5f0f\u6539\u4e3a\u4f7f\u7528\u7d22\u5f15\u8fdb\u884c\u6392\u5e8f\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Using temporary")),(0,r.kt)("p",{parentName:"li"},"\u5728\u8bb8\u591a\u67e5\u8be2\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u53ef\u80fd\u4f1a\u501f\u52a9\u4e34\u65f6\u8868\u6765\u5b8c\u6210\u4e00\u4e9b\u529f\u80fd\uff0c\u6bd4\u5982\u53bb\u91cd\u3001\u6392\u5e8f\u4e4b\u7c7b\u7684\uff0c\u6bd4\u5982\u6211\u4eec\u5728\u6267\u884c\u8bb8\u591a\u5305\u542b",(0,r.kt)("inlineCode",{parentName:"p"},"DISTINCT"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"GROUP BY"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"UNION"),"\u7b49\u5b50\u53e5\u7684\u67e5\u8be2\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u4e0d\u80fd\u6709\u6548\u5229\u7528\u7d22\u5f15\u6765\u5b8c\u6210\u67e5\u8be2\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u5f88\u6709\u53ef\u80fd\u5bfb\u6c42\u901a\u8fc7\u5efa\u7acb\u5185\u90e8\u7684\u4e34\u65f6\u8868\u6765\u6267\u884c\u67e5\u8be2\u3002\u5982\u679c\u67e5\u8be2\u4e2d\u4f7f\u7528\u5230\u4e86\u5185\u90e8\u7684\u4e34\u65f6\u8868\uff0c\u5728\u6267\u884c\u8ba1\u5212\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u5c06\u4f1a\u663e\u793a",(0,r.kt)("inlineCode",{parentName:"p"},"Using temporary"),"\u63d0\u793a\uff0c\u6bd4\u65b9\u8bf4\u8fd9\u6837\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT DISTINCT common_field FROM s1;\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-----------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra           |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-----------------+\n|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 9688 |   100.00 | Using temporary |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-----------------+\n1 row in set, 1 warning (0.00 sec)\n\n")),(0,r.kt)("p",{parentName:"li"},"\u518d\u6bd4\u5982\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT common_field, COUNT(*) AS amount FROM s1 GROUP BY common_field;\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                           |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+\n|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 9688 |   100.00 | Using temporary; Using filesort |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+\n1 row in set, 1 warning (0.00 sec)\n\n")),(0,r.kt)("p",{parentName:"li"},"\u4e0d\u77e5\u9053\u5927\u5bb6\u6ce8\u610f\u5230\u6ca1\u6709\uff0c\u4e0a\u8ff0\u6267\u884c\u8ba1\u5212\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u4e0d\u4ec5\u4ec5\u5305\u542b",(0,r.kt)("inlineCode",{parentName:"p"},"Using temporary"),"\u63d0\u793a\uff0c\u8fd8\u5305\u542b",(0,r.kt)("inlineCode",{parentName:"p"},"Using filesort"),"\u63d0\u793a\uff0c\u53ef\u662f\u6211\u4eec\u7684\u67e5\u8be2\u8bed\u53e5\u4e2d\u660e\u660e\u6ca1\u6709\u5199",(0,r.kt)("inlineCode",{parentName:"p"},"ORDER BY"),"\u5b50\u53e5\u5440\uff1f\u8fd9\u662f\u56e0\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u4f1a\u5728\u5305\u542b",(0,r.kt)("inlineCode",{parentName:"p"},"GROUP BY"),"\u5b50\u53e5\u7684\u67e5\u8be2\u4e2d\u9ed8\u8ba4\u6dfb\u52a0\u4e0a",(0,r.kt)("inlineCode",{parentName:"p"},"ORDER BY"),"\u5b50\u53e5\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0a\u8ff0\u67e5\u8be2\u5176\u5b9e\u548c\u4e0b\u8fb9\u8fd9\u4e2a\u67e5\u8be2\u7b49\u4ef7\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"EXPLAIN SELECT common_field, COUNT(*) AS amount FROM s1 GROUP BY common_field ORDER BY common_field;\n\n")),(0,r.kt)("p",{parentName:"li"},"\u5982\u679c\u6211\u4eec\u5e76\u4e0d\u60f3\u4e3a\u5305\u542b",(0,r.kt)("inlineCode",{parentName:"p"},"GROUP BY"),"\u5b50\u53e5\u7684\u67e5\u8be2\u8fdb\u884c\u6392\u5e8f\uff0c\u9700\u8981\u6211\u4eec\u663e\u5f0f\u7684\u5199\u4e0a",(0,r.kt)("inlineCode",{parentName:"p"},"ORDER BY NULL"),"\uff0c\u5c31\u50cf\u8fd9\u6837\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT common_field, COUNT(*) AS amount FROM s1 GROUP BY common_field ORDER BY NULL;\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-----------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra           |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-----------------+\n|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 9688 |   100.00 | Using temporary |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-----------------+\n1 row in set, 1 warning (0.00 sec)\n\n")),(0,r.kt)("p",{parentName:"li"},"\u8fd9\u56de\u6267\u884c\u8ba1\u5212\u4e2d\u5c31\u6ca1\u6709",(0,r.kt)("inlineCode",{parentName:"p"},"Using filesort"),"\u7684\u63d0\u793a\u4e86\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u6267\u884c\u67e5\u8be2\u65f6\u53ef\u4ee5\u7701\u53bb\u5bf9\u8bb0\u5f55\u8fdb\u884c\u6587\u4ef6\u6392\u5e8f\u7684\u6210\u672c\u4e86\u3002"),(0,r.kt)("p",{parentName:"li"},"\u53e6\u5916\uff0c\u6267\u884c\u8ba1\u5212\u4e2d\u51fa\u73b0",(0,r.kt)("inlineCode",{parentName:"p"},"Using temporary"),"\u5e76\u4e0d\u662f\u4e00\u4e2a\u597d\u7684\u5f81\u5146\uff0c\u56e0\u4e3a\u5efa\u7acb\u4e0e\u7ef4\u62a4\u4e34\u65f6\u8868\u8981\u4ed8\u51fa\u5f88\u5927\u6210\u672c\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u6700\u597d\u80fd\u4f7f\u7528\u7d22\u5f15\u6765\u66ff\u4ee3\u6389\u4f7f\u7528\u4e34\u65f6\u8868\uff0c\u6bd4\u65b9\u8bf4\u4e0b\u8fb9\u8fd9\u4e2a\u5305\u542b",(0,r.kt)("inlineCode",{parentName:"p"},"GROUP BY"),"\u5b50\u53e5\u7684\u67e5\u8be2\u5c31\u4e0d\u9700\u8981\u4f7f\u7528\u4e34\u65f6\u8868\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT key1, COUNT(*) AS amount FROM s1 GROUP BY key1;\n+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-------------+\n| id | select_type | table | partitions | type  | possible_keys | key      | key_len | ref  | rows | filtered | Extra       |\n+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-------------+\n|  1 | SIMPLE      | s1    | NULL       | index | idx_key1      | idx_key1 | 303     | NULL | 9688 |   100.00 | Using index |\n+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-------------+\n1 row in set, 1 warning (0.00 sec)\n\n")),(0,r.kt)("p",{parentName:"li"},"\u4ece",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Using index"),"\u7684\u63d0\u793a\u91cc\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u4e0a\u8ff0\u67e5\u8be2\u53ea\u9700\u8981\u626b\u63cf",(0,r.kt)("inlineCode",{parentName:"p"},"idx_key1"),"\u7d22\u5f15\u5c31\u53ef\u4ee5\u641e\u5b9a\u4e86\uff0c\u4e0d\u518d\u9700\u8981\u4e34\u65f6\u8868\u4e86\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Start temporary, End temporary")),(0,r.kt)("p",{parentName:"li"},"\u6211\u4eec\u524d\u8fb9\u5520\u53e8\u5b50\u67e5\u8be2\u7684\u65f6\u5019\u8bf4\u8fc7\uff0c\u67e5\u8be2\u4f18\u5316\u5668\u4f1a\u4f18\u5148\u5c1d\u8bd5\u5c06",(0,r.kt)("inlineCode",{parentName:"p"},"IN"),"\u5b50\u67e5\u8be2\u8f6c\u6362\u6210",(0,r.kt)("inlineCode",{parentName:"p"},"semi-join"),"\uff0c\u800c",(0,r.kt)("inlineCode",{parentName:"p"},"semi-join"),"\u53c8\u6709\u597d\u591a\u79cd\u6267\u884c\u7b56\u7565\uff0c\u5f53\u6267\u884c\u7b56\u7565\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"DuplicateWeedout"),"\u65f6\uff0c\u4e5f\u5c31\u662f\u901a\u8fc7\u5efa\u7acb\u4e34\u65f6\u8868\u6765\u5b9e\u73b0\u4e3a\u5916\u5c42\u67e5\u8be2\u4e2d\u7684\u8bb0\u5f55\u8fdb\u884c\u53bb\u91cd\u64cd\u4f5c\u65f6\uff0c\u9a71\u52a8\u8868\u67e5\u8be2\u6267\u884c\u8ba1\u5212\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u5c06\u663e\u793a",(0,r.kt)("inlineCode",{parentName:"p"},"Start temporary"),"\u63d0\u793a\uff0c\u88ab\u9a71\u52a8\u8868\u67e5\u8be2\u6267\u884c\u8ba1\u5212\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u5c06\u663e\u793a",(0,r.kt)("inlineCode",{parentName:"p"},"End temporary"),"\u63d0\u793a\uff0c\u5c31\u662f\u8fd9\u6837\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key3 FROM s2 WHERE common_field = 'a');\n+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+------------------------------+\n| id | select_type | table | partitions | type | possible_keys | key      | key_len | ref               | rows | filtered | Extra                        |\n+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+------------------------------+\n|  1 | SIMPLE      | s2    | NULL       | ALL  | idx_key3      | NULL     | NULL    | NULL              | 9954 |    10.00 | Using where; Start temporary |\n|  1 | SIMPLE      | s1    | NULL       | ref  | idx_key1      | idx_key1 | 303     | xiaohaizi.s2.key3 |    1 |   100.00 | End temporary                |\n+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+------------------------------+\n2 rows in set, 1 warning (0.00 sec)\n\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"LooseScan")),(0,r.kt)("p",{parentName:"li"},"\u5728\u5c06",(0,r.kt)("inlineCode",{parentName:"p"},"In"),"\u5b50\u67e5\u8be2\u8f6c\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"semi-join"),"\u65f6\uff0c\u5982\u679c\u91c7\u7528\u7684\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"LooseScan"),"\u6267\u884c\u7b56\u7565\uff0c\u5219\u5728\u9a71\u52a8\u8868\u6267\u884c\u8ba1\u5212\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u5c31\u662f\u663e\u793a",(0,r.kt)("inlineCode",{parentName:"p"},"LooseScan"),"\u63d0\u793a\uff0c\u6bd4\u5982\u8fd9\u6837\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 WHERE key3 IN (SELECT key1 FROM s2 WHERE key1 > 'z');\n+----+-------------+-------+------------+-------+---------------+----------+---------+-------------------+------+----------+-------------------------------------+\n| id | select_type | table | partitions | type  | possible_keys | key      | key_len | ref               | rows | filtered | Extra                               |\n+----+-------------+-------+------------+-------+---------------+----------+---------+-------------------+------+----------+-------------------------------------+\n|  1 | SIMPLE      | s2    | NULL       | range | idx_key1      | idx_key1 | 303     | NULL              |  270 |   100.00 | Using where; Using index; LooseScan |\n|  1 | SIMPLE      | s1    | NULL       | ref   | idx_key3      | idx_key3 | 303     | xiaohaizi.s2.key1 |    1 |   100.00 | NULL                                |\n+----+-------------+-------+------------+-------+---------------+----------+---------+-------------------+------+----------+-------------------------------------+\n2 rows in set, 1 warning (0.01 sec)\n\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"FirstMatch(tbl_name)")),(0,r.kt)("p",{parentName:"li"},"\u5728\u5c06",(0,r.kt)("inlineCode",{parentName:"p"},"In"),"\u5b50\u67e5\u8be2\u8f6c\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"semi-join"),"\u65f6\uff0c\u5982\u679c\u91c7\u7528\u7684\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"FirstMatch"),"\u6267\u884c\u7b56\u7565\uff0c\u5219\u5728\u88ab\u9a71\u52a8\u8868\u6267\u884c\u8ba1\u5212\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Extra"),"\u5217\u5c31\u662f\u663e\u793a",(0,r.kt)("inlineCode",{parentName:"p"},"FirstMatch(tbl_name)"),"\u63d0\u793a\uff0c\u6bd4\u5982\u8fd9\u6837\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT * FROM s1 WHERE common_field IN (SELECT key1 FROM s2 where s1.key3 = s2.key3);\n+----+-------------+-------+------------+------+-------------------+----------+---------+-------------------+------+----------+-----------------------------+\n| id | select_type | table | partitions | type | possible_keys     | key      | key_len | ref               | rows | filtered | Extra                       |\n+----+-------------+-------+------------+------+-------------------+----------+---------+-------------------+------+----------+-----------------------------+\n|  1 | SIMPLE      | s1    | NULL       | ALL  | idx_key3          | NULL     | NULL    | NULL              | 9688 |   100.00 | Using where                 |\n|  1 | SIMPLE      | s2    | NULL       | ref  | idx_key1,idx_key3 | idx_key3 | 303     | xiaohaizi.s1.key3 |    1 |     4.87 | Using where; FirstMatch(s1) |\n+----+-------------+-------+------------+------+-------------------+----------+---------+-------------------+------+----------+-----------------------------+\n2 rows in set, 2 warnings (0.00 sec)\n\n")))),(0,r.kt)("h2",{id:"json\u683c\u5f0f\u7684\u6267\u884c\u8ba1\u5212"},"Json\u683c\u5f0f\u7684\u6267\u884c\u8ba1\u5212"),(0,r.kt)("p",null,"\u6211\u4eec\u4e0a\u8fb9\u4ecb\u7ecd\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"EXPLAIN"),"\u8bed\u53e5\u8f93\u51fa\u4e2d\u7f3a\u5c11\u4e86\u4e00\u4e2a\u8861\u91cf\u6267\u884c\u8ba1\u5212\u597d\u574f\u7684\u91cd\u8981\u5c5e\u6027 \u2014\u2014 \u6210\u672c\u3002\u4e0d\u8fc7\u8bbe\u8ba1",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u7684\u5927\u53d4\u8d34\u5fc3\u7684\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u79cd\u67e5\u770b\u67d0\u4e2a\u6267\u884c\u8ba1\u5212\u82b1\u8d39\u7684\u6210\u672c\u7684\u65b9\u5f0f\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728",(0,r.kt)("inlineCode",{parentName:"li"},"EXPLAIN"),"\u5355\u8bcd\u548c\u771f\u6b63\u7684\u67e5\u8be2\u8bed\u53e5\u4e2d\u95f4\u52a0\u4e0a",(0,r.kt)("inlineCode",{parentName:"li"},"FORMAT=JSON"),"\u3002")),(0,r.kt)("p",null,"\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"json"),"\u683c\u5f0f\u7684\u6267\u884c\u8ba1\u5212\uff0c\u91cc\u8fb9\u513f\u5305\u542b\u8be5\u8ba1\u5212\u82b1\u8d39\u7684\u6210\u672c\uff0c\u6bd4\u5982\u8fd9\u6837\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'mysql> EXPLAIN FORMAT=JSON SELECT * FROM s1 INNER JOIN s2 ON s1.key1 = s2.key2 WHERE s1.common_field = \'a\'\\G\n*************************** 1. row ***************************\n\nEXPLAIN: {\n  "query_block": {\n    "select_id": 1,     # \u6574\u4e2a\u67e5\u8be2\u8bed\u53e5\u53ea\u67091\u4e2aSELECT\u5173\u952e\u5b57\uff0c\u8be5\u5173\u952e\u5b57\u5bf9\u5e94\u7684id\u53f7\u4e3a1\n    "cost_info": {\n      "query_cost": "3197.16"   # \u6574\u4e2a\u67e5\u8be2\u7684\u6267\u884c\u6210\u672c\u9884\u8ba1\u4e3a3197.16\n    },\n    "nested_loop": [    # \u51e0\u4e2a\u8868\u4e4b\u95f4\u91c7\u7528\u5d4c\u5957\u5faa\u73af\u8fde\u63a5\u7b97\u6cd5\u6267\u884c\n    \n    # \u4ee5\u4e0b\u662f\u53c2\u4e0e\u5d4c\u5957\u5faa\u73af\u8fde\u63a5\u7b97\u6cd5\u7684\u5404\u4e2a\u8868\u7684\u4fe1\u606f\n      {\n        "table": {\n          "table_name": "s1",   # s1\u8868\u662f\u9a71\u52a8\u8868\n          "access_type": "ALL",     # \u8bbf\u95ee\u65b9\u6cd5\u4e3aALL\uff0c\u610f\u5473\u7740\u4f7f\u7528\u5168\u8868\u626b\u63cf\u8bbf\u95ee\n          "possible_keys": [    # \u53ef\u80fd\u4f7f\u7528\u7684\u7d22\u5f15\n            "idx_key1"\n          ],\n          "rows_examined_per_scan": 9688,   # \u67e5\u8be2\u4e00\u6b21s1\u8868\u5927\u81f4\u9700\u8981\u626b\u63cf9688\u6761\u8bb0\u5f55\n          "rows_produced_per_join": 968,    # \u9a71\u52a8\u8868s1\u7684\u6247\u51fa\u662f968\n          "filtered": "10.00",  # condition filtering\u4ee3\u8868\u7684\u767e\u5206\u6bd4\n          "cost_info": {\n            "read_cost": "1840.84",     # \u7a0d\u540e\u89e3\u91ca\n            "eval_cost": "193.76",      # \u7a0d\u540e\u89e3\u91ca\n            "prefix_cost": "2034.60",   # \u5355\u6b21\u67e5\u8be2s1\u8868\u603b\u5171\u7684\u6210\u672c\n            "data_read_per_join": "1M"  # \u8bfb\u53d6\u7684\u6570\u636e\u91cf\n          },\n          "used_columns": [     # \u6267\u884c\u67e5\u8be2\u4e2d\u6d89\u53ca\u5230\u7684\u5217\n            "id",\n            "key1",\n            "key2",\n            "key3",\n            "key_part1",\n            "key_part2",\n            "key_part3",\n            "common_field"\n          ],\n          \n          # \u5bf9s1\u8868\u8bbf\u95ee\u65f6\u9488\u5bf9\u5355\u8868\u67e5\u8be2\u7684\u6761\u4ef6\n          "attached_condition": "((`xiaohaizi`.`s1`.`common_field` = \'a\') and (`xiaohaizi`.`s1`.`key1` is not null))"\n        }\n      },\n      {\n        "table": {\n          "table_name": "s2",   # s2\u8868\u662f\u88ab\u9a71\u52a8\u8868\n          "access_type": "ref",     # \u8bbf\u95ee\u65b9\u6cd5\u4e3aref\uff0c\u610f\u5473\u7740\u4f7f\u7528\u7d22\u5f15\u7b49\u503c\u5339\u914d\u7684\u65b9\u5f0f\u8bbf\u95ee\n          "possible_keys": [    # \u53ef\u80fd\u4f7f\u7528\u7684\u7d22\u5f15\n            "idx_key2"\n          ],\n          "key": "idx_key2",    # \u5b9e\u9645\u4f7f\u7528\u7684\u7d22\u5f15\n          "used_key_parts": [   # \u4f7f\u7528\u5230\u7684\u7d22\u5f15\u5217\n            "key2"\n          ],\n          "key_length": "5",    # key_len\n          "ref": [      # \u4e0ekey2\u5217\u8fdb\u884c\u7b49\u503c\u5339\u914d\u7684\u5bf9\u8c61\n            "xiaohaizi.s1.key1"\n          ],\n          "rows_examined_per_scan": 1,  # \u67e5\u8be2\u4e00\u6b21s2\u8868\u5927\u81f4\u9700\u8981\u626b\u63cf1\u6761\u8bb0\u5f55\n          "rows_produced_per_join": 968,    # \u88ab\u9a71\u52a8\u8868s2\u7684\u6247\u51fa\u662f968\uff08\u7531\u4e8e\u540e\u8fb9\u6ca1\u6709\u591a\u4f59\u7684\u8868\u8fdb\u884c\u8fde\u63a5\uff0c\u6240\u4ee5\u8fd9\u4e2a\u503c\u4e5f\u6ca1\u5565\u7528\uff09\n          "filtered": "100.00",     # condition filtering\u4ee3\u8868\u7684\u767e\u5206\u6bd4\n          \n          # s2\u8868\u4f7f\u7528\u7d22\u5f15\u8fdb\u884c\u67e5\u8be2\u7684\u641c\u7d22\u6761\u4ef6\n          "index_condition": "(`xiaohaizi`.`s1`.`key1` = `xiaohaizi`.`s2`.`key2`)",\n          "cost_info": {\n            "read_cost": "968.80",      # \u7a0d\u540e\u89e3\u91ca\n            "eval_cost": "193.76",      # \u7a0d\u540e\u89e3\u91ca\n            "prefix_cost": "3197.16",   # \u5355\u6b21\u67e5\u8be2s1\u3001\u591a\u6b21\u67e5\u8be2s2\u8868\u603b\u5171\u7684\u6210\u672c\n            "data_read_per_join": "1M"  # \u8bfb\u53d6\u7684\u6570\u636e\u91cf\n          },\n          "used_columns": [     # \u6267\u884c\u67e5\u8be2\u4e2d\u6d89\u53ca\u5230\u7684\u5217\n            "id",\n            "key1",\n            "key2",\n            "key3",\n            "key_part1",\n            "key_part2",\n            "key_part3",\n            "common_field"\n          ]\n        }\n      }\n    ]\n  }\n}\n1 row in set, 2 warnings (0.00 sec)\n\n')),(0,r.kt)("p",null,"\u6211\u4eec\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"#"),"\u540e\u8fb9\u8ddf\u968f\u6ce8\u91ca\u7684\u5f62\u5f0f\u4e3a\u5927\u5bb6\u89e3\u91ca\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"EXPLAIN FORMAT=JSON"),"\u8bed\u53e5\u7684\u8f93\u51fa\u5185\u5bb9\uff0c\u4f46\u662f\u5927\u5bb6\u53ef\u80fd\u6709\u7591\u95ee",(0,r.kt)("inlineCode",{parentName:"p"},'"cost_info"'),"\u91cc\u8fb9\u7684\u6210\u672c\u770b\u7740\u602a\u602a\u7684\uff0c\u5b83\u4eec\u662f\u600e\u4e48\u8ba1\u7b97\u51fa\u6765\u7684\uff1f\u5148\u770b",(0,r.kt)("inlineCode",{parentName:"p"},"s1"),"\u8868\u7684",(0,r.kt)("inlineCode",{parentName:"p"},'"cost_info"'),"\u90e8\u5206\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"cost_info": {\n    "read_cost": "1840.84",\n    "eval_cost": "193.76",\n    "prefix_cost": "2034.60",\n    "data_read_per_join": "1M"\n}\n\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"read_cost"),"\u662f\u7531\u4e0b\u8fb9\u8fd9\u4e24\u90e8\u5206\u7ec4\u6210\u7684\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IO"),"\u6210\u672c"),(0,r.kt)("li",{parentName:"ul"},"\u68c0\u6d4b",(0,r.kt)("inlineCode",{parentName:"li"},"rows \xd7 (1 - filter)"),"\u6761\u8bb0\u5f55\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"CPU"),"\u6210\u672c")),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"\u5c0f\u8d34\u58eb\uff1a rows\u548cfilter\u90fd\u662f\u6211\u4eec\u524d\u8fb9\u4ecb\u7ecd\u6267\u884c\u8ba1\u5212\u7684\u8f93\u51fa\u5217\uff0c\u5728JSON\u683c\u5f0f\u7684\u6267\u884c\u8ba1\u5212\u4e2d\uff0crows\u76f8\u5f53\u4e8erows","_","examined","_","per","_","scan\uff0cfiltered\u540d\u79f0\u4e0d\u53d8\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"eval_cost"),"\u662f\u8fd9\u6837\u8ba1\u7b97\u7684\uff1a"),(0,r.kt)("p",{parentName:"li"},"\u68c0\u6d4b ",(0,r.kt)("inlineCode",{parentName:"p"},"rows \xd7 filter"),"\u6761\u8bb0\u5f55\u7684\u6210\u672c\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"prefix_cost"),"\u5c31\u662f\u5355\u72ec\u67e5\u8be2",(0,r.kt)("inlineCode",{parentName:"p"},"s1"),"\u8868\u7684\u6210\u672c\uff0c\u4e5f\u5c31\u662f\uff1a"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"read_cost + eval_cost"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"data_read_per_join"),"\u8868\u793a\u5728\u6b64\u6b21\u67e5\u8be2\u4e2d\u9700\u8981\u8bfb\u53d6\u7684\u6570\u636e\u91cf\uff0c\u6211\u4eec\u5c31\u4e0d\u591a\u5520\u53e8\u8fd9\u4e2a\u4e86\u3002"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5c0f\u8d34\u58eb\uff1a \u5927\u5bb6\u5176\u5b9e\u6ca1\u5fc5\u8981\u5173\u6ce8MySQL\u4e3a\u5565\u4f7f\u7528\u8fd9\u4e48\u53e4\u602a\u7684\u65b9\u5f0f\u8ba1\u7b97\u51faread","_","cost\u548ceval","_","cost\uff0c\u5173\u6ce8prefix","_","cost\u662f\u67e5\u8be2s1\u8868\u7684\u6210\u672c\u5c31\u597d\u4e86\u3002")),(0,r.kt)("p",null,"\u5bf9\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"s2"),"\u8868\u7684",(0,r.kt)("inlineCode",{parentName:"p"},'"cost_info"'),"\u90e8\u5206\u662f\u8fd9\u6837\u7684\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"cost_info": {\n    "read_cost": "968.80",\n    "eval_cost": "193.76",\n    "prefix_cost": "3197.16",\n    "data_read_per_join": "1M"\n}\n\n')),(0,r.kt)("p",null,"\u7531\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"s2"),"\u8868\u662f\u88ab\u9a71\u52a8\u8868\uff0c\u6240\u4ee5\u53ef\u80fd\u88ab\u8bfb\u53d6\u591a\u6b21\uff0c\u8fd9\u91cc\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"read_cost"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"eval_cost"),"\u662f\u8bbf\u95ee\u591a\u6b21",(0,r.kt)("inlineCode",{parentName:"p"},"s2"),"\u8868\u540e\u7d2f\u52a0\u8d77\u6765\u7684\u503c\uff0c\u5927\u5bb6\u4e3b\u8981\u5173\u6ce8\u91cc\u8fb9\u513f\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"prefix_cost"),"\u7684\u503c\u4ee3\u8868\u7684\u662f\u6574\u4e2a\u8fde\u63a5\u67e5\u8be2\u9884\u8ba1\u7684\u6210\u672c\uff0c\u4e5f\u5c31\u662f\u5355\u6b21\u67e5\u8be2",(0,r.kt)("inlineCode",{parentName:"p"},"s1"),"\u8868\u548c\u591a\u6b21\u67e5\u8be2",(0,r.kt)("inlineCode",{parentName:"p"},"s2"),"\u8868\u540e\u7684\u6210\u672c\u7684\u548c\uff0c\u4e5f\u5c31\u662f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"968.80 + 193.76 + 2034.60 = 3197.16\n\n")),(0,r.kt)("h2",{id:"extented-explain"},"Extented EXPLAIN"),(0,r.kt)("p",null,"\u6700\u540e\uff0c\u8bbe\u8ba1",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u7684\u5927\u53d4\u8fd8\u4e3a\u6211\u4eec\u7559\u4e86\u4e2a\u5f69\u86cb\uff0c\u5728\u6211\u4eec\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"EXPLAIN"),"\u8bed\u53e5\u67e5\u770b\u4e86\u67d0\u4e2a\u67e5\u8be2\u7684\u6267\u884c\u8ba1\u5212\u540e\uff0c\u7d27\u63a5\u7740\u8fd8\u53ef\u4ee5\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"SHOW WARNINGS"),"\u8bed\u53e5\u67e5\u770b\u4e0e\u8fd9\u4e2a\u67e5\u8be2\u7684\u6267\u884c\u8ba1\u5212\u6709\u5173\u7684\u4e00\u4e9b\u6269\u5c55\u4fe1\u606f\uff0c\u6bd4\u5982\u8fd9\u6837\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"mysql> EXPLAIN SELECT s1.key1, s2.key1 FROM s1 LEFT JOIN s2 ON s1.key1 = s2.key1 WHERE s2.common_field IS NOT NULL;\n+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+-------------+\n| id | select_type | table | partitions | type | possible_keys | key      | key_len | ref               | rows | filtered | Extra       |\n+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+-------------+\n|  1 | SIMPLE      | s2    | NULL       | ALL  | idx_key1      | NULL     | NULL    | NULL              | 9954 |    90.00 | Using where |\n|  1 | SIMPLE      | s1    | NULL       | ref  | idx_key1      | idx_key1 | 303     | xiaohaizi.s2.key1 |    1 |   100.00 | Using index |\n+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+-------------+\n2 rows in set, 1 warning (0.00 sec)\n\nmysql> SHOW WARNINGS\\G\n*************************** 1. row ***************************\n  Level: Note\n   Code: 1003\nMessage: /* select#1 */ select `xiaohaizi`.`s1`.`key1` AS `key1`,`xiaohaizi`.`s2`.`key1` AS `key1` from `xiaohaizi`.`s1` join `xiaohaizi`.`s2` where ((`xiaohaizi`.`s1`.`key1` = `xiaohaizi`.`s2`.`key1`) and (`xiaohaizi`.`s2`.`common_field` is not null))\n1 row in set (0.00 sec)\n\n")),(0,r.kt)("p",null,"\u5927\u5bb6\u53ef\u4ee5\u770b\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"SHOW WARNINGS"),"\u5c55\u793a\u51fa\u6765\u7684\u4fe1\u606f\u6709\u4e09\u4e2a\u5b57\u6bb5\uff0c\u5206\u522b\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"Level"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"Code"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"Message"),"\u3002\u6211\u4eec\u6700\u5e38\u89c1\u7684\u5c31\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"Code"),"\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"1003"),"\u7684\u4fe1\u606f\uff0c\u5f53",(0,r.kt)("inlineCode",{parentName:"p"},"Code"),"\u503c\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"1003"),"\u65f6\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Message"),"\u5b57\u6bb5\u5c55\u793a\u7684\u4fe1\u606f\u7c7b\u4f3c\u4e8e\u67e5\u8be2\u4f18\u5316\u5668\u5c06\u6211\u4eec\u7684\u67e5\u8be2\u8bed\u53e5\u91cd\u5199\u540e\u7684\u8bed\u53e5\u3002\u6bd4\u5982\u6211\u4eec\u4e0a\u8fb9\u7684\u67e5\u8be2\u672c\u6765\u662f\u4e00\u4e2a\u5de6\uff08\u5916\uff09\u8fde\u63a5\u67e5\u8be2\uff0c\u4f46\u662f\u6709\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"s2.common_field IS NOT NULL"),"\u7684\u6761\u4ef6\uff0c\u7740\u5c31\u4f1a\u5bfc\u81f4\u67e5\u8be2\u4f18\u5316\u5668\u628a\u5de6\uff08\u5916\uff09\u8fde\u63a5\u67e5\u8be2\u4f18\u5316\u4e3a\u5185\u8fde\u63a5\u67e5\u8be2\uff0c\u4ece",(0,r.kt)("inlineCode",{parentName:"p"},"SHOW WARNINGS"),"\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Message"),"\u5b57\u6bb5\u4e5f\u53ef\u4ee5\u770b\u51fa\u6765\uff0c\u539f\u672c\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"LEFT JOIN"),"\u5df2\u7ecf\u53d8\u6210\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"JOIN"),"\u3002"),(0,r.kt)("p",null,"\u4f46\u662f\u5927\u5bb6\u4e00\u5b9a\u8981\u6ce8\u610f\uff0c\u6211\u4eec\u8bf4",(0,r.kt)("inlineCode",{parentName:"p"},"Message"),"\u5b57\u6bb5\u5c55\u793a\u7684\u4fe1\u606f\u7c7b\u4f3c\u4e8e\u67e5\u8be2\u4f18\u5316\u5668\u5c06\u6211\u4eec\u7684\u67e5\u8be2\u8bed\u53e5\u91cd\u5199\u540e\u7684\u8bed\u53e5\uff0c\u5e76\u4e0d\u662f\u7b49\u4ef7\u4e8e\uff0c\u4e5f\u5c31\u662f\u8bf4",(0,r.kt)("inlineCode",{parentName:"p"},"Message"),"\u5b57\u6bb5\u5c55\u793a\u7684\u4fe1\u606f\u5e76\u4e0d\u662f\u6807\u51c6\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\u5e76\u4e0d\u80fd\u76f4\u63a5\u62ff\u5230\u9ed1\u6846\u6846\u4e2d\u8fd0\u884c\uff0c\u5b83\u53ea\u80fd\u4f5c\u4e3a\u5e2e\u52a9\u6211\u4eec\u7406\u89e3\u67e5",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u5c06\u5982\u4f55\u6267\u884c\u67e5\u8be2\u8bed\u53e5\u7684\u4e00\u4e2a\u53c2\u8003\u4f9d\u636e\u800c\u5df2\u3002"))}m.isMDXComponent=!0}}]);