"use strict";(self.webpackChunkdapengdouyu=self.webpackChunkdapengdouyu||[]).push([[2517],{3905:function(n,e,t){t.d(e,{Zo:function(){return c},kt:function(){return m}});var r=t(67294);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function l(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function o(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?l(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function s(n,e){if(null==n)return{};var t,r,a=function(n,e){if(null==n)return{};var t,r,a={},l=Object.keys(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var i=r.createContext({}),p=function(n){var e=r.useContext(i),t=e;return n&&(t="function"==typeof n?n(e):o(o({},e),n)),t},c=function(n){var e=p(n.components);return r.createElement(i.Provider,{value:e},n.children)},u={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},d=r.forwardRef((function(n,e){var t=n.components,a=n.mdxType,l=n.originalType,i=n.parentName,c=s(n,["components","mdxType","originalType","parentName"]),d=p(t),m=a,f=d["".concat(i,".").concat(m)]||d[m]||u[m]||l;return t?r.createElement(f,o(o({ref:e},c),{},{components:t})):r.createElement(f,o({ref:e},c))}));function m(n,e){var t=arguments,a=e&&e.mdxType;if("string"==typeof n||a){var l=t.length,o=new Array(l);o[0]=d;var s={};for(var i in e)hasOwnProperty.call(e,i)&&(s[i]=e[i]);s.originalType=n,s.mdxType="string"==typeof n?n:a,o[1]=s;for(var p=2;p<l;p++)o[p]=t[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},45627:function(n,e,t){t.r(e),t.d(e,{frontMatter:function(){return s},contentTitle:function(){return i},metadata:function(){return p},toc:function(){return c},default:function(){return d}});var r=t(83117),a=t(80102),l=(t(67294),t(3905)),o=["components"],s={},i=void 0,p={unversionedId:"books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/29\u3001\u64ad\u653e\u56687  \u64ad\u653e\u5217\u8868\u7ec4\u4ef6\uff0c\u8ddfApp\u5ab2\u7f8e\u7684\u4e1d\u6ed1\u4f53\u9a8c",id:"books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/29\u3001\u64ad\u653e\u56687  \u64ad\u653e\u5217\u8868\u7ec4\u4ef6\uff0c\u8ddfApp\u5ab2\u7f8e\u7684\u4e1d\u6ed1\u4f53\u9a8c",title:"29\u3001\u64ad\u653e\u56687  \u64ad\u653e\u5217\u8868\u7ec4\u4ef6\uff0c\u8ddfApp\u5ab2\u7f8e\u7684\u4e1d\u6ed1\u4f53\u9a8c",description:"\u672c\u8282\u4ee3\u7801\u5bf9\u5e94 GitHub \u5206\u652f: chapter9",source:"@site/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/29\u3001\u64ad\u653e\u56687  \u64ad\u653e\u5217\u8868\u7ec4\u4ef6\uff0c\u8ddfApp\u5ab2\u7f8e\u7684\u4e1d\u6ed1\u4f53\u9a8c.md",sourceDirName:"books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218",slug:"/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/29\u3001\u64ad\u653e\u56687  \u64ad\u653e\u5217\u8868\u7ec4\u4ef6\uff0c\u8ddfApp\u5ab2\u7f8e\u7684\u4e1d\u6ed1\u4f53\u9a8c",permalink:"/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/29\u3001\u64ad\u653e\u56687  \u64ad\u653e\u5217\u8868\u7ec4\u4ef6\uff0c\u8ddfApp\u5ab2\u7f8e\u7684\u4e1d\u6ed1\u4f53\u9a8c",editUrl:"https://github.com/dapengdouyu/docs/tree/master/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/29\u3001\u64ad\u653e\u56687  \u64ad\u653e\u5217\u8868\u7ec4\u4ef6\uff0c\u8ddfApp\u5ab2\u7f8e\u7684\u4e1d\u6ed1\u4f53\u9a8c.md",tags:[],version:"current",frontMatter:{},sidebar:"books",previous:{title:"28\u3001\u64ad\u653e\u56686  \u89e3\u51b3\u6f5c\u5728bug, \u7ec6\u8282\u51b3\u5b9a\u7cbe\u81f4\u7a0b\u5ea6",permalink:"/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/28\u3001\u64ad\u653e\u56686  \u89e3\u51b3\u6f5c\u5728bug, \u7ec6\u8282\u51b3\u5b9a\u7cbe\u81f4\u7a0b\u5ea6"},next:{title:"30\u3001\u64ad\u653e\u56688  \u6765\uff0c\u624b\u628a\u624b\u5199\u4e00\u4e2a\u6b4c\u8bcd\u89e3\u6790\u7b2c\u4e09\u65b9\u63d2\u4ef6",permalink:"/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/30\u3001\u64ad\u653e\u56688  \u6765\uff0c\u624b\u628a\u624b\u5199\u4e00\u4e2a\u6b4c\u8bcd\u89e3\u6790\u7b2c\u4e09\u65b9\u63d2\u4ef6"}},c=[{value:"\u9aa8\u67b6\u642d\u5efa",id:"\u9aa8\u67b6\u642d\u5efa",children:[],level:2},{value:"\u5b8c\u6210\u5217\u8868\u5c55\u793a\u529f\u80fd",id:"\u5b8c\u6210\u5217\u8868\u5c55\u793a\u529f\u80fd",children:[],level:2},{value:"\u70b9\u51fb\u5207\u6b4c\u5b9e\u73b0",id:"\u70b9\u51fb\u5207\u6b4c\u5b9e\u73b0",children:[],level:2},{value:"\u5220\u9664\u4e00\u9996\u6b4c\u66f2",id:"\u5220\u9664\u4e00\u9996\u6b4c\u66f2",children:[],level:2},{value:"\u6e05\u7a7a\u6b4c\u66f2\u529f\u80fd",id:"\u6e05\u7a7a\u6b4c\u66f2\u529f\u80fd",children:[],level:2},{value:"\u4fee\u6539\u64ad\u653e\u6a21\u5f0f",id:"\u4fee\u6539\u64ad\u653e\u6a21\u5f0f",children:[],level:2},{value:"\u4e0b\u6ed1\u5173\u95ed\u53ca\u53cd\u5f39\u6548\u679c",id:"\u4e0b\u6ed1\u5173\u95ed\u53ca\u53cd\u5f39\u6548\u679c",children:[],level:2}],u={toc:c};function d(n){var e=n.components,t=(0,a.Z)(n,o);return(0,l.kt)("wrapper",(0,r.Z)({},u,t,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u672c\u8282\u4ee3\u7801\u5bf9\u5e94 GitHub \u5206\u652f: chapter9")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/sanyuan0704/react-cloud-music/tree/chapter9"},"\u4ed3\u5e93\u4f20\u9001\u95e8")),(0,l.kt)("h2",{id:"\u9aa8\u67b6\u642d\u5efa"},"\u9aa8\u67b6\u642d\u5efa"),(0,l.kt)("p",null,"\u9996\u5148\u5b8c\u6210\u64ad\u653e\u5217\u8868\u7684\u8f6e\u5ed3\uff0c\u4ee5\u53ca\u5c06\u5b83\u548c\u64ad\u653e\u5668\u8fdb\u884c\u5bf9\u63a5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"import React from 'react';\nimport {connect} from \"react-redux\";\nimport { PlayListWrapper, ScrollWrapper } from './style';\nfunction PlayList (props) {\n  return (\n    <PlayListWrapper>\n      <div className=\"list_wrapper\">\n        <ScrollWrapper></ScrollWrapper>\n      </div>\n    </PlayListWrapper>\n  )\n}\nexport default PlayList;\n\n")),(0,l.kt)("p",null,"\u76f8\u5e94\u7684 style.js \u4e2d:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'import styled from\'styled-components\';\nimport style from \'../../../assets/global-style\';\n\nexport const PlayListWrapper = styled.div `\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 1000;\n  background-color: ${style ["background-color-shadow"]};\n  .list_wrapper {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    opacity: 1;\n    border-radius: 10px 10px 0 0;\n    background-color: ${style ["highlight-background-color"]};\n    transform: translate3d (0, 0, 0);\n    .list_close {\n      text-align: center;\n      line-height: 50px;\n      background: ${style ["background-color"]};\n      font-size: ${style ["font-size-l"]};\n      color: ${style ["font-color-desc"]};\n    }\n  }\n`;\nexport const ScrollWrapper = styled.div`\n  height: 400px;\n  overflow: hidden;\n`;\n\n')),(0,l.kt)("p",null,"\u73b0\u5728\u4f60\u53ef\u4ee5\u770b\u5230\u5f39\u51fa\u7684\u4e00\u4e2a\u767d\u8272\u6d6e\u5c42\u4e86\uff0c\u8fd9\u5c31\u662f\u64ad\u653e\u5217\u8868\u7ec4\u4ef6\u3002\u73b0\u5728\u6211\u4eec\u5c06\u5b83\u548c\u64ad\u653e\u5668\u505a\u4e00\u4e0b\u5bf9\u63a5\u3002"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u9700\u8981\u5728 Player/index.js \u4e2d\uff0c\u5f80 miniPlayer \u548c normalPlayer \u5b50\u7ec4\u4ef6\u4e2d\u5206\u522b\u4f20\u5165\u8fd9\u4e2a\u5c5e\u6027\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"// \u5f53\u7136\u5148\u8981\u4ece props \u53d6\u51fa togglePlayListDispatch\uff0c\u8fd9\u90e8\u5206\u5927\u5bb6\u81ea\u5df1\u52a0\u4e0a\u5373\u53ef\ntogglePlayList={togglePlayListDispatch}\n\n")),(0,l.kt)("p",null,"\u7136\u540e\u5728 miniPlayer/index.js \u4e2d\uff0c\u589e\u52a0\u4ee5\u4e0b\u903b\u8f91:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'// \u53d6\u51fa\nconst { togglePlayList } = props;\nconst handleTogglePlayList = (e) => {\n  togglePlayList (true);\n  e.stopPropagation ();\n};\n\n// \u7ed9\u5217\u8868\u56fe\u6807\u7ed1\u5b9a\u4e8b\u4ef6\n<div className="control" onClick={handleTogglePlayList}>\n\n')),(0,l.kt)("p",null,"\u540c\u65f6\uff0c\u5728 normalPlayer/index.js \u4e2d\uff0c\u589e\u52a0:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'const { togglePlayList } = props;\n//...\n<div\n  className="icon i-right"\n  onClick={() => togglePlayList (true)}\n>\n\n')),(0,l.kt)("p",null,"\u73b0\u5728\u6211\u4eec\u8ba9 PlayList \u7ec4\u4ef6\u5bf9\u63a5\u4e0a redux \u4e2d\u7684\u6570\u636e\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"import { connect } from \"react-redux\";\n\n// \u7ec4\u4ef6\u4ee3\u7801\u7701\u7565\n\n// \u6620\u5c04 Redux \u5168\u5c40\u7684 state \u5230\u7ec4\u4ef6\u7684 props \u4e0a\nconst mapStateToProps = (state) => ({\n  showPlayList: state.getIn (['player', 'showPlayList']),\n});\n// \u6620\u5c04 dispatch \u5230 props \u4e0a\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    togglePlayListDispatch (data) {\n      dispatch (changeShowPlayList (data));\n    }\n  }\n};\n\n// \u5c06 ui \u7ec4\u4ef6\u5305\u88c5\u6210\u5bb9\u5668\u7ec4\u4ef6\nexport default connect (mapStateToProps, mapDispatchToProps)(React.memo (PlayList));\n\n")),(0,l.kt)("p",null,"\u8fde\u63a5\u540e\u6211\u4eec\u4e13\u5fc3\u6765\u5199\u7ec4\u4ef6\u5185\u90e8\u7684\u903b\u8f91\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'// \u5373\u5c06\u5f15\u5165\u7684\u6a21\u5757\nimport { connect } from "react-redux";\nimport { PlayListWrapper, ScrollWrapper, ListHeader, ListContent } from \'./style\';\nimport { CSSTransition } from \'react-transition-group\';\nimport React, { useRef, useState, useCallback } from \'react\';\nimport { prefixStyle, getName } from \'./../../../api/utils\';\nimport { changeShowPlayList, changeCurrentIndex, changePlayMode, changePlayList } from "../store/actionCreators";\nimport { playMode } from "../../../api/config";\nimport Scroll from \'../../../baseUI/scroll\';\n\n\n// \u7ec4\u4ef6\u5185\u4ee3\u7801\nfunction PlayList (props) {\n  const { showPlayList } = props;\n  const { togglePlayListDispatch } = props;\n  const playListRef = useRef ();\n  const listWrapperRef = useRef ();\n  const isShow = useState (false);\n\n  return (\n    <CSSTransition \n      in={showPlayList} \n      timeout={300} \n      classNames="list-fade"\n      onEnter={onEnterCB}\n      onEntering={onEnteringCB}\n      onExiting={onExitingCB}\n      onExited={onExitedCB}\n    >\n      <PlayListWrapper \n        ref={playListRef} \n        style={isShow === true ? { display: "block" } : { display: "none" }} \n        onClick={() => togglePlayListDispatch (false)}\n      >\n        <div className="list_wrapper" ref={listWrapperRef} >\n          <ScrollWrapper></ScrollWrapper>\n        </div>\n      </PlayListWrapper>\n    </CSSTransition>\n  )\n}\n\n\n')),(0,l.kt)("p",null,"\u63a5\u4e0b\u6765\u7f16\u5199\u52a8\u753b\u94a9\u5b50\u91cc\u9762\u7684\u56de\u8c03\u51fd\u6570:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'import { prefixStyle } from \'./../../../api/utils\';\n\nconst transform = prefixStyle ("transform");\n\nconst onEnterCB = useCallback (() => {\n  // \u8ba9\u5217\u8868\u663e\u793a\n  setIsShow (true);\n  // \u6700\u5f00\u59cb\u662f\u9690\u85cf\u5728\u4e0b\u9762\n  listWrapperRef.current.style [transform] = `translate3d (0, 100%, 0)`;\n}, [transform]);\n\nconst onEnteringCB = useCallback (() => {\n  // \u8ba9\u5217\u8868\u5c55\u73b0\n  listWrapperRef.current.style ["transition"] = "all 0.3s";\n  listWrapperRef.current.style [transform] = `translate3d (0, 0, 0)`;\n}, [transform]);\n\nconst onExitingCB = useCallback (() => {\n  listWrapperRef.current.style ["transition"] = "all 0.3s";\n  listWrapperRef.current.style [transform] = `translate3d (0px, 100%, 0px)`;\n}, [transform]);\n\nconst onExitedCB = useCallback (() => {\n  setIsShow (false);\n  listWrapperRef.current.style [transform] = `translate3d (0px, 100%, 0px)`;\n}, [transform]);\n\n')),(0,l.kt)("p",null,"\u5728 style.js \u4e2d\u589e\u52a0\u52a8\u753b\u90e8\u5206:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"export const PlayListWrapper = styled.div `\n  /* \u4e0b\u9762\u662f\u52a8\u753b\u90e8\u5206\u7684\u4ee3\u7801 */\n  &.list-fade-enter {\n    opacity: 0;\n  }\n  &.list-fade-enter-active {\n    opacity: 1;\n    transition: all 0.3s;\n  }\n  &.list-fade-exit {\n    opacity: 1;\n  }\n  &.list-fade-exit-active {\n    opacity: 0;\n    transition: all 0.3s;\n  }\n`\n\n")),(0,l.kt)("p",null,"\u73b0\u5728\u5927\u5bb6\u70b9\u51fb\u5217\u8868\u56fe\u6807\u4fbf\u80fd\u5f39\u51fa\u6d6e\u5c42\u4e86\u3002"),(0,l.kt)("h2",{id:"\u5b8c\u6210\u5217\u8868\u5c55\u793a\u529f\u80fd"},"\u5b8c\u6210\u5217\u8868\u5c55\u793a\u529f\u80fd"),(0,l.kt)("p",null,"\u73b0\u5728\u6211\u4eec\u6765\u5f80\u6d6e\u5c42\u4e2d\u589e\u6dfb\u5217\u8868\u7684\u5185\u5bb9\u548c\u529f\u80fd\u3002"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u5f97\u4ece redux \u4e2d\u62ff\u5230\u76f8\u5e94\u7684\u6570\u636e\u3002\u83b7\u53d6\u6570\u636e\u5982\u4e0b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"// \u6620\u5c04 Redux \u5168\u5c40\u7684 state \u5230\u7ec4\u4ef6\u7684 props \u4e0a\nconst mapStateToProps = (state) => ({\n  currentIndex: state.getIn (['player', 'currentIndex']),\n  currentSong: state.getIn (['player', 'currentSong']),\n  playList: state.getIn (['player', 'playList']),// \u64ad\u653e\u5217\u8868\n  sequencePlayList: state.getIn (['player', 'sequencePlayList']),// \u987a\u5e8f\u6392\u5217\u65f6\u7684\u64ad\u653e\u5217\u8868\n  showPlayList: state.getIn (['player', 'showPlayList']),\n  mode: state.getIn (['player', 'mode'])\n});\n// \u6620\u5c04 dispatch \u5230 props \u4e0a\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    togglePlayListDispatch (data) {\n      dispatch (changeShowPlayList (data));\n    },\n    // \u4fee\u6539\u5f53\u524d\u6b4c\u66f2\u5728\u5217\u8868\u4e2d\u7684 index\uff0c\u4e5f\u5c31\u662f\u5207\u6b4c\n    changeCurrentIndexDispatch (data) {\n      dispatch (changeCurrentIndex (data));\n    },\n    // \u4fee\u6539\u5f53\u524d\u7684\u64ad\u653e\u6a21\u5f0f\n    changeModeDispatch (data) {\n      dispatch (changePlayMode (data));\n    },\n    // \u4fee\u6539\u5f53\u524d\u7684\u6b4c\u66f2\u5217\u8868\n    changePlayListDispatch (data) {\n      dispatch (changePlayList (data));\n    },\n  }\n};\n\n")),(0,l.kt)("p",null,"\u4ece props \u4e2d\u5bfc\u5165:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"const {\n  currentIndex,\n  currentSong:immutableCurrentSong,\n  showPlayList,\n  playList:immutablePlayList,\n  mode,\n  sequencePlayList:immutableSequencePlayList\n} = props;\nconst {\n  togglePlayListDispatch,\n  changeCurrentIndexDispatch,\n  changePlayListDispatch,\n  changeModeDispatch,\n} = props;\n\nconst currentSong = immutableCurrentSong.toJS ();\nconst playList = immutablePlayList.toJS ();\nconst sequencePlayList = immutableSequencePlayList.toJS ();\n\n")),(0,l.kt)("p",null,"\u7136\u540e\u8ba9\u5217\u8868\u7ec4\u4ef6\u5bf9\u63a5\u8fd9\u4e9b\u6570\u636e\uff0c\u6e32\u67d3\u51fa\u6574\u4e2a\u5217\u8868\u3002JSX \u7ed3\u6784\u5982\u4e0b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'//div.list_wrapper \u6807\u7b7e\u4e2d\u5305\u88f9\u4e0b\u9762\u7684\u7ed3\u6784\n<ListHeader>\n  <h1 className="title">\n    { getPlayMode () }\n    <span className="iconfont clear" onClick={handleShowClear}>&#xe63d;</span>\n  </h1>\n</ListHeader>\n<ScrollWrapper>\n  <Scroll >\n    <ListContent>\n      {\n        playList.map ((item, index) => {\n          return (\n            <li className="item" key={item.id}>\n              {getCurrentIcon (item)}\n              <span className="text">{item.name} - {getName (item.ar)}</span>\n              <span className="like">\n                <i className="iconfont">&#xe601;</i>\n              </span>\n              <span className="delete">\n                <i className="iconfont">&#xe63d;</i>\n              </span>\n            </li>\n          )\n        })\n      }\n    </ListContent>\n  </Scroll>\n</ScrollWrapper>\n\n')),(0,l.kt)("p",null,"\u5176\u4e2d\u6709\u4e00\u4e9b UI \u76f8\u5173\u7684\u903b\u8f91\u5c01\u88c5\uff0c\u5305\u62ec getPlayMode\u3001getPlayMode \u548c changeMode\uff0c\u6bd4\u8f83\u76f4\u89c2\uff0c\u6ca1\u6709\u53c2\u6742\u592a\u591a\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u76f4\u63a5\u8d34\u51fa\u4ee3\u7801:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'const getCurrentIcon = (item) => {\n  // \u662f\u4e0d\u662f\u5f53\u524d\u6b63\u5728\u64ad\u653e\u7684\u6b4c\u66f2\n  const current = currentSong.id === item.id;\n  const className = current ? \'icon-play\' : \'\';\n  const content = current ? \'&#xe6e3;\': \'\';\n  return (\n    <i className={`current iconfont ${className}`} dangerouslySetInnerHTML={{__html:content}}></i>\n  )\n};\nconst getPlayMode = () => {\n  let content, text;\n  if (mode === playMode.sequence) {\n    content = "&#xe625;";\n    text = "\u987a\u5e8f\u64ad\u653e";\n  } else if (mode === playMode.loop) {\n    content = "&#xe653;";\n    text = "\u5355\u66f2\u5faa\u73af";\n  } else {\n    content = "&#xe61b;";\n    text = "\u968f\u673a\u64ad\u653e";\n  }\n  return (\n    <div>\n      <i className="iconfont" onClick={(e) => changeMode (e)}  dangerouslySetInnerHTML={{__html: content}}></i>\n      <span className="text" onClick={(e) => changeMode (e)}>{text}</span>\n    </div>\n  )\n};\nconst changeMode = (e) => {\n  let newMode = (mode + 1) % 3;\n  // \u5177\u4f53\u903b\u8f91\u6bd4\u8f83\u590d\u6742 \u540e\u9762\u6765\u5b9e\u73b0\n};\n\n')),(0,l.kt)("p",null,"\u5f53\u7136\uff0c\u8fd8\u6709\u5bf9\u5e94\u7684 style.js \u4e2d\u7684\u6837\u5f0f\u7ec4\u4ef6\uff0c\u9996\u5148\u662f ListHead , \u4f5c\u4e3a\u5217\u8868\u5934\u90e8\u5305\u88f9\u64ad\u653e\u6a21\u5f0f\u548c\u6e05\u7a7a\u6309\u94ae\u7684\u5bb9\u5668\u7ec4\u4ef6:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'export const ListHeader = styled.div `\n  position: relative;\n  padding: 20px 30px 10px 20px;\n  .title {\n    display: flex;\n    align-items: center;\n    >div {\n      flex:1;\n      .text {\n        flex: 1;\n        font-size: ${style ["font-size-m"]};\n        color: ${style ["font-color-desc"]};\n      }\n    }\n    .iconfont {\n      margin-right: 10px;\n      font-size: ${style ["font-size-ll"]};\n      color: ${style ["theme-color"]};\n    }\n    .clear {\n      ${style.extendClick ()}\n      font-size: ${style ["font-size-l"]};\n    }\n  }\n`\n\n')),(0,l.kt)("p",null,"ListContent \u7ec4\u4ef6\u7528\u6765\u5305\u88f9\u6574\u4e2a\u6b4c\u66f2\u7684\u5217\u8868\uff0c\u662f\u4e00\u4e2a\u5217\u8868\u5305\u88f9\u7ec4\u4ef6\uff0c \u6837\u5f0f\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'export const ListContent = styled.div `\n  .item {\n    display: flex;\n    align-items: center;\n    height: 40px;\n    padding: 0 30px 0 20px;\n    overflow: hidden;\n    .current {\n      flex: 0 0 20px;\n      width: 20px;\n      font-size: ${style ["font-size-s"]};\n      color: ${style ["theme-color"]};\n    }\n    .text {\n      flex: 1;\n      ${style.noWrap ()}\n      font-size: ${style ["font-size-m"]};\n      color: ${style ["font-color-desc-v2"]};\n      .icon-favorite {\n        color: ${style ["theme-color"]};\n      }\n    }\n    .like {\n      ${style.extendClick ()}\n      margin-right: 15px;\n      font-size: ${style ["font-size-m"]};\n      color: ${style ["theme-color"]};\n    }\n    .delete {\n      ${style.extendClick ()}\n      font-size: ${style ["font-size-s"]};\n      color: ${style ["theme-color"]};\n    }\n  }\n`\n\n')),(0,l.kt)("p",null,"\u73b0\u5728\u5217\u8868\u7684\u5c55\u793a\u5df2\u7ecf\u6210\u529f\u5b8c\u6210\uff01\u63a5\u4e0b\u6765\u5c31\u662f\u5904\u7406\u5bf9\u5e94\u7684\u4e1a\u52a1\u903b\u8f91\u4e86\uff0c\u68b3\u7406\u4e00\u4e0b\uff0c\u5206\u522b\u662f\u70b9\u51fb\u5207\u6b4c\u3001\u5220\u9664\u6b4c\u66f2\u548c\u5207\u6362\u64ad\u653e\u6a21\u5f0f\u8fd9\u4e09\u5927\u529f\u80fd\u3002"),(0,l.kt)("h2",{id:"\u70b9\u51fb\u5207\u6b4c\u5b9e\u73b0"},"\u70b9\u51fb\u5207\u6b4c\u5b9e\u73b0"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u7ed1\u5b9a\u5bf9\u5e94\u7684\u4e8b\u4ef6:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'const handleChangeCurrentIndex = (index) => {\n  if (currentIndex === index) return;\n  changeCurrentIndexDispatch (index);\n}\n\n// \u7ed1\u5b9a\u70b9\u51fb\u4e8b\u4ef6\n<li className="item" key={item.id} onClick={() => handleChangeCurrentIndex (index)}>\n\n')),(0,l.kt)("p",null,"\u4f60\u73b0\u5728\u70b9\u51fb\u4e00\u4e0b\u6b4c\u66f2\uff0c\u597d\u50cf\u53ef\u4ee5\u5207\u6b4c\uff0c\u4f46\u662f\u4f60\u53d1\u73b0\u6709\u4e00\u4e2a\u95ee\u9898:"),(0,l.kt)("p",null,"\u5f53\u4f60\u70b9\u51fb\u4e4b\u540e\u5217\u8868\u7a81\u7136\u88ab\u9690\u85cf\u4e86\u3002\u8fd9\u4e2a bug \u662f\u600e\u4e48\u4ea7\u751f\u7684\u5462\uff1f\u5176\u5b9e\u6211\u4eec\u4e4b\u524d\u5728 PlayWrapper \u7ed1\u5b9a\u4e86\u8fd9\u6837\u4e00\u4e2a\u4e8b\u4ef6:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"onClick={() => togglePlayListDispatch (false)}\n\n")),(0,l.kt)("p",null,"\u5176\u5b9e\u8fd9\u662f\u4e3a\u4e86\u5728\u7528\u6237\u70b9\u51fb\u5217\u8868\u5916\u90e8\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u5c06\u5217\u8868\u9690\u85cf\u6389\uff0c\u4e5f\u7b26\u5408\u5e38\u7406\u3002\u4f46\u662f PlayWrapper \u7684\u8303\u56f4\u662f\u6574\u4e2a\u5c4f\u5e55\uff0c\u5305\u542b\u4e86\u5217\u8868\u5185\u5bb9\uff0c\u56e0\u6b64\u51fa\u73b0\u4e86\u8fd9\u4e2a bug\u3002"),(0,l.kt)("p",null,"\u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1f"),(0,l.kt)("p",null,"\u4e14\u770b\u8fd9\u6837\u4e00\u884c\u4ee3\u7801:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'<div className="list_wrapper" ref={listWrapperRef} onClick={e => e.stopPropagation ()}>\n\n')),(0,l.kt)("p",null,"\u5728 list","_","wrapper \u4e2d\u7ed1\u5b9a\u70b9\u51fb\u4e8b\u4ef6\uff0c\u963b\u6b62\u5b83\u5192\u6ce1\u5c31\u884c\u4e86\u3002\u56e0\u4e3a\u8fd9\u4e2a div \u5305\u88f9\u7684\u5c31\u662f\u6574\u4e2a\u6b4c\u66f2\u7684\u5217\u8868\u3002"),(0,l.kt)("p",null,"OK\uff01\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6765\u5b9e\u73b0\u5220\u9664\u6b4c\u66f2\u7684\u529f\u80fd\uff0c\u8fd9\u91cc\u9762\u53c8\u5305\u62ec\u5220\u9664\u4e00\u9996\u6b4c\u66f2\u548c\u6e05\u7a7a\u5168\u90e8\u6b4c\u66f2\u3002"),(0,l.kt)("h2",{id:"\u5220\u9664\u4e00\u9996\u6b4c\u66f2"},"\u5220\u9664\u4e00\u9996\u6b4c\u66f2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'import { deleteSong } from "../store/actionCreators";\n\nconst { deleteSongDispatch } = props;\nconst handleDeleteSong = (e, song) => {\n  e.stopPropagation ();\n  deleteSongDispatch (song);\n};\n\n<span className="delete" onClick={(e) => handleDeleteSong (e, item)}>\n  <i className="iconfont">&#xe63d;</i>\n</span>\n\n')),(0,l.kt)("p",null,"\u91cd\u70b9\u5728\u4e8e deleteSongDispatch \u7684\u903b\u8f91\uff0c\u6211\u4eec\u6765\u4e00\u6b65\u6b65\u62c6\u89e3\u5b83\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"//mapDispatchToProps \u4e2d\ndeleteSongDispatch (data) {\n  dispatch (deleteSong (data));\n}\n\n")),(0,l.kt)("p",null,"\u7136\u540e\u5728 Player/store/constants.js \u4e2d\u589e\u52a0:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"export const DELETE_SONG = 'player/DELETE_SONG';\n\n")),(0,l.kt)("p",null,"\u5728 store/actionCreator.js \u4e2d\u5bfc\u5165 DELETE","_","SONG, \u7136\u540e\u589e\u52a0\u4e00\u4e2a\u65b0\u7684 action:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"export const deleteSong = (data) => ({\n  type: DELETE_SONG,\n  data\n});\n\n")),(0,l.kt)("p",null,"\u73b0\u5728\u8f6c\u5230 store/reducer.js \u4e0b\u7f16\u5199\u5220\u9664\u7684\u903b\u8f91:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"import { findIndex } from '../../../api/utils';// \u6ce8\u610f\u5f15\u5165\u5de5\u5177\u65b9\u6cd5\n//...\nconst handleDeleteSong = (state, song) => {\n  // \u4e5f\u53ef\u7528 loadsh \u5e93\u7684 deepClone \u65b9\u6cd5\u3002\u8fd9\u91cc\u6df1\u62f7\u8d1d\u662f\u57fa\u4e8e\u7eaf\u51fd\u6570\u7684\u8003\u8651\uff0c\u4e0d\u5bf9\u53c2\u6570 state \u505a\u4fee\u6539\n  const playList = JSON.parse (JSON.stringify (state.get ('playList').toJS ()));\n  const sequenceList = JSON.parse (JSON.stringify (state.get ('sequencePlayList').toJS ()));\n  let currentIndex = state.get ('currentIndex');\n  // \u627e\u5bf9\u5e94\u6b4c\u66f2\u5728\u64ad\u653e\u5217\u8868\u4e2d\u7684\u7d22\u5f15\n  const fpIndex = findIndex (song, playList);\u3001\n  // \u5728\u64ad\u653e\u5217\u8868\u4e2d\u5c06\u5176\u5220\u9664\n  playList.splice (fpIndex, 1);\n  // \u5982\u679c\u5220\u9664\u7684\u6b4c\u66f2\u6392\u5728\u5f53\u524d\u64ad\u653e\u6b4c\u66f2\u524d\u9762\uff0c\u90a3\u4e48 currentIndex--\uff0c\u8ba9\u5f53\u524d\u7684\u6b4c\u6b63\u5e38\u64ad\u653e\n  if (fpIndex < currentIndex) currentIndex--;\n  \n  // \u5728 sequenceList \u4e2d\u76f4\u63a5\u5220\u9664\u6b4c\u66f2\u5373\u53ef\n  const fsIndex = findIndex (song, sequenceList);\n  sequenceList.splice (fsIndex, 1);\n\n  return state.merge ({\n    'playList': fromJS (playList),\n    'sequencePlayList': fromJS (sequenceList),\n    'currentIndex': fromJS (currentIndex),\n  });\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    //...\n    case actionTypes.DELETE_SONG:\n      return handleDeleteSong (state, action.data);\n    default:\n      return state;\n  }\n}\n\n")),(0,l.kt)("p",null,"\u73b0\u5728\u70b9\u51fb\u5355\u4e2a\u6b4c\u66f2\u540e\u9762\u7684\u5220\u9664\u6309\u94ae\u4fbf\u80fd\u6210\u529f\u5730\u5c06\u6b4c\u66f2\u4ece\u5217\u8868\u5220\u9664\u5566\uff01"),(0,l.kt)("h2",{id:"\u6e05\u7a7a\u6b4c\u66f2\u529f\u80fd"},"\u6e05\u7a7a\u6b4c\u66f2\u529f\u80fd"),(0,l.kt)("p",null,"\u4e00\u822c\u800c\u8a00\uff0c\u5220\u9664\u5168\u90e8\u662f\u4e00\u4e2a\u5f71\u54cd\u6bd4\u8f83\u5927\u7684\u64cd\u4f5c\uff0c\u5982\u679c\u5f39\u51fa\u4e00\u4e2a\u786e\u5b9a\u6846\uff0c\u8ba9\u7528\u6237\u70b9\u51fb\u786e\u5b9a\u518d\u64cd\u4f5c\uff0c\u65e0\u7591\u662f\u66f4\u52a0\u5408\u7406\u7684\u3002"),(0,l.kt)("p",null,"\u56e0\u6b64\uff0c\u6211\u4eec\u9996\u5148\u6765\u5c01\u88c5\u5f39\u6846\u7ec4\u4ef6\uff0c\u7136\u540e\u8fdb\u884c\u4e8b\u4ef6\u7ed1\u5b9a\u3002"),(0,l.kt)("p",null,"\u5728 baseUI \u76ee\u5f55\u4e0b\u65b0\u5efa confirm \u6587\u4ef6\u5939\uff0c\u7136\u540e\u65b0\u5efa index.js \u6587\u4ef6\u3002"),(0,l.kt)("p",null,"\u5176\u4ee3\u7801\u4ece ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/sanyuan0704/react-cloud-music/blob/master/src/baseUI/confirm/index.js"},"\u4ee3\u7801\u5730\u5740")," \u4e2d\u83b7\u53d6\uff0c\u4e5f\u662f\u4e00\u4e2a\u975e\u5e38\u57fa\u7840\u7684\u7ec4\u4ef6\uff0c\u91cc\u9762\u7684\u5c01\u88c5\u64cd\u4f5c\u548c\u4e4b\u524d\u7684\u7c7b\u4f3c\uff0c\u5c31\u4e0d\u518d\u6d6a\u8d39\u7bc7\u5e45\u4e86\u3002"),(0,l.kt)("p",null,"\u56de\u5230 PlayList \u7ec4\u4ef6\uff0c\u6211\u4eec\u5f15\u5165 Confirm \u7ec4\u4ef6:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'import Confirm from \'./../../../baseUI/confirm/index\';\nconst confirmRef = useRef ();\n//JSX\nreturn (\n  <PlayListWrapper>\n    //...\n    <Confirm \n      ref={confirmRef}\n      text={"\u662f\u5426\u5220\u9664\u5168\u90e8\uff1f"} \n      cancelBtnText={"\u53d6\u6d88"} \n      confirmBtnText={"\u786e\u5b9a"} \n      handleConfirm={handleConfirmClear}\n    />\n  </PlayListWrapper>\n)\n\n')),(0,l.kt)("p",null,"\u73b0\u5728\u6765\u7ed1\u5b9a\u4e00\u4e0b\u6e05\u7a7a\u4e8b\u4ef6:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'const handleShowClear = () => {\n  confirmRef.current.show ();\n} \n\n<span className="iconfont clear" onClick={handleShowClear}>&#xe63d;</span>\n\n')),(0,l.kt)("p",null,"\u73b0\u5728\u7684\u5de5\u4f5c\u662f\u7f16\u5199 Confirm \u7ec4\u4ef6\u7684\u56de\u8c03\u51fd\u6570 handleConfirmClear\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"import { changeSequecePlayList, changeCurrentSong, changePlayingState } from '../store/actionCreators';\n//...\nconst { clearDispatch } = props;\nconst handleConfirmClear = () => {\n  clearDispatch ();\n}\n\n")),(0,l.kt)("p",null,"clearDispatch \u5728 mapDispatchToProps \u4e2d\u5b9a\u4e49:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"const mapDispatchToProps = (dispatch) => {\n  return {\n    //...\n    clearDispatch () {\n      // 1. \u6e05\u7a7a\u4e24\u4e2a\u5217\u8868\n      dispatch (changePlayList ([]));\n      dispatch (changeSequecePlayList ([]));\n      // 2. \u521d\u59cb currentIndex\n      dispatch (changeCurrentIndex (-1));\n      // 3. \u5173\u95ed PlayList \u7684\u663e\u793a\n      dispatch (changeShowPlayList (false));\n      // 4. \u5c06\u5f53\u524d\u6b4c\u66f2\u7f6e\u7a7a\n      dispatch (changeCurrentSong ({}));\n      // 5. \u91cd\u7f6e\u64ad\u653e\u72b6\u6001\n      dispatch (changePlayingState (false));\n    }\n  }\n};\n\n")),(0,l.kt)("h2",{id:"\u4fee\u6539\u64ad\u653e\u6a21\u5f0f"},"\u4fee\u6539\u64ad\u653e\u6a21\u5f0f"),(0,l.kt)("p",null,"\u76f4\u63a5\u590d\u7528\u5f53\u65f6\u5b8c\u6210 normalPlayer \u65f6\u4fee\u6539\u64ad\u653e\u6a21\u5f0f\u7684\u4ee3\u7801\uff0c\u5f53\u65f6\u6211\u4eec\u5b9e\u73b0\u8fc7\uff0c\u4f30\u8ba1\u4f60\u5df2\u7ecf\u4e0d\u964c\u751f\u4e86\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"// \u4ece utils.js \u4e2d\u518d\u5f15\u5165 shuffle \u548c findIndex\nimport { prefixStyle, getName, shuffle, findIndex } from './../../../api/utils';\n\nconst changeMode = () => {\n  let newMode = (mode + 1) % 3;\n  if (newMode === 0) {\n    // \u987a\u5e8f\u6a21\u5f0f\n    changePlayListDispatch (sequencePlayList);\n    let index = findIndex (currentSong, sequencePlayList);\n    changeCurrentIndexDispatch (index);\n  } else if (newMode === 1) {\n    // \u5355\u66f2\u5faa\u73af\n    changePlayListDispatch (sequencePlayList);\n  } else if (newMode === 2) {\n    // \u968f\u673a\u64ad\u653e\n    let newList = shuffle (sequencePlayList);\n    let index = findIndex (currentSong, newList);\n    changePlayListDispatch (newList);\n    changeCurrentIndexDispatch (index);\n  }\n  changeModeDispatch (newMode);\n};\n\n")),(0,l.kt)("h2",{id:"\u4e0b\u6ed1\u5173\u95ed\u53ca\u53cd\u5f39\u6548\u679c"},"\u4e0b\u6ed1\u5173\u95ed\u53ca\u53cd\u5f39\u6548\u679c"),(0,l.kt)("p",null,"\u4f5c\u4e3a\u4e00\u4e2a\u7cbe\u7f8e\u7684 App\uff0c\u5728\u5b8c\u6210\u57fa\u672c\u529f\u80fd\u7684\u540c\u65f6\uff0c\u6211\u4eec\u4e5f\u6709\u5176\u4ed6\u4ea4\u4e92\u7ec6\u8282\u7684\u8003\u91cf\u3002\u6bd4\u5982\u5728\u5b89\u5353\u4e2d\u4e0b\u6ed1\u5c0f\u6bb5\u8ddd\u79bb\u65f6\u4f1a\u6709\u53cd\u5f39\uff0c\u4e0b\u6ed1\u8d85\u8fc7\u4e86\u4e00\u5b9a\u9608\u503c\u5c31\u4f1a\u5173\u95ed\u6d6e\u5c42\u3002\u73b0\u5728\u5c31\u5e26\u5927\u5bb6\u6765\u5b8c\u6210\u8fd9\u4e2a\u79fb\u52a8\u7aef\u5e38\u7528\u7684\u529f\u80fd\u3002"),(0,l.kt)("p",null,"\u5b9e\u73b0\u8fd9\u4e2a\u4ea4\u4e92\u7684\u5173\u952e\u5728\u4e8e\u5229\u7528\u597d touchStart\uff0c touchMove, touchEnd \u8fd9\u4e09\u4e2a\u4e8b\u4ef6\u7684\u56de\u8c03\u3002"),(0,l.kt)("p",null,"\u9996\u5148\u6765\u7ed1\u5b9a\u4e8b\u4ef6:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'const handleTouchStart = (e) => {};\nconst handleTouchMove = (e) => {};\nconst handleTouchEnd = (e) => {};\n//...\n<div \n  className="list_wrapper" \n  ref={listWrapperRef} \n  onClick={e => e.stopPropagation ()}\n  onTouchStart={handleTouchStart}\n  onTouchMove={handleTouchMove}\n  onTouchEnd={handleTouchEnd}\n>\n\n')),(0,l.kt)("p",null,"\u5176\u6b21\uff0c\u5bf9\u4e8e Scroll \u7ec4\u4ef6:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"// \u662f\u5426\u5141\u8bb8\u6ed1\u52a8\u4e8b\u4ef6\u751f\u6548\nconst [canTouch,setCanTouch] = useState (true);\n\nconst listContentRef = useRef ();\nconst handleScroll = (pos) => {\n  // \u53ea\u6709\u5f53\u5185\u5bb9\u504f\u79fb\u91cf\u4e3a 0 \u7684\u65f6\u5019\u624d\u80fd\u4e0b\u6ed1\u5173\u95ed PlayList\u3002\u5426\u5219\u4e00\u8fb9\u5185\u5bb9\u5728\u79fb\u52a8\uff0c\u4e00\u8fb9\u5217\u8868\u5728\u79fb\u52a8\uff0c\u51fa\u73b0 bug\n  let state = pos.y === 0;\n  setCanTouch (state);\n}\n\n<Scroll \n  ref={listContentRef} \n  onScroll={pos => handleScroll (pos)}\n  bounceTop={false}\n>\n\n")),(0,l.kt)("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u5177\u4f53\u5730\u7f16\u5199\u90a3\u4e09\u4e2a touch \u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\u3002"),(0,l.kt)("p",null,"\u9996\u5148\u521d\u59cb\u5316\u4e09\u4e2a\u53d8\u91cf:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"//touchStart \u540e\u8bb0\u5f55 y \u503c\nconst [startY, setStartY] = useState (0);\n//touchStart \u4e8b\u4ef6\u662f\u5426\u5df2\u7ecf\u88ab\u89e6\u53d1\nconst [initialed, setInitialed] = useState (0);\n// \u7528\u6237\u4e0b\u6ed1\u7684\u8ddd\u79bb\nconst [distance, setDistance] = useState (0);\n\n")),(0,l.kt)("p",null,"\u5bf9\u4e8e touchStart \u4e8b\u4ef6\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'const handleTouchStart = (e) => {\n  if (!canTouch || initialed) return;\n  listWrapperRef.current.style ["transition"] = "";\n  setStartY (e.nativeEvent.touches [0].pageY);// \u8bb0\u5f55 y \u503c\n  setInitialed (true);\n};\n\n')),(0,l.kt)("p",null,"\u5bf9\u4e8e touchMove \u4e8b\u4ef6:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"const handleTouchMove = (e) => {\n  if (!canTouch || !initialed) return;\n  let distance = e.nativeEvent.touches [0].pageY - startY;\n  if (distance < 0) return;\n  setDistance (distance);// \u8bb0\u5f55\u4e0b\u6ed1\u8ddd\u79bb\n  listWrapperRef.current.style.transform = `translate3d (0, ${distance} px, 0)`;\n};\n\n")),(0,l.kt)("p",null,"\u5bf9\u4e8e touchEnd:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'const handleTouchEnd = (e) => {\n  setInitialed (false);\n  // \u8fd9\u91cc\u8bbe\u7f6e\u9608\u503c\u4e3a 150px\n  if (distance >= 150) {\n    // \u5927\u4e8e 150px \u5219\u5173\u95ed PlayList\n    togglePlayListDispatch (false);\n  } else {\n    // \u5426\u5219\u53cd\u5f39\u56de\u53bb\n    listWrapperRef.current.style ["transition"] = "all 0.3s";\n    listWrapperRef.current.style [transform] = `translate3d (0px, 0px, 0px)`;\n  }\n};\n\n')),(0,l.kt)("p",null,"\u606d\u559c\u4f60\uff0c\u73b0\u5728\u7ec8\u4e8e\u5f00\u53d1\u5b8c\u6210\u4e86\u8fd9\u4e2a\u770b\u4f3c\u7b80\u5355\u5374\u5b9e\u9645\u4e0a\u5e76\u4e0d\u7b80\u5355\u7684 PlayList \u7ec4\u4ef6\u3002\u5982\u4eca\u64ad\u653e\u5668\u7684\u529f\u80fd\u5df2\u7ecf\u6bd4\u8f83\u5b8c\u6574\u4e86\uff0c\u4f46\u662f\u4ecd\u7136\u6709\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u529f\u80fd\u9700\u8981\u5b8c\u6210 \u2014\u2014 \u6b4c\u8bcd\u529f\u80fd\uff0c\u4e0b\u4e00\u8282\u5c31\u8ba9\u6211\u4eec\u5f00\u59cb\u6b4c\u8bcd\u5f00\u53d1\u7684\u7b2c\u4e00\u6b65 \u2014\u2014 \u6b4c\u8bcd\u89e3\u6790\u63d2\u4ef6\u7684\u5c01\u88c5\u3002"))}d.isMDXComponent=!0}}]);