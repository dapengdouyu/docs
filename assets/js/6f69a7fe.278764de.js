"use strict";(self.webpackChunkdapengdouyu=self.webpackChunkdapengdouyu||[]).push([[5116],{3905:function(n,e,t){t.d(e,{Zo:function(){return c},kt:function(){return m}});var o=t(67294);function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function a(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?i(Object(t),!0).forEach((function(e){r(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,o,r=function(n,e){if(null==n)return{};var t,o,r={},i=Object.keys(n);for(o=0;o<i.length;o++)t=i[o],e.indexOf(t)>=0||(r[t]=n[t]);return r}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(o=0;o<i.length;o++)t=i[o],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var s=o.createContext({}),p=function(n){var e=o.useContext(s),t=e;return n&&(t="function"==typeof n?n(e):a(a({},e),n)),t},c=function(n){var e=p(n.components);return o.createElement(s.Provider,{value:e},n.children)},u={inlineCode:"code",wrapper:function(n){var e=n.children;return o.createElement(o.Fragment,{},e)}},d=o.forwardRef((function(n,e){var t=n.components,r=n.mdxType,i=n.originalType,s=n.parentName,c=l(n,["components","mdxType","originalType","parentName"]),d=p(t),m=r,g=d["".concat(s,".").concat(m)]||d[m]||u[m]||i;return t?o.createElement(g,a(a({ref:e},c),{},{components:t})):o.createElement(g,a({ref:e},c))}));function m(n,e){var t=arguments,r=e&&e.mdxType;if("string"==typeof n||r){var i=t.length,a=new Array(i);a[0]=d;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=n,l.mdxType="string"==typeof n?n:r,a[1]=l;for(var p=2;p<i;p++)a[p]=t[p];return o.createElement.apply(null,a)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},3627:function(n,e,t){t.r(e),t.d(e,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return d}});var o=t(83117),r=t(80102),i=(t(67294),t(3905)),a=["components"],l={},s=void 0,p={unversionedId:"books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/20\u3001\u6b4c\u624b\u4e3b\u98751  \u6838\u5fc3\u5e03\u5c40\uff0c\u7ec4\u4ef6\u57fa\u77f3",id:"books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/20\u3001\u6b4c\u624b\u4e3b\u98751  \u6838\u5fc3\u5e03\u5c40\uff0c\u7ec4\u4ef6\u57fa\u77f3",title:"20\u3001\u6b4c\u624b\u4e3b\u98751  \u6838\u5fc3\u5e03\u5c40\uff0c\u7ec4\u4ef6\u57fa\u77f3",description:"\u672c\u8282\u4ee3\u7801\u5bf9\u5e94 GitHub \u5206\u652f: chapter7",source:"@site/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/20\u3001\u6b4c\u624b\u4e3b\u98751  \u6838\u5fc3\u5e03\u5c40\uff0c\u7ec4\u4ef6\u57fa\u77f3.md",sourceDirName:"books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218",slug:"/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/20\u3001\u6b4c\u624b\u4e3b\u98751  \u6838\u5fc3\u5e03\u5c40\uff0c\u7ec4\u4ef6\u57fa\u77f3",permalink:"/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/20\u3001\u6b4c\u624b\u4e3b\u98751  \u6838\u5fc3\u5e03\u5c40\uff0c\u7ec4\u4ef6\u57fa\u77f3",editUrl:"https://github.com/dapengdouyu/docs/tree/master/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/20\u3001\u6b4c\u624b\u4e3b\u98751  \u6838\u5fc3\u5e03\u5c40\uff0c\u7ec4\u4ef6\u57fa\u77f3.md",tags:[],version:"current",frontMatter:{},sidebar:"books",previous:{title:"19\u3001\u699c\u5355\u8be6\u60c5\u7ec4\u4ef6\u4e00\u7ad9\u5f0f\u5f00\u53d1\u3010\u7ec4\u4ef6\u590d\u7528\uff0c\u89e3\u653e\u81ea\u6211\u3011",permalink:"/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/19\u3001\u699c\u5355\u8be6\u60c5\u7ec4\u4ef6\u4e00\u7ad9\u5f0f\u5f00\u53d1\u3010\u7ec4\u4ef6\u590d\u7528\uff0c\u89e3\u653e\u81ea\u6211\u3011"},next:{title:"21\u3001\u6b4c\u624b\u4e3b\u98752  \u4ea4\u4e92\u903b\u8f91\uff0c\u7cbe\u76ca\u6c42\u7cbe",permalink:"/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/21\u3001\u6b4c\u624b\u4e3b\u98752  \u4ea4\u4e92\u903b\u8f91\uff0c\u7cbe\u76ca\u6c42\u7cbe"}},c=[{value:"\u6539\u9020\u8def\u7531",id:"\u6539\u9020\u8def\u7531",children:[],level:2},{value:"\u8def\u7531\u8df3\u8f6c\u52a8\u753b",id:"\u8def\u7531\u8df3\u8f6c\u52a8\u753b",children:[],level:2},{value:"\u6838\u5fc3\u5e03\u5c40\u5f00\u53d1",id:"\u6838\u5fc3\u5e03\u5c40\u5f00\u53d1",children:[],level:2},{value:"\u6b4c\u66f2\u5217\u8868\u7ec4\u4ef6\u91cd\u6784",id:"\u6b4c\u66f2\u5217\u8868\u7ec4\u4ef6\u91cd\u6784",children:[],level:2},{value:"\u5173\u4e8e UI \u7684\u4ee3\u7801\u6574\u7406",id:"\u5173\u4e8e-ui-\u7684\u4ee3\u7801\u6574\u7406",children:[],level:2}],u={toc:c};function d(n){var e=n.components,t=(0,r.Z)(n,a);return(0,i.kt)("wrapper",(0,o.Z)({},u,t,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u672c\u8282\u4ee3\u7801\u5bf9\u5e94 GitHub \u5206\u652f: chapter7")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/sanyuan0704/react-cloud-music/tree/chapter6"},"\u4ed3\u5e93\u4f20\u9001\u95e8")),(0,i.kt)("h2",{id:"\u6539\u9020\u8def\u7531"},"\u6539\u9020\u8def\u7531"),(0,i.kt)("p",null,"\u7b2c\u4e00\u6b65\u5f53\u7136\u662f\u8def\u7531\u7684\u51c6\u5907\u5de5\u4f5c\u3002"),(0,i.kt)("p",null,"\u5728 routes/index.js \u4e2d\uff0c\u6dfb\u52a0\u5982\u4e0b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'import Singer from \'../application/Singer\';\n\n//...\n{\n  path: "/singers",\n  component: Singers,\n  key: "singers",\n  routes: [\n    {\n      path: "/singers/:id",\n      component: Singer\n    }\n  ]\n}\n\n')),(0,i.kt)("p",null,"\u5f53\u7136\uff0c\u6211\u4eec\u9700\u8981\u65b0\u5efa Singer \u6587\u4ef6\u5939\uff0c\u5176\u4e2d\u7684 index.js \u5982\u4e0b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"import React from 'react';\n\nfunction Singer (props) {\n  return (\n    <div>Singer</div>\n  )\n}\n\nexport default Singer;\n\n")),(0,i.kt)("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u9700\u8981\u5728\u4ee5\u524d\u7684\u6b4c\u624b\u5217\u8868\u7ec4\u4ef6\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u8df3\u8f6c\u903b\u8f91\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'const enterDetail = (id)  => {\n  props.history.push (`/singers/${id}`);\n};\n\n//...\n<ListItem key={item.accountId+""+index} onClick={() => enterDetail (item.id)}>\n\n')),(0,i.kt)("p",null,"\u5f53\u7136\uff0c\u4e0d\u8981\u5fd8\u4e86\u8fd9\u4e00\u53e5\uff0c\u5426\u5219\u4f5c\u4e3a\u5b50\u8def\u7531\u4e0b\u7684 Singer \u7ec4\u4ef6\u65e0\u6cd5\u6e32\u67d3:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"//Singers/index.js\nimport { renderRoutes } from 'react-router-config';\n\n//...\nreturn (\n  <div>\n    //...\n    { renderRoutes (props.route.routes) }\n  </div> \n)\n\n")),(0,i.kt)("h2",{id:"\u8def\u7531\u8df3\u8f6c\u52a8\u753b"},"\u8def\u7531\u8df3\u8f6c\u52a8\u753b"),(0,i.kt)("p",null,"\u7531\u4e8e\u4e4b\u524d\u8be6\u7ec6\u62c6\u89e3\u8fc7\uff0c\u8fd9\u91cc\u5c31\u4e0d\u7740\u91cd\u4ecb\u7ecd\u4e86\u3002"),(0,i.kt)("p",null,"\u4ecd\u7136\u662f\u5229\u7528 react-transition-group\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'import React, { useState } from "react";\nimport { CSSTransition } from "react-transition-group";\nimport { Container } from "./style";\n\nfunction Singer (props) {\n  const [showStatus, setShowStatus] = useState (true);\n\n  return (\n    <CSSTransition\n      in={showStatus}\n      timeout={300}\n      classNames="fly"\n      appear={true}\n      unmountOnExit\n      onExited={() => props.history.goBack ()}\n    >\n      <Container>\n      </Container>\n    </CSSTransition>\n  )\n}\n\nexport default Singer;\n\n')),(0,i.kt)("p",null,"\u6837\u5f0f\u7ec4\u4ef6\u4ee3\u7801 style.js \u73b0\u5728\u6784\u5efa\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"import styled from'styled-components';\nimport style from '../../assets/global-style';\n\nexport const Container = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: ${props => props.play > 0 ? \"60px\": 0};\n  width: 100%;\n  z-index: 100;\n  overflow: hidden;\n  background: #f2f3f4;\n  transform-origin: right bottom;\n  &.fly-enter, &.fly-appear {\n    transform: rotateZ (30deg) translate3d (100%, 0, 0);\n  }\n  &.fly-enter-active, &.fly-appear-active {\n    transition: transform .3s;\n    transform: rotateZ (0deg) translate3d (0, 0, 0);\n  }\n  &.fly-exit {\n    transform: rotateZ (0deg) translate3d (0, 0, 0);\n  }\n  &.fly-exit-active {\n    transition: transform .3s;\n    transform: rotateZ (30deg) translate3d (100%, 0, 0);\n  }\n`\n\n")),(0,i.kt)("h2",{id:"\u6838\u5fc3\u5e03\u5c40\u5f00\u53d1"},"\u6838\u5fc3\u5e03\u5c40\u5f00\u53d1"),(0,i.kt)("p",null,"\u524d\u65b9\u9ad8\u80fd\u9884\u8b66\uff01"),(0,i.kt)("p",null,"\u5927\u5bb6\u73b0\u5728\u770b\u7ebf\u4e0a\u7684\u6700\u7ec8\u6548\u679c\u53ef\u80fd\u4f1a\u611f\u89c9\u6574\u4e2a\u9875\u9762\u7684\u5e03\u5c40\u548c\u4ea4\u4e92\u662f\u975e\u5e38\u6d41\u7545\u7684\uff0c\u4f46\u6b8a\u4e0d\u77e5\uff0c\u8fd9\u80cc\u540e\u51dd\u7ed3\u7740\u8bf8\u591a\u7684\u6280\u5de7\u548c\u7ec6\u8282\u7684\u8003\u91cf\u3002\u4f60\u6240\u770b\u5230\u7684\u6d41\u7545\u7684\uff0c\u5176\u5b9e\u662f\u5f00\u53d1\u8005\u80cc\u540e\u65e0\u6570\u7684\u5fc3\u8840\uff01\u4e4b\u524d\u7684\u5927\u90e8\u5206\u5e03\u5c40\u4e00\u5e26\u800c\u8fc7\uff0c\u4f46\u662f\u8fd9\u90e8\u5206\u7684\u5e03\u5c40\u975e\u5e38\u5173\u952e\uff0c\u683c\u5916\u91cd\u70b9\u62c6\u89e3\u3002\u76f8\u4fe1\u5927\u5bb6\u8ddf\u7740\u505a\u4e0b\u6765\u4e00\u5b9a\u4f1a\u79ef\u7d2f\u4e0d\u5c11\u5e03\u5c40\u7ecf\u9a8c\u548c\u6280\u5de7\u3002"),(0,i.kt)("p",null,"\u9996\u5148 mock \u6570\u636e\u5982\u4e0b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'const artist = {\n  picUrl: "https://p2.music.126.net/W__FCWFiyq0JdPtuLJoZVQ==/109951163765026271.jpg",\n  name: "\u859b\u4e4b\u8c26",\n  hotSongs: [\n    {\n      name: "\u6211\u597d\u50cf\u5728\u54ea\u89c1\u8fc7\u4f60",\n      ar: [{name: "\u859b\u4e4b\u8c26"}],\n      al: {\n        name: "\u859b\u4e4b\u8c26\u4e13\u8f91"\n      }\n    },\n    {\n      name: "\u6211\u597d\u50cf\u5728\u54ea\u89c1\u8fc7\u4f60",\n      ar: [{name: "\u859b\u4e4b\u8c26"}],\n      al: {\n        name: "\u859b\u4e4b\u8c26\u4e13\u8f91"\n      }\n    },\n    // \u7701\u7565 20 \u6761\n  ]\n}\n\n')),(0,i.kt)("p",null,"\u8fd4\u56de\u7684 JSX \u7ed3\u6784\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'<CSSTransition\n  in={showStatus}\n  timeout={300}\n  classNames="fly"\n  appear={true}\n  unmountOnExit\n  onExited={() => props.history.goBack ()}\n>\n  <Container>\n    <Header title={"\u5934\u90e8"}></Header>\n    <ImgWrapper bgUrl={artist.picUrl}>\n      <div className="filter"></div>\n    </ImgWrapper>\n    <CollectButton>\n      <i className="iconfont">&#xe62d;</i>\n      <span className="text"> \u6536\u85cf </span>\n    </CollectButton>\n    <BgLayer></BgLayer>\n    <SongListWrapper>\n      // \u6b4c\u66f2\u5217\u8868\u90e8\u5206\uff0c\u5f85\u4f1a\u4e13\u95e8\u62c6\u89e3\n    </SongListWrapper>\n  </Container>\n</CSSTransition>\n\n')),(0,i.kt)("p",null,"\u5bf9\u5e94 style.js \u4e2d\u7684\u5404\u4e2a\u6837\u5f0f\u7ec4\u4ef6\u4ee3\u7801\u5982\u4e0b\uff0c\u4e4b\u540e\u6837\u5f0f\u7ec4\u4ef6\u5927\u5bb6\u81ea\u884c\u5f15\u5165 index.js \u4e2d\uff1a"),(0,i.kt)("p",null,"ImgWrapper \u4e2d\u6709\u4e00\u4e2a\u6bd4\u8f83\u7279\u6b8a\u7684\u5904\u7406\uff0c\u5c06\u56fe\u7247\u8bbe\u4e3a\u8fd9\u4e2a\u5bb9\u5668\u7684\u80cc\u666f\uff0c\u7136\u540e\u91cc\u9762\u653e\u7f6e\u8ddf\u5bb9\u5668\u4e00\u6837\u5927\u7684 div\uff0c\u8fd9\u4e2a div \u989c\u8272\u504f\u6df1\uff0c\u6765\u5bf9\u56fe\u7247\u7684\u8272\u8c03\u8fdb\u884c\u4fee\u9970\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"export const ImgWrapper = styled.div`\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-top: 75%;\n  transform-origin: top;\n  background: url (${props => props.bgUrl});\n  background-size: cover;\n  z-index: 50;\n  .filter {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba (7, 17, 27, 0.3);\n  }\n`\n\n")),(0,i.kt)("p",null,"CollectButton \u5373\u6536\u85cf\u7684\u6309\u94ae\uff0c\u76f8\u5bf9\u4e8e Container \u7edd\u5bf9\u5b9a\u4f4d\uff0c\u4ee5 left\u3001right \u5404\u4e3a 0\uff0cmargin \u8bbe\u4e3a auto \u7684\u65b9\u5f0f\u5b9e\u73b0\u6c34\u5e73\u5c45\u4e2d\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'export const CollectButton = styled.div`\n  position: absolute;\n  left: 0; right: 0;\n  margin: auto;\n  box-sizing: border-box;\n  width: 120px;\n  height: 40px;\n  margin-top: -55px;\n  z-index:50;\n  background: ${style ["theme-color"]};\n  color: ${style ["font-color-light"]};\n  border-radius: 20px;\n  text-align: center;\n  font-size: 0;\n  line-height: 40px;\n  .iconfont {\n    display: inline-block;\n    margin-right: 10px;\n    font-size: 12px;\n    vertical-align: 1px;\n  }\n  .text {\n    display: inline-block;\n    font-size:14px;\n    letter-spacing: 5px;\n  }\n`\n\n')),(0,i.kt)("p",null,"\u6b4c\u66f2\u5217\u8868\u5bb9\u5668\uff0c\u6bd4\u8f83\u7b80\u5355\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"export const SongListWrapper = styled.div`\n  position: absolute;\n  z-index: 50;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  >div {\n    position: absolute;\n    left: 0;\n    width: 100%;\n    overflow: visible;\n  }\n`\n\n")),(0,i.kt)("p",null,"\u767d\u8272\u80cc\u666f\u906e\u7f69\uff0c\u662f\u672c\u90e8\u5206\u7684\u4eae\u70b9\u3002\u7b49\u4f1a\u628a\u6b4c\u66f2\u5217\u8868\u5f00\u53d1\u5b8c\u6210\u5c31\u80fd\u4f53\u4f1a\u5230\u5b83\u7684\u7528\u5904\u4e86\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"export const BgLayer = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  background: white;\n  border-radius: 10px;\n  z-index: 50;\n`\n\n")),(0,i.kt)("h2",{id:"\u6b4c\u66f2\u5217\u8868\u7ec4\u4ef6\u91cd\u6784"},"\u6b4c\u66f2\u5217\u8868\u7ec4\u4ef6\u91cd\u6784"),(0,i.kt)("p",null,"\u4e4b\u524d\u5728\u63a8\u8350\u6b4c\u5355\u90e8\u5206\uff0c\u6211\u4eec\u7528\u5230\u4e86\u6b4c\u66f2\u5217\u8868\uff0c\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u6837\u7684\u5217\u8868\u62bd\u79bb\u51fa\u6765\uff0c\u505a\u4e00\u4e0b\u7ec4\u4ef6\u7684\u590d\u7528\u3002"),(0,i.kt)("p",null,"application \u76ee\u5f55\u4e0b\u65b0\u5efa SongList \u7ec4\u4ef6 (\u7531\u4e8e\u4e4b\u540e\u548c\u64ad\u653e\u5668\u7ec4\u4ef6\u7684\u6570\u636e\u4ea4\u4e92\u8f83\u591a\uff0c\u6211\u4eec\u653e\u5230 application \u76ee\u5f55)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'import React from \'react\';\nimport { SongList, SongItem } from "./style";\nimport { getName } from \'../../api/utils\';\n\nconst SongsList = React.forwardRef ((props, refs)=> {\n\n  const { collectCount, showCollect, songs } = props;\n\n  const totalCount = songs.length;\n\n  const selectItem = (e, index) => {\n    console.log (index);\n  }\n\n  let songList = (list) => {\n    let res = [];\n    for (let i = 0; i < list.length; i++) {\n      let item = list [i];\n      res.push (\n        <li key={item.id} onClick={(e) => selectItem (e, i)}>\n          <span className="index">{i + 1}</span>\n          <div className="info">\n            <span>{item.name}</span>\n            <span>\n              { item.ar ? getName (item.ar): getName (item.artists) } - { item.al ? item.al.name : item.album.name}\n            </span>\n          </div>\n        </li>\n      )\n    }\n    return res;\n  };\n\n  const collect = (count) => {\n    return  (\n      <div className="add_list">\n        <i className="iconfont">&#xe62d;</i>\n        <span > \u6536\u85cf ({Math.floor (count/1000)/10} \u4e07)</span>\n      </div>\n    )\n  };\n  return (\n    <SongList ref={refs} showBackground={props.showBackground}>\n      <div className="first_line">\n        <div className="play_all" onClick={(e) => selectItem (e, 0)}>\n          <i className="iconfont">&#xe6e3;</i>\n          <span > \u64ad\u653e\u5168\u90e8 <span className="sum">(\u5171 {totalCount} \u9996)</span></span>\n        </div>\n        { showCollect ? collect (collectCount) : null}\n      </div>\n      <SongItem>\n        { songList (songs) }\n      </SongItem>\n    </SongList>\n  )\n});\n\nexport default React.memo (SongsList);\n\n')),(0,i.kt)("p",null,"\u5b83\u7684\u6837\u5f0f\u4ee3\u7801\u4e4b\u524d\u5df2\u7ecf\u5199\u8fc7\u4e86\uff0c\u4e0d\u8fc7\u6709\u4e00\u4e9b\u53c2\u6570\u7684\u5904\u7406\uff0c\u7a0d\u4f5c\u4fee\u6539\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'import styled from\'styled-components\';\nimport style from \'../../assets/global-style\';\n\nexport const SongList = styled.div`\n  border-radius: 10px;\n  opacity: 0.98;\n  // \u6ce8\u610f\u5728\u8fd9\u91cc\u80cc\u666f\u6539\u4e3a\u81ea\u914d\u7f6e\u53c2\u6570\u63a7\u5236\n  ${props => props.showBackground ? `background: ${style ["highlight-background-color"]}`: ""}\n  .first_line {\n    box-sizing: border-box;\n    padding: 10px 0;\n    margin-left: 10px;\n    position: relative;\n    justify-content: space-between;\n    border-bottom: 1px solid ${style ["border-color"]};\n    .play_all {\n      display: inline-block;\n      line-height: 24px;\n      color: ${style ["font-color-desc"]};\n      .iconfont {\n        font-size: 24px;\n        margin-right: 10px;\n        vertical-align: top;\n      }\n      .sum {\n        font-size: ${style ["font-size-s"]};\n        color: ${style ["font-color-desc-v2"]};\n      }\n      >span {\n        vertical-align: top;\n      }\n    }\n    .add_list,.isCollected {\n      display: flex;\n      align-items: center;\n      position: absolute;\n      right: 0; top :0; bottom: 0;\n      width: 130px;\n      line-height: 34px;\n      background: ${style ["theme-color"]};\n      color: ${style ["font-color-light"]};\n      font-size: 0;\n      border-radius: 3px;\n      vertical-align: top;\n      .iconfont {\n        vertical-align: top;\n        font-size: 10px;\n        margin: 0 5px 0 10px;\n      }\n      span {\n        font-size: 14px;\n        line-height: 34px;\n      }\n    }\n    .isCollected {\n      display: flex;\n      background: ${style ["background-color"]};\n      color: ${style ["font-color-desc"]};\n    }\n}\n`\nexport const SongItem = styled.ul`\n  >li {\n    display: flex;\n    height: 60px;\n    align-items: center;  \n    .index {\n      flex-basis: 60px;\n      width: 60px;\n      height: 60px;\n      line-height: 60px;\n      text-align: center;\n    }\n    .info {\n      box-sizing: border-box;\n      flex: 1;\n      display: flex;\n      height: 100%;\n      padding: 5px 0;\n      flex-direction: column;\n      justify-content: space-around;\n      border-bottom: 1px solid ${style ["border-color"]};\n      ${style.noWrap ()}\n      >span {\n        ${style.noWrap ()}\n      }\n      >span:first-child {\n        color: ${style ["font-color-desc"]};\n      }\n      >span:last-child {\n        font-size: ${style ["font-size-s"]};\n        color: #bba8a8;\n      }\n    }\n  }\n`\n\n')),(0,i.kt)("p",null,"\u5f53\u7136\u7ec4\u4ef6\u5c01\u88c5\u4e4b\u540e\uff0c\u53ef\u4ee5\u5728\u539f\u6765\u7684\u6b4c\u5355\u8be6\u60c5\u4e2d\u590d\u7528\uff0c\u8fd9\u91cc\u6211\u5077\u4e2a\u61d2\uff0c\u8ba9\u5927\u5bb6\u4e0b\u53bb\u81ea\u5df1\u5b8c\u6210\uff0c\u76f8\u4fe1\u5bf9\u73b0\u5728\u7684\u4f60\u800c\u8a00\u4e5f\u662f\u975e\u5e38\u5bb9\u6613\u7684\u4e8b\u60c5\u4e86\u3002"),(0,i.kt)("h2",{id:"\u5173\u4e8e-ui-\u7684\u4ee3\u7801\u6574\u7406"},"\u5173\u4e8e UI \u7684\u4ee3\u7801\u6574\u7406"),(0,i.kt)("p",null,"\u9996\u5148\u4eae\u51fa Singer \u7ec4\u4ef6\u76ee\u524d\u7684\u4ee3\u7801:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'import React, { useState, useEffect, useRef, useCallback } from "react";\nimport { CSSTransition } from "react-transition-group";\nimport { Container } from "./style";\nimport { ImgWrapper, CollectButton, SongListWrapper, BgLayer } from "./style";\nimport Header from "../../baseUI/header/index";\nimport Scroll from "../../baseUI/scroll/index";\nimport SongsList from "../SongsList";\n\nfunction Singer (props) {\n  const [showStatus, setShowStatus] = useState (true);\n\n  const artist = {\n    picUrl: "https://p2.music.126.net/W__FCWFiyq0JdPtuLJoZVQ==/109951163765026271.jpg",\n    name: "\u859b\u4e4b\u8c26",\n    hotSongs: [\n      {\n        name: "\u6211\u597d\u50cf\u5728\u54ea\u89c1\u8fc7\u4f60",\n        ar: [{name: "\u859b\u4e4b\u8c26"}],\n        al: {\n          name: "\u859b\u4e4b\u8c26\u4e13\u8f91"\n        }\n      },\n      {\n        name: "\u6211\u597d\u50cf\u5728\u54ea\u89c1\u8fc7\u4f60",\n        ar: [{name: "\u859b\u4e4b\u8c26"}],\n        al: {\n          name: "\u859b\u4e4b\u8c26\u4e13\u8f91"\n        }\n      // \u7701\u7565 20 \u6761\n    ]\n  };\n\n  return (\n    <CSSTransition\n      in={showStatus}\n      timeout={300}\n      classNames="fly"\n      appear={true}\n      unmountOnExit\n      onExited={() => props.history.goBack ()}\n    >\n      <Container>\n        <Header title={"\u5934\u90e8"}></Header>\n        <ImgWrapper bgUrl={artist.picUrl}>\n          <div className="filter"></div>\n        </ImgWrapper>\n        <CollectButton>\n          <i className="iconfont">&#xe62d;</i>\n          <span className="text"> \u6536\u85cf </span>\n        </CollectButton>\n        {/* <BgLayer></BgLayer> */}\n        <SongListWrapper>\n          <Scroll>\n            <SongsList\n              songs={artist.hotSongs}\n              showCollect={false}\n            ></SongsList>\n          </Scroll>\n        </SongListWrapper>\n      </Container>\n    </CSSTransition>\n  )\n}\n\nexport default Singer;\n\n')),(0,i.kt)("p",null,"\u63a5\u4e0b\u6765\u4ee5\u6b64\u4e3a\u57fa\u7840\u6765\u8fdb\u884c\u6e10\u8fdb\u5f0f\u5f00\u53d1\u3002"),(0,i.kt)("p",null,"\u7531\u4e8e\u6b4c\u66f2\u5217\u8868\u662f\u76f8\u5bf9\u4e8e Container \u7edd\u5bf9\u5b9a\u4f4d\u4e14 top \u4e3a 0\uff0c\u56e0\u6b64\u521d\u59cb\u5316\u65f6\uff0c\u6211\u4eec\u5c06\u6b4c\u66f2\u5217\u8868\u7684 top \u8bbe\u7f6e\u4e3a\u6574\u4e2a\u56fe\u7247\u7684\u9ad8\u5ea6\uff0c\u6b63\u597d\u5904\u5728\u56fe\u7247\u4e0b\u65b9\uff0c\u4e0d\u7136\u5217\u8868\u5c31\u4f1a\u4e0e\u56fe\u7247\u91cd\u53e0\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'// \u8bb0\u5f97\u5f15\u5165\u76f8\u5173 hooks \u51fd\u6570\uff0c\u4e0b\u4e0d\u8d58\u8ff0\n\n//...\n\nconst collectButton = useRef ();\nconst imageWrapper = useRef ();\nconst songScrollWrapper = useRef ();\nconst songScroll = useRef ();\nconst header = useRef ();\nconst layer = useRef ();\n// \u56fe\u7247\u521d\u59cb\u9ad8\u5ea6\nconst initialHeight = useRef (0);\n\n// \u5f80\u4e0a\u504f\u79fb\u7684\u5c3a\u5bf8\uff0c\u9732\u51fa\u5706\u89d2\nconst OFFSET = 5;\n\nuseEffect (() => {\n  let h = imageWrapper.current.offsetHeight;\n  songScrollWrapper.current.style.top = `${h - OFFSET} px`;\n  initialHeight.current = h;\n  // \u628a\u906e\u7f69\u5148\u653e\u5728\u4e0b\u9762\uff0c\u4ee5\u88f9\u4f4f\u6b4c\u66f2\u5217\u8868\n  layer.current.style.top = `${h - OFFSET} px`;\n  songScroll.current.refresh ();\n  //eslint-disable-next-line\n}, []);\n\nconst setShowStatusFalse = useCallback (() => {\n  setShowStatus (false);\n}, []);\n\n//JSX\n<Container>\n  <Header\n    handleClick={setShowStatusFalse}\n    title={artist.name}\n    ref={header}\n  ></Header>\n  <ImgWrapper ref={imageWrapper} bgUrl={artist.picUrl}>\n    <div className="filter"></div>\n  </ImgWrapper>\n  <CollectButton ref={collectButton}>\n    <i className="iconfont">&#xe62d;</i>\n    <span className="text"> \u6536\u85cf </span>\n  </CollectButton>\n  <BgLayer ref={layer}></BgLayer>\n  <SongListWrapper ref={songScrollWrapper}>\n    <Scroll ref={songScroll}>\n      <SongsList\n        songs={artist.hotSongs}\n        showCollect={false}\n      ></SongsList>\n    </Scroll>\n  </SongListWrapper>\n</Container>\n\n')),(0,i.kt)("p",null,'\u597d\uff0c\u73b0\u5728\u9759\u6001\u9875\u9762\u7684\u90e8\u5206\u5df2\u7ecf\u5f00\u53d1\u7684\u5dee\u4e0d\u591a\u4e86\u3002\u4f46\u662f\u4f5c\u4e3a\u4e00\u4e2a\u7cbe\u7f8e\u7684 web \u5e94\u7528\uff0c\u7edd\u4e0d\u662f\u4ec5\u4ec5\u9760\u5e03\u5c40\u5c31\u80fd\u4f53\u73b0 "\u7cbe\u7f8e" \u4e8c\u5b57\u7684\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c31\u6765\u5b8c\u6210\u7565\u5fae\u6709\u4e9b\u590d\u6742\u7684\u4ee5 JS \u4e3a\u4e3b\u7684\u4ea4\u4e92\u903b\u8f91\u3002'))}d.isMDXComponent=!0}}]);