"use strict";(self.webpackChunkdapengdouyu=self.webpackChunkdapengdouyu||[]).push([[1829],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return m}});var r=t(67294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,l=function(e,n){if(null==e)return{};var t,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=r.createContext({}),c=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=c(e.components);return r.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,l=e.mdxType,a=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(t),m=l,k=d["".concat(s,".").concat(m)]||d[m]||p[m]||a;return t?r.createElement(k,o(o({ref:n},u),{},{components:t})):r.createElement(k,o({ref:n},u))}));function m(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var a=t.length,o=new Array(a);o[0]=d;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:l,o[1]=i;for(var c=2;c<a;c++)o[c]=t[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},599:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return u},default:function(){return d}});var r=t(83117),l=t(80102),a=(t(67294),t(3905)),o=["components"],i={},s="Promise \u7684\u4f18\u70b9",c={unversionedId:"program/\u9762\u8bd5/3\u3001\u9762\u8bd5\u9898",id:"program/\u9762\u8bd5/3\u3001\u9762\u8bd5\u9898",title:"Promise \u7684\u4f18\u70b9",description:"1. JS \u5b9e\u73b0\u4e00\u4e2a\u5e26\u5e76\u53d1\u9650\u5236\u7684\u5f02\u6b65\u8c03\u5ea6\u5668 Scheduler\uff0c\u4fdd\u8bc1\u540c\u65f6\u8fd0\u884c\u7684\u4efb\u52a1\u6700\u591a\u6709\u4e24\u4e2a\u3002\u5b8c\u5584\u4e0b\u9762\u4ee3\u7801\u7684 Scheduler \u7c7b\uff0c\u4f7f\u4ee5\u4e0b\u7a0b\u5e8f\u80fd\u591f\u6b63\u5e38\u8f93\u51fa\uff1a",source:"@site/docs/program/\u9762\u8bd5/3\u3001\u9762\u8bd5\u9898.md",sourceDirName:"program/\u9762\u8bd5",slug:"/program/\u9762\u8bd5/3\u3001\u9762\u8bd5\u9898",permalink:"/docs/program/\u9762\u8bd5/3\u3001\u9762\u8bd5\u9898",editUrl:"https://github.com/dapengdouyu/docs/tree/master/docs/program/\u9762\u8bd5/3\u3001\u9762\u8bd5\u9898.md",tags:[],version:"current",lastUpdatedAt:1639048320,formattedLastUpdatedAt:"12/9/2021",frontMatter:{},sidebar:"program",previous:{title:"Javascript \u6df1\u5165\u4e4b\u7ee7\u627f\u7684\u591a\u79cd\u65b9\u5f0f\u548c\u4f18\u7f3a\u70b9",permalink:"/docs/program/\u9762\u8bd5/2\u3001\u7ee7\u627f"},next:{title:"\u5b9e\u73b0 Promise",permalink:"/docs/program/\u9762\u8bd5/6\u3001Promise"}},u=[{value:"1. JS \u5b9e\u73b0\u4e00\u4e2a\u5e26\u5e76\u53d1\u9650\u5236\u7684\u5f02\u6b65\u8c03\u5ea6\u5668 Scheduler\uff0c\u4fdd\u8bc1\u540c\u65f6\u8fd0\u884c\u7684\u4efb\u52a1\u6700\u591a\u6709<code>\u4e24\u4e2a</code>\u3002\u5b8c\u5584\u4e0b\u9762\u4ee3\u7801\u7684 Scheduler \u7c7b\uff0c\u4f7f\u4ee5\u4e0b\u7a0b\u5e8f\u80fd\u591f\u6b63\u5e38\u8f93\u51fa\uff1a",id:"1-js-\u5b9e\u73b0\u4e00\u4e2a\u5e26\u5e76\u53d1\u9650\u5236\u7684\u5f02\u6b65\u8c03\u5ea6\u5668-scheduler\u4fdd\u8bc1\u540c\u65f6\u8fd0\u884c\u7684\u4efb\u52a1\u6700\u591a\u6709\u4e24\u4e2a\u5b8c\u5584\u4e0b\u9762\u4ee3\u7801\u7684-scheduler-\u7c7b\u4f7f\u4ee5\u4e0b\u7a0b\u5e8f\u80fd\u591f\u6b63\u5e38\u8f93\u51fa",children:[],level:2},{value:"2. \u5b9e\u73b0\u4e0b\u9762\u7684\u65b9\u6cd5,\u4f7f\u5176\u7ed3\u679c\u4e3a 1200",id:"2-\u5b9e\u73b0\u4e0b\u9762\u7684\u65b9\u6cd5\u4f7f\u5176\u7ed3\u679c\u4e3a-1200",children:[{value:"2.1 \u901a\u8fc7 reduce \u5b9e\u73b0",id:"21-\u901a\u8fc7-reduce-\u5b9e\u73b0",children:[],level:3},{value:"2.2 \u901a\u8fc7 async \u548c await \u5b9e\u73b0",id:"22-\u901a\u8fc7-async-\u548c-await-\u5b9e\u73b0",children:[],level:3}],level:2},{value:"3. \u67ef\u91cc\u5316",id:"3-\u67ef\u91cc\u5316",children:[{value:"3.1 \u6709\u957f\u5ea6\u7684",id:"31-\u6709\u957f\u5ea6\u7684",children:[],level:3},{value:"3.2 \u6ca1\u6709\u957f\u5ea6\u7684",id:"32-\u6ca1\u6709\u957f\u5ea6\u7684",children:[],level:3}],level:2},{value:"4. call \u548c apply \u7684\u533a\u522b\u662f\u4ec0\u4e48\uff0c\u54ea\u4e2a\u6027\u80fd\u66f4\u597d\u4e00\u4e9b",id:"4-call-\u548c-apply-\u7684\u533a\u522b\u662f\u4ec0\u4e48\u54ea\u4e2a\u6027\u80fd\u66f4\u597d\u4e00\u4e9b",children:[{value:"4.1 \u5b9e\u73b0 call",id:"41-\u5b9e\u73b0-call",children:[],level:3},{value:"4.2 \u5b9e\u73b0 apply",id:"42-\u5b9e\u73b0-apply",children:[],level:3},{value:"4.3 \u9762\u8bd5\u9898",id:"43-\u9762\u8bd5\u9898",children:[],level:3}],level:2},{value:"5. \u6570\u7ec4\u91cc\u9762\u6709 10w \u6761\u6570\u636e\uff0c\u53d6\u7b2c\u4e00\u4e2a\u548c\u7b2c 10w \u4e2a\u5143\u7d20\u7684\u65f6\u95f4\u76f8\u5dee\u591a\u5c11?",id:"5-\u6570\u7ec4\u91cc\u9762\u6709-10w-\u6761\u6570\u636e\u53d6\u7b2c\u4e00\u4e2a\u548c\u7b2c-10w-\u4e2a\u5143\u7d20\u7684\u65f6\u95f4\u76f8\u5dee\u591a\u5c11",children:[],level:2},{value:"6. \u7f16\u5199 parse \u51fd\u6570\uff0c\u5b9e\u73b0\u8bbf\u95ee\u5bf9\u8c61\u91cc\u5c5e\u6027\u7684\u503c",id:"6-\u7f16\u5199-parse-\u51fd\u6570\u5b9e\u73b0\u8bbf\u95ee\u5bf9\u8c61\u91cc\u5c5e\u6027\u7684\u503c",children:[{value:"6.1 \u7b80\u5355\u4e00\u7248\u5b9e\u73b0",id:"61-\u7b80\u5355\u4e00\u7248\u5b9e\u73b0",children:[],level:3},{value:"6.2 \u9762\u8bd5\u7248",id:"62-\u9762\u8bd5\u7248",children:[],level:3}],level:2},{value:"7.\u6570\u7ec4\u6241\u5e73\u5316 flat \u65b9\u6cd5\u7684\u591a\u79cd\u5b9e\u73b0\uff1f",id:"7\u6570\u7ec4\u6241\u5e73\u5316-flat-\u65b9\u6cd5\u7684\u591a\u79cd\u5b9e\u73b0",children:[{value:"7.1 es6",id:"71-es6",children:[],level:3},{value:"7.2 toString",id:"72-tostring",children:[],level:3},{value:"7.3 stringify",id:"73-stringify",children:[],level:3},{value:"7.4 while",id:"74-while",children:[],level:3},{value:"7.5 \u9012\u5f52",id:"75-\u9012\u5f52",children:[],level:3}],level:2},{value:"9. \u9898\u76ee\u63cf\u8ff0:\u5b9e\u73b0\u4e00\u4e2a <code>compose</code> \u51fd\u6570",id:"9-\u9898\u76ee\u63cf\u8ff0\u5b9e\u73b0\u4e00\u4e2a-compose-\u51fd\u6570",children:[{value:"9.1 \u7528\u6cd5\u5982\u4e0b:",id:"91-\u7528\u6cd5\u5982\u4e0b",children:[],level:3},{value:"9.2 \u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b:",id:"92-\u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b",children:[],level:3}],level:2},{value:"10. \u5b9e\u73b0<code>12345678.002345 -&gt; 12,345,678.002345</code>",id:"10-\u5b9e\u73b012345678002345---12345678002345",children:[],level:2},{value:"11. \u4e0b\u5217\u7684\u7ed3\u679c\u662f",id:"11-\u4e0b\u5217\u7684\u7ed3\u679c\u662f",children:[],level:2},{value:"12. \u4e0b\u5217\u7684\u7ed3\u679c\u662f",id:"12-\u4e0b\u5217\u7684\u7ed3\u679c\u662f",children:[],level:2},{value:"13.\u7ed9\u5b9a\u4e00\u7ec4 url\uff0c\u5229\u7528 js \u7684\u5f02\u6b65\u5b9e\u73b0\u5e76\u53d1\u8bf7\u6c42\uff0c\u5e76\u6309\u987a\u5e8f\u8f93\u51fa\u7ed3\u679c",id:"13\u7ed9\u5b9a\u4e00\u7ec4-url\u5229\u7528-js-\u7684\u5f02\u6b65\u5b9e\u73b0\u5e76\u53d1\u8bf7\u6c42\u5e76\u6309\u987a\u5e8f\u8f93\u51fa\u7ed3\u679c",children:[],level:2},{value:"14.\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u89e3\u6790\u4e0b\u9762\u7684 queryString,\u8fd4\u56de\u5bf9\u8c61",id:"14\u5199\u4e00\u4e2a\u7a0b\u5e8f\u89e3\u6790\u4e0b\u9762\u7684-querystring\u8fd4\u56de\u5bf9\u8c61",children:[{value:"test",id:"test",children:[],level:3},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0",children:[],level:3}],level:2},{value:"15\u3001\u4e0b\u9762\u7a0b\u5e8f\u7684\u7ed3\u679c",id:"15\u4e0b\u9762\u7a0b\u5e8f\u7684\u7ed3\u679c",children:[],level:2},{value:"16\u3001\u5b9e\u73b0 bind",id:"16\u5b9e\u73b0-bind",children:[],level:2},{value:"17. Object.create \u7684\u5b9e\u73b0",id:"17-objectcreate-\u7684\u5b9e\u73b0",children:[],level:2},{value:"18.new \u7684\u5b9e\u73b0",id:"18new-\u7684\u5b9e\u73b0",children:[],level:2},{value:"19.instanceof",id:"19instanceof",children:[],level:2},{value:"20.\u5b9e\u73b0 Array.prototype.reduce",id:"20\u5b9e\u73b0-arrayprototypereduce",children:[],level:2},{value:"21.Array.prototype.filter \u7684\u5b9e\u73b0",id:"21arrayprototypefilter-\u7684\u5b9e\u73b0",children:[],level:2},{value:"22. Array.prototype.map \u7684\u5b9e\u73b0",id:"22-arrayprototypemap-\u7684\u5b9e\u73b0",children:[],level:2},{value:"23. \u6570\u7ec4\u53bb\u91cd\u7684\u65b9\u6cd5",id:"23-\u6570\u7ec4\u53bb\u91cd\u7684\u65b9\u6cd5",children:[],level:2},{value:"24. \u6c42\u6570\u7ec4\u7684\u4ea4\u96c6",id:"24-\u6c42\u6570\u7ec4\u7684\u4ea4\u96c6",children:[],level:2},{value:"25. \u6c42\u6570\u7ec4\u7684\u5e76\u96c6",id:"25-\u6c42\u6570\u7ec4\u7684\u5e76\u96c6",children:[],level:2},{value:"26. \u6c42\u6570\u7ec4\u7684\u5dee\u96c6",id:"26-\u6c42\u6570\u7ec4\u7684\u5dee\u96c6",children:[],level:2},{value:"27. \u6d17\u724c\u7b97\u6cd5",id:"27-\u6d17\u724c\u7b97\u6cd5",children:[{value:"\u771f\u5b9e\u7684",id:"\u771f\u5b9e\u7684",children:[],level:3}],level:2},{value:"28. deepClone",id:"28-deepclone",children:[],level:2},{value:"29. arrToTree",id:"29-arrtotree",children:[],level:2},{value:"30.settimeout \u6a21\u62df\u5b9e\u73b0 setinterval(\u5e26\u6e05\u9664\u5b9a\u65f6\u5668\u7684\u7248\u672c)",id:"30settimeout-\u6a21\u62df\u5b9e\u73b0-setinterval\u5e26\u6e05\u9664\u5b9a\u65f6\u5668\u7684\u7248\u672c",children:[],level:2},{value:"31.\u5b9e\u73b0 LazyMan",id:"31\u5b9e\u73b0-lazyman",children:[],level:2},{value:"32. \u5199\u7248\u672c\u53f7\u6392\u5e8f\u7684\u65b9\u6cd5",id:"32-\u5199\u7248\u672c\u53f7\u6392\u5e8f\u7684\u65b9\u6cd5",children:[],level:2},{value:"33. LRU \u7b97\u6cd5",id:"33-lru-\u7b97\u6cd5",children:[],level:2},{value:"34. Promise \u4ee5\u53ca\u76f8\u5173\u65b9\u6cd5\u7684\u5b9e\u73b0",id:"34-promise-\u4ee5\u53ca\u76f8\u5173\u65b9\u6cd5\u7684\u5b9e\u73b0",children:[],level:2},{value:"35. \u5b9e\u73b0\u9a7c\u5cf0&#39;a-bb-ccc-dddd&#39;--&gt;&#39;ABbCccDddd&#39;",id:"35-\u5b9e\u73b0\u9a7c\u5cf0a-bb-ccc-dddd--abbcccdddd",children:[],level:2},{value:"36. \u63d0\u53d6\u4e2d\u57df\u540d&#39;http://www.baidu.com/a'",id:"36-\u63d0\u53d6\u4e2d\u57df\u540dhttpwwwbaiducoma",children:[],level:2},{value:"37. Object.is \u5b9e\u73b0",id:"37-objectis-\u5b9e\u73b0",children:[],level:2},{value:"38.AJAX",id:"38ajax",children:[],level:2},{value:"39.\u5c06\u865a\u62df Dom \u8f6c\u5316\u4e3a\u771f\u5b9e Dom",id:"39\u5c06\u865a\u62df-dom-\u8f6c\u5316\u4e3a\u771f\u5b9e-dom",children:[],level:2},{value:"39.\u5b9e\u73b0\u6a21\u677f\u5b57\u7b26\u4e32\u89e3\u6790\u529f\u80fd",id:"39\u5b9e\u73b0\u6a21\u677f\u5b57\u7b26\u4e32\u89e3\u6790\u529f\u80fd",children:[{value:"40. ts",id:"40-ts",children:[],level:3}],level:2}],p={toc:u};function d(e){var n=e.components,i=(0,l.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},p,i,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"promise-\u7684\u4f18\u70b9"},"Promise \u7684\u4f18\u70b9"),(0,a.kt)("h2",{id:"1-js-\u5b9e\u73b0\u4e00\u4e2a\u5e26\u5e76\u53d1\u9650\u5236\u7684\u5f02\u6b65\u8c03\u5ea6\u5668-scheduler\u4fdd\u8bc1\u540c\u65f6\u8fd0\u884c\u7684\u4efb\u52a1\u6700\u591a\u6709\u4e24\u4e2a\u5b8c\u5584\u4e0b\u9762\u4ee3\u7801\u7684-scheduler-\u7c7b\u4f7f\u4ee5\u4e0b\u7a0b\u5e8f\u80fd\u591f\u6b63\u5e38\u8f93\u51fa"},"1. JS \u5b9e\u73b0\u4e00\u4e2a\u5e26\u5e76\u53d1\u9650\u5236\u7684\u5f02\u6b65\u8c03\u5ea6\u5668 Scheduler\uff0c\u4fdd\u8bc1\u540c\u65f6\u8fd0\u884c\u7684\u4efb\u52a1\u6700\u591a\u6709",(0,a.kt)("inlineCode",{parentName:"h2"},"\u4e24\u4e2a"),"\u3002\u5b8c\u5584\u4e0b\u9762\u4ee3\u7801\u7684 Scheduler \u7c7b\uff0c\u4f7f\u4ee5\u4e0b\u7a0b\u5e8f\u80fd\u591f\u6b63\u5e38\u8f93\u51fa\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'class Scheduler {\n  constructor() {\n    this.listener = [];\n    this.max = 3;\n    this.timer = null;\n  }\n  //   \u6536\u96c6\u4f9d\u8d56\n  add(promiseCreator) {\n    this.listener.push(promiseCreator);\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n    this.timer = setTimeout(() => {\n      this.request();\n    });\n  }\n  request(count = 0) {\n    const l = this.listener.shift();\n    if (typeof l === "function") {\n      l().then(() => {\n        this.request(count - 1);\n      });\n    }\n    if (count++ < this.max) {\n      this.request(count + 1);\n    }\n  }\n}\n\nconst timeout = (time) =>\n  new Promise((resolve) => {\n    setTimeout(resolve, time);\n  });\n\nconst scheduler = new Scheduler();\n\nconst addTask = (time, order) => {\n  scheduler.add(() => timeout(time).then(() => console.log(order)));\n};\n\naddTask(1000, "1");\naddTask(500, "2");\naddTask(300, "3");\naddTask(400, "4");\naddTask(400, "5");\n\n// output: 2 3 1 4\n')),(0,a.kt)("h2",{id:"2-\u5b9e\u73b0\u4e0b\u9762\u7684\u65b9\u6cd5\u4f7f\u5176\u7ed3\u679c\u4e3a-1200"},"2. \u5b9e\u73b0\u4e0b\u9762\u7684\u65b9\u6cd5,\u4f7f\u5176\u7ed3\u679c\u4e3a 1200"),(0,a.kt)("h3",{id:"21-\u901a\u8fc7-reduce-\u5b9e\u73b0"},"2.1 \u901a\u8fc7 reduce \u5b9e\u73b0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function p1(a) {\n  return new Promise((resolve, reject) => {\n    resolve(a * 5);\n  });\n}\nfunction p2(a) {\n  return new Promise((resolve, reject) => {\n    resolve(a * 2);\n  });\n}\nfunction f3(a) {\n  return a * 3;\n}\nfunction p4(a) {\n  return new Promise((resolve, reject) => {\n    resolve(a * 4);\n  });\n}\n\nconst promiseArr = [p1, p2, f3, p4];\nrunPromiseInSequence(promiseArr, 10).then(console.log);\n\nfunction runPromiseInSequence(arr, init) {\n  return arr.reduce((memo, next) => {\n    return memo.then(next);\n  }, Promise.resolve(init));\n}\n")),(0,a.kt)("h3",{id:"22-\u901a\u8fc7-async-\u548c-await-\u5b9e\u73b0"},"2.2 \u901a\u8fc7 async \u548c await \u5b9e\u73b0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"async function runPromiseInSequence(arr, init) {\n  for (let item of arr) {\n    init = await item(init);\n  }\n  return init;\n}\n")),(0,a.kt)("h2",{id:"3-\u67ef\u91cc\u5316"},"3. \u67ef\u91cc\u5316"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u5360\u5b58\u6570\u636e\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u51fd\u6570\uff0c\u5f53\u6700\u540e\u4e00\u6b21\u8c03\u7528\u51fd\u6570\u7684\u65f6\u5019\u624d\u8fd4\u56de\u503c")),(0,a.kt)("h3",{id:"31-\u6709\u957f\u5ea6\u7684"},"3.1 \u6709\u957f\u5ea6\u7684"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function curry(callback) {\n  let cache = [];\n  return function fn(...args) {\n    cache = cache.concat(args);\n    if (cache.length >= callback.length) {\n      callback.apply(this, cache);\n    }\n    return fn;\n  };\n}\n")),(0,a.kt)("h3",{id:"32-\u6ca1\u6709\u957f\u5ea6\u7684"},"3.2 \u6ca1\u6709\u957f\u5ea6\u7684"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function curry(callback) {\n  let cache = [];\n  function fn(...args) {\n    cache = cache.concat(args);\n    return fn;\n  }\n  fn.toString = function () {\n    return callback.apply(this, cache);\n  };\n  return fn;\n}\n")),(0,a.kt)("h2",{id:"4-call-\u548c-apply-\u7684\u533a\u522b\u662f\u4ec0\u4e48\u54ea\u4e2a\u6027\u80fd\u66f4\u597d\u4e00\u4e9b"},"4. call \u548c apply \u7684\u533a\u522b\u662f\u4ec0\u4e48\uff0c\u54ea\u4e2a\u6027\u80fd\u66f4\u597d\u4e00\u4e9b"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u90fd\u662f\u53ef\u4ee5\u4fee\u6539 this \u7684\u6307\u5411\uff0c\u5e76\u4e14\u6267\u884c\u51fd\u6570"),(0,a.kt)("li",{parentName:"ul"},"call \u662f\u53c2\u6570\u4e00\u4e2a\u4e00\u4e2a\u7684\u4f20\u9012"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://tc39.es/ecma262/#sec-function.prototype.apply"},"apply")," \u662f\u53c2\u6570\u662f\u4e00\u4e2a\u6570\u7ec4"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://jsperf.com/call-apply-segu"},"call")," \u7684\u6027\u80fd\u66f4\u597d,apply \u8c03\u7528\u7684\u5c31\u662f",(0,a.kt)("inlineCode",{parentName:"li"},"call"))),(0,a.kt)("h3",{id:"41-\u5b9e\u73b0-call"},"4.1 \u5b9e\u73b0 call"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5c06\u51fd\u6570\u8bbe\u4e3a\u5bf9\u8c61\u7684\u5c5e\u6027"),(0,a.kt)("li",{parentName:"ul"},"\u6267\u884c\u8be5\u51fd\u6570"),(0,a.kt)("li",{parentName:"ul"},"\u5220\u9664\u8be5\u51fd\u6570")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Function.prototype.call = function (context, ...args) {\n  context = context || window;\n  const fn = Symbol();\n  context[fn] = this;\n  const ret = context[fn](...args);\n  delete context[fn];\n  return ret;\n};\n")),(0,a.kt)("h3",{id:"42-\u5b9e\u73b0-apply"},"4.2 \u5b9e\u73b0 apply"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Function.prototype.apply = function (context, args) {\n  context = context || window;\n  const fn = Symbol();\n  context[fn] = this;\n  const ret = context[fn](...args);\n  delete context[fn];\n  return ret;\n};\n")),(0,a.kt)("h3",{id:"43-\u9762\u8bd5\u9898"},"4.3 \u9762\u8bd5\u9898"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function fn1() {\n  console.log(1);\n}\nfunction fn2() {\n  console.log(2);\n}\nfn1.call.call(fn2);\n/**\n * \u89e3\u6790\uff1a\n * 1\u3001fn1.call=== call\u51fd\u65701\n * 2. call\u51fd\u65701.call\u6267\u884c\n * 3. context[fn]=call\u51fd\u65701 ===> fn2.call\u51fd\u65701\u6267\u884c\n * 4. fn2.call()\u6267\u884c\n * 5. \u6240\u4ee5fn2\u6267\u884c\n *\n */\n")),(0,a.kt)("h2",{id:"5-\u6570\u7ec4\u91cc\u9762\u6709-10w-\u6761\u6570\u636e\u53d6\u7b2c\u4e00\u4e2a\u548c\u7b2c-10w-\u4e2a\u5143\u7d20\u7684\u65f6\u95f4\u76f8\u5dee\u591a\u5c11"},"5. \u6570\u7ec4\u91cc\u9762\u6709 10w \u6761\u6570\u636e\uff0c\u53d6\u7b2c\u4e00\u4e2a\u548c\u7b2c 10w \u4e2a\u5143\u7d20\u7684\u65f6\u95f4\u76f8\u5dee\u591a\u5c11?"),(0,a.kt)("p",null,"\u4e00\u6837\u7684"),(0,a.kt)("h2",{id:"6-\u7f16\u5199-parse-\u51fd\u6570\u5b9e\u73b0\u8bbf\u95ee\u5bf9\u8c61\u91cc\u5c5e\u6027\u7684\u503c"},"6. \u7f16\u5199 parse \u51fd\u6570\uff0c\u5b9e\u73b0\u8bbf\u95ee\u5bf9\u8c61\u91cc\u5c5e\u6027\u7684\u503c"),(0,a.kt)("h3",{id:"61-\u7b80\u5355\u4e00\u7248\u5b9e\u73b0"},"6.1 \u7b80\u5355\u4e00\u7248\u5b9e\u73b0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'let obj = { a: 1, b: { c: 2 }, d: [1, 2, 3], e: [{ f: [4, 5, 6] }] };\nlet r1 = parse(obj, "a"); // = 1;\nlet r2 = parse(obj, "b.c"); // = 2;\nlet r3 = parse(obj, "d[2]"); // = 3;\nlet r4 = parse(obj, "e[0].f[2]"); // = 4;\nfunction parse(obj, str) {\n  return new Function("obj", "return obj." + str.replace(/\\.(\\d+)/g, "[$1]"))(\n    obj\n  );\n}\n')),(0,a.kt)("h3",{id:"62-\u9762\u8bd5\u7248"},"6.2 \u9762\u8bd5\u7248"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'let obj = { a: 1, b: { c: 2 }, d: [1, 2, 3], e: [{ f: [4, 5, 6] }] };\nlet r1 = parse(obj, "a"); // = 1;\nlet r2 = parse(obj, "b.c"); // = 2;\nlet r3 = parse(obj, "d[2]"); // = 3;\nlet r4 = parse(obj, "e[0].f[2]"); // = 4;\n\nfunction parse(obj, str) {\n  return str\n    .split(/[\\.\\[\\]]/g)\n    .filter((l) => l !== "")\n    .reduce((memo, next, index, arr) => {\n      if (memo == null && arr.length - 1 !== index) {\n        memo = {};\n      }\n      return memo[next];\n    }, obj);\n}\n')),(0,a.kt)("h2",{id:"7\u6570\u7ec4\u6241\u5e73\u5316-flat-\u65b9\u6cd5\u7684\u591a\u79cd\u5b9e\u73b0"},"7.\u6570\u7ec4\u6241\u5e73\u5316 flat \u65b9\u6cd5\u7684\u591a\u79cd\u5b9e\u73b0\uff1f"),(0,a.kt)("h3",{id:"71-es6"},"7.1 es6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let arr = [[1], [2, 3], [4, 5, 6, [7, 8, [9, 10, [11]]]], 12];\nlet flattedArr = arr.flat(Infinity);\nconsole.log(flattedArr);\n")),(0,a.kt)("h3",{id:"72-tostring"},"7.2 toString"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u7f3a\u70b9"),":\u4f1a\u6539\u53d8\u6570\u7ec4\u7684\u7c7b\u578b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'let arr = [[1], [2, 3], [4, 5, 6, [7, 8, [9, 10, [11]]]], 12];\nconsole.log(\n  arr\n    .toString()\n    .split(",")\n    .map((item) => Number(item))\n);\n')),(0,a.kt)("h3",{id:"73-stringify"},"7.3 stringify"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'JSON.stringify(arr)\n  .split(/[\\[\\],]/g)\n  .filter((item) => item !== "")\n  .map((item) => Number(item));\n')),(0,a.kt)("h3",{id:"74-while"},"7.4 while"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"while (arr.some((item) => Array.isArray(item))) {\n  arr = [].concat(...arr);\n}\n")),(0,a.kt)("h3",{id:"75-\u9012\u5f52"},"7.5 \u9012\u5f52"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function flat(arr, r = []) {\n  if (!Array.isArray(arr)) {\n    return arr;\n  }\n  for (let item of arr) {\n    r = r.concat(flat(item));\n  }\n  return r;\n}\n")),(0,a.kt)("h2",{id:"9-\u9898\u76ee\u63cf\u8ff0\u5b9e\u73b0\u4e00\u4e2a-compose-\u51fd\u6570"},"9. \u9898\u76ee\u63cf\u8ff0:\u5b9e\u73b0\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"h2"},"compose")," \u51fd\u6570"),(0,a.kt)("h3",{id:"91-\u7528\u6cd5\u5982\u4e0b"},"9.1 \u7528\u6cd5\u5982\u4e0b:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// \u7528\u6cd5\u5982\u4e0b:\nfunction fn1(x) {\n  return x + 1;\n}\nfunction fn2(x) {\n  return x + 2;\n}\nfunction fn3(x) {\n  return x + 3;\n}\nfunction fn4(x) {\n  return x + 4;\n}\nconst a = compose(fn1, fn2, fn3, fn4);\nconsole.log(a(1)); // 1+4+3+2+1=11\n")),(0,a.kt)("h3",{id:"92-\u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b"},"9.2 \u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function compose() {}\n")),(0,a.kt)("h2",{id:"10-\u5b9e\u73b012345678002345---12345678002345"},"10. \u5b9e\u73b0",(0,a.kt)("inlineCode",{parentName:"h2"},"12345678.002345 -> 12,345,678.002345")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'function parse(number) {\n  const [int, dot] = String(number).split(".");\n  return (\n    int.replace(/(?!^)(?=((\\d{3})+$))/g, ",") +\n    (dot ? "." + Number(dot).toFixed(2) : "")\n  );\n}\n\nconsole.log(parse(`12345678`));\n')),(0,a.kt)("h2",{id:"11-\u4e0b\u5217\u7684\u7ed3\u679c\u662f"},"11. \u4e0b\u5217\u7684\u7ed3\u679c\u662f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Document</title>\n  </head>\n  <body>\n    <button id="btn">btn</button>\n    <script>\n      const btn = document.getElementById("btn");\n      btn.addEventListener("click", () => {\n        console.log("c1");\n        Promise.resolve().then(() => console.log("p1"));\n      });\n      btn.addEventListener("click", () => {\n        console.log("c2");\n        Promise.resolve().then(() => console.log("p2"));\n      });\n      btn.click();\n      console.log(3);\n    <\/script>\n  </body>\n</html>\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u76f4\u63a5\u8c03\u7528 click \u662f\u540c\u6b65\u7684\uff0c\u5982\u679c\u624b\u52a8\u70b9\u51fb\u662f\u5b8f\u4efb\u52a1"),(0,a.kt)("li",{parentName:"ul"},"\u6240\u4ee5\u9996\u6b21\u7ed3\u679c\u662f:",(0,a.kt)("inlineCode",{parentName:"li"},"c1 c2 3 p1 p2")),(0,a.kt)("li",{parentName:"ul"},"\u624b\u52a8\u70b9\u51fb\u7684\u7ed3\u679c\u662f:",(0,a.kt)("inlineCode",{parentName:"li"},"3 c1 p1 c2 p2"))),(0,a.kt)("h2",{id:"12-\u4e0b\u5217\u7684\u7ed3\u679c\u662f"},"12. \u4e0b\u5217\u7684\u7ed3\u679c\u662f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"async function f1() {\n  return new Promise((resolve) => {\n    console.log(4);\n    resolve();\n  }).then(() => {\n    console.log(5);\n  });\n}\nasync function run() {\n  console.log(1);\n  new Promise((resolve) => {\n    console.log(2);\n    resolve();\n  }).then(() => {\n    console.log(3);\n  });\n  await f1();\n  setTimeout(() => {\n    console.log(6);\n  }, 0);\n  console.log(7);\n}\nrun();\n// 1 2 4 3 5 7 6\n")),(0,a.kt)("h2",{id:"13\u7ed9\u5b9a\u4e00\u7ec4-url\u5229\u7528-js-\u7684\u5f02\u6b65\u5b9e\u73b0\u5e76\u53d1\u8bf7\u6c42\u5e76\u6309\u987a\u5e8f\u8f93\u51fa\u7ed3\u679c"},"13.\u7ed9\u5b9a\u4e00\u7ec4 url\uff0c\u5229\u7528 js \u7684\u5f02\u6b65\u5b9e\u73b0\u5e76\u53d1\u8bf7\u6c42\uff0c\u5e76\u6309\u987a\u5e8f\u8f93\u51fa\u7ed3\u679c"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u7528\u6cd5")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'function printOrder(urlArr) {}\nprintOrder(["/1.json?ts=" + Date.now(), "/2.json?ts=" + Date.now()]);\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5b9e\u73b0")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"")),(0,a.kt)("h2",{id:"14\u5199\u4e00\u4e2a\u7a0b\u5e8f\u89e3\u6790\u4e0b\u9762\u7684-querystring\u8fd4\u56de\u5bf9\u8c61"},"14.\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u89e3\u6790\u4e0b\u9762\u7684 queryString,\u8fd4\u56de\u5bf9\u8c61"),(0,a.kt)("h3",{id:"test"},"test"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'console.log(parse("a=1&b=2&c=3"));\nconsole.log(parse("a&b&c"));\nconsole.log(parse("a[name]=yl&a[age]=20&b[age]=2&c=3"));\nconsole.log(parse("color=deep%20blue"));\nconsole.log(parse("a[0]=1&a[1]=2"));\n')),(0,a.kt)("h3",{id:"\u5b9e\u73b0"},"\u5b9e\u73b0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'function parse(url) {\n  return url.split("&").reduce((memo, next) => {\n    const [key, value] = next.split("=");\n    if (!value) return memo;\n    const path = key.split(/[\\[\\]\\.]/).filter((item) => item !== "");\n    deep_set(memo, path, value);\n    return memo;\n  }, {});\n}\nfunction deep_set(memo, path, value) {\n  path.reduce((obj, key, index, arr) => {\n    if (index === arr.length - 1) {\n      obj[key] = decodeURIComponent(value);\n    } else {\n      if (obj[key] == null) {\n        if (arr[index + 1].match(/^\\d+$/)) {\n          obj[key] = [];\n        } else {\n          obj[key] = {};\n        }\n      }\n    }\n    return obj[key];\n  }, memo);\n}\n')),(0,a.kt)("h2",{id:"15\u4e0b\u9762\u7a0b\u5e8f\u7684\u7ed3\u679c"},"15\u3001\u4e0b\u9762\u7a0b\u5e8f\u7684\u7ed3\u679c"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"\u4f18\u5148\u7ea7",src:t(5376).Z})),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function Foo() {\n  getName = function () {\n    console.log(1);\n  };\n  return this;\n}\nFoo.getName = function () {\n  console.log(2);\n};\nFoo.prototype.getName = function () {\n  console.log(3);\n};\nvar getName = function () {\n  console.log(4);\n};\nfunction getName() {\n  console.log(5);\n}\n\nFoo.getName();\ngetName();\nFoo().getName();\ngetName();\nnew Foo.getName();\nnew Foo().getName();\nnew new Foo().getName();\n\n//2 4 1 1 2 3 3\n")),(0,a.kt)("h2",{id:"16\u5b9e\u73b0-bind"},"16\u3001\u5b9e\u73b0 bind"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u7528\u6cd5")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function a() {\n  console.log(this.a); //1\n}\na.bind({ a: 1 })();\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5b9e\u73b0")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'Function.prototype.bind = function (context, ...args) {\n  // \u8c03\u7528 bind \u7684\u4e0d\u662f\u51fd\u6570\u548b\u529e\uff1f\n  if (typeof this !== "function") {\n    throw new Error("\u5fc5\u987b\u662f\u51fd\u6570\u8c03\u7528");\n  }\n  const self = this;\n  context = context || window;\n  function bound() {\n    args = args.concat([].slice.call(arguments));\n    self.apply(this instanceof bound ? this : context, args);\n  }\n  // \u4fee\u6539\u8fd4\u56de\u51fd\u6570\u7684 prototype \u4e3a\u7ed1\u5b9a\u51fd\u6570\u7684 prototype\uff0c\u5b9e\u4f8b\u5c31\u53ef\u4ee5\u7ee7\u627f\u7ed1\u5b9a\u51fd\u6570\u7684\u539f\u578b\u4e2d\u7684\u503c\n  bound.prototype = Object.create(this.prototype);\n  return bound;\n};\n')),(0,a.kt)("h2",{id:"17-objectcreate-\u7684\u5b9e\u73b0"},"17. Object.create \u7684\u5b9e\u73b0"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u7528\u6cd5")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const a = { a: 1 };\nconsole.log(\n  Object.create(a, {\n    c: { value: 1 },\n  })\n);\n/*\n*{c:1,\n*__proto__:{\n* a:1\n*}\n*/\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5b9e\u73b0",(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("inlineCode",{parentName:"p"},"Object.create")," \u5176\u5b9e\u5c31\u662f\u521b\u5efa\u4e00\u4e2a\u7a7a\u5bf9\u8c61, \u5c06\u8be5\u5bf9\u8c61\u7684\u539f\u578b\u8bbe\u7f6e\u4e3a\u4f20\u5165\u7684\u53c2\u6570")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function create(context, propertiesObject = {}) {\n  function Fn() {}\n  Fn.prototype = context;\n  return Object.defineProperties(new Fn(), propertiesObject);\n}\n")),(0,a.kt)("h2",{id:"18new-\u7684\u5b9e\u73b0"},"18.new \u7684\u5b9e\u73b0"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u4e2a\u7a7a\u5bf9\u8c61"),(0,a.kt)("li",{parentName:"ol"},"\u5c06\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u8d4b\u503c\u7ed9\u8be5\u5bf9\u8c61"),(0,a.kt)("li",{parentName:"ol"},"\u6267\u884c\u6784\u9020\u51fd\u6570\uff0c\u5e76\u5c06\u6784\u9020\u51fd\u6570\u7684 this \u8bbe\u7f6e\u6210\u7a7a\u5bf9\u8c61"),(0,a.kt)("li",{parentName:"ol"},"\u770b\u6784\u9020\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u4ec0\u4e48\u7c7b\u578b\uff0c\u5982\u679c\u662f\u5f15\u7528\u7c7b\u578b\uff0c\u5c06\u8fd4\u56de\u503c\u4f5c\u4e3a\u8be5\u6784\u9020\u51fd\u6570\u7684\u5b9e\u4f8b"),(0,a.kt)("li",{parentName:"ol"},"\u5982\u679c\u662f\u503c\u7c7b\u578b,\u5c06\u5bf9\u8c61\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u7684\u5b9e\u4f8b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"}," function new(){\n   const Constructor=[].shift.call(arguments);\n    const obj=Object.create(Constructor.prototype);\n    const returnObj=Constructor.apply(obj,[].slice.call(arguments));\n    return typeof returnObj==='object'?returnObj:obj;\n }\n")),(0,a.kt)("h2",{id:"19instanceof"},"19.instanceof"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u53f3\u8fb9\u6784\u9020\u51fd\u6570\u7684 prototype,\u5728\u5de6\u8fb9\u5bf9\u8c61\u7684\u539f\u578b\u7684\u539f\u578b\u94fe\u4e0a")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'"1" instanceof String;\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5b9e\u73b0")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function instanceof(left,right){\n  let result=left.__proto__;\n  // \u82e5\u627e\u4e0d\u5230\u5c31\u5230\u4e00\u76f4\u5faa\u73af\u5230\u7236\u7c7b\u578b\u6216\u7956\u7c7b\u578b\n  while(result!=null){\n    if(result===right.prototype){\n      return true;\n    }\n    result=result.__proto__//// \u83b7\u53d6\u7956\u7c7b\u578b\u7684__proto__\n  }\n  return false\n}\n")),(0,a.kt)("h2",{id:"20\u5b9e\u73b0-arrayprototypereduce"},"20.\u5b9e\u73b0 Array.prototype.reduce"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let arr = [{ name: 1 }, { name: 2 }, { name: 3 }];\narr.reduce((memo, item, index, arr) => {\n  console.log(index); //1\n  return memo + item.name;\n});\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5b9e\u73b0")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'Array.prototype.reduce = function (callback, initValue) {\n  if (typeof callback !== "function") {\n    throw new TypeError(`callback\u5fc5\u987b\u662f\u51fd\u6570`);\n  }\n  // \u5982\u679c\u4e0d\u662f\u6570\u7ec4\u76f4\u63a5\u8fd4\u56de\n  if (!Array.isArray(this) || this.length === 0) return;\n  let arr = this,\n    hasInitValue = init != null;\n  initValue = hasInitValue ? initValue : this[0];\n  for (let i = hasInitValue ? 0 : 1; i < arr.length; i++) {\n    initValue = callback(initValue, arr[i], i, arr);\n  }\n  return initValue;\n};\n')),(0,a.kt)("h2",{id:"21arrayprototypefilter-\u7684\u5b9e\u73b0"},"21.Array.prototype.filter \u7684\u5b9e\u73b0"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let arr = [{ name: 1 }, { name: 2 }, { name: 3 }];\narr.filter((item, index, arr) => {\n  return item === 1;\n});\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5b9e\u73b0")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'Array.prototype.filter = function (callback) {\n  if (typeof callback !== "function") {\n    throw new TypeError(`callback\u5fc5\u987b\u662f\u51fd\u6570`);\n  }\n  if (Array.isArray(this) || this.length === 0) return;\n  const result = [];\n  for (let i = 0; i < this.length; i++) {\n    const ret = callback(this[i], i, this);\n    if (ret) {\n      result.push(ret);\n    }\n  }\n  return result;\n};\n')),(0,a.kt)("h2",{id:"22-arrayprototypemap-\u7684\u5b9e\u73b0"},"22. Array.prototype.map \u7684\u5b9e\u73b0"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'Array.prototype.map = function (callback) {\n  if (typeof callback !== "function") {\n    throw new TypeError(`callback\u5fc5\u987b\u662f\u51fd\u6570`);\n  }\n  if (Array.isArray(this) || this.length === 0) return;\n  const result = [];\n  for (let i = 0; i < this.length; i++) {\n    result[i] = callback(this[i], i, this);\n  }\n  return result;\n};\n')),(0,a.kt)("h2",{id:"23-\u6570\u7ec4\u53bb\u91cd\u7684\u65b9\u6cd5"},"23. \u6570\u7ec4\u53bb\u91cd\u7684\u65b9\u6cd5"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"es6")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function unique(arr) {\n  return [...new Set(arr)];\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5bf9\u8c61")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function unique(arr) {\n  let obj = {},\n    r = [];\n  for (let item of arr) {\n    if (!obj[item]) {\n      r.push(item);\n      obj[item] = true;\n    }\n  }\n  return r;\n}\n")),(0,a.kt)("h2",{id:"24-\u6c42\u6570\u7ec4\u7684\u4ea4\u96c6"},"24. \u6c42\u6570\u7ec4\u7684\u4ea4\u96c6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function unique(arr1, arr2) {\n  return [...new Set(arr1)].filter((item) => new Set(arr2).has(item));\n}\n")),(0,a.kt)("h2",{id:"25-\u6c42\u6570\u7ec4\u7684\u5e76\u96c6"},"25. \u6c42\u6570\u7ec4\u7684\u5e76\u96c6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function union(arr1, arr2) {\n  return [...new Set(arr1), ...new Set(arr2)];\n}\n")),(0,a.kt)("h2",{id:"26-\u6c42\u6570\u7ec4\u7684\u5dee\u96c6"},"26. \u6c42\u6570\u7ec4\u7684\u5dee\u96c6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function diff(arr1, arr2) {\n  let s1 = new Set(arr1);\n  let s2 = new Set(arr2);\n  return [...s1, ...s2].filter((item) => !s1.has(item) || !s2.has(item));\n}\n")),(0,a.kt)("h2",{id:"27-\u6d17\u724c\u7b97\u6cd5"},"27. ",(0,a.kt)("a",{parentName:"h2",href:"https://www.jianshu.com/p/e7edc1641d30"},"\u6d17\u724c\u7b97\u6cd5")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"sort \u5347\u5e8f:a-b \u964d\u5e8f:b-a")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var arr = [1, 2, 3, 4];\narr.sort((item) => Math.random > 0.5);\n")),(0,a.kt)("h3",{id:"\u771f\u5b9e\u7684"},"\u771f\u5b9e\u7684"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Array.prototype.shuffle = function () {\n  let arr = this,\n    len = arr.length;\n  for (let i = len - 1; i > 0; i--) {\n    let g = Math.floor(Math.random() * (i + 1));\n    [arr[i], arr[g]] = [arr[g], arr[i]];\n  }\n};\n")),(0,a.kt)("h2",{id:"28-deepclone"},"28. deepClone"),(0,a.kt)("blockquote",null,(0,a.kt)("ul",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ul"},"JSON.parse \u548c JSON.stringfy \u65e0\u6cd5\u652f\u6301\u6240\u6709\u7c7b\u578b,\u6bd4\u5982\u51fd\u6570"),(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"for in"),"\u4f1a\u904d\u5386\u6570\u7ec4\u6240\u6709\u7684",(0,a.kt)("inlineCode",{parentName:"li"},"\u53ef\u679a\u4e3e\u5c5e\u6027"),"\uff0c\u5305\u62ec",(0,a.kt)("inlineCode",{parentName:"li"},"\u539f\u578b"),"\uff0c\u5982\u679c\u4e0d\u60f3\u904d\u5386\u539f\u578b\u65b9\u6cd5\u548c\u5c5e\u6027\u7684\u8bdd\uff0c\u53ef\u4ee5\u5728\u5faa\u73af\u5185\u90e8\u5224\u65ad\u4e00\u4e0b\uff0c\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"hasOwnProperty()"),"\u65b9\u6cd5\u53ef\u4ee5\u5224\u65ad\u67d0\u5c5e\u6027\u662f\u4e0d\u662f\u8be5",(0,a.kt)("inlineCode",{parentName:"li"},"\u5bf9\u8c61\u7684\u5b9e\u4f8b\u5c5e\u6027")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"for of"),"\u9002\u7528\u904d\u5386",(0,a.kt)("inlineCode",{parentName:"li"},"\u6570/\u6570\u7ec4\u5bf9\u8c61"),"/\u5b57\u7b26\u4e32/map/set \u7b49\u62e5\u6709\u8fed\u4ee3\u5668\u5bf9\u8c61\uff08",(0,a.kt)("inlineCode",{parentName:"li"},"iterator"),"\uff09\u7684\u96c6\u5408\uff0c"))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'let obj = {\n  a: 1,\n  b: { c: 2 },\n  fn: function () {\n    console.log("fn");\n  },\n  error:new Error(\'21\')\n  RegExp: new RegExp(/\\d/g),\n  date: new Date(),\n  arr: [1, 2],\n  s: Symbol("s"),\n};\nobj.obj = obj;\nlet obj1 = deepClone(obj);\nconsole.log(obj1);\nconsole.log(obj1.s === obj.s);\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5b9e\u73b0")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'//WeakMap\u53ea\u63a5\u53d7\u5bf9\u8c61\u4f5c\u4e3a\u952e\u540d\uff08null\u9664\u5916\uff09\uff0c\u4e0d\u63a5\u53d7\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u4f5c\u4e3a\u952e\u540d\nfunction deepClone(source, cache = new WeakMap()) {\n  if (typeof source === "symbol") {\n    //  symbol\u7684\u652f\u6301\n    return Object(Symbol.prototype.valueOf.call(source));\n  }\n  if (typeof source !== "object") {\n    return source;\n  }\n  if (cache.has(source)) {\n    return cache.get(source);\n  }\n  if (source instanceof RegExp) {\n    return new RegExp(source);\n  }\n  let target = new source.constructor(); // \u53ef\u4ee5\u652f\u6301 \u6570\u7ec4 \u5bf9\u8c61 \u548c Error \u548c Date\n  cache.set(source, target);\n  //   \u652f\u6301map\n  if (source instanceof Map) {\n    source.forEach((value, key) => {\n      target.set(key, deepClone(value, cache));\n    });\n    return target;\n  }\n\n  //   \u652f\u6301set\n  if (source instanceof Set) {\n    source.forEach((value) => {\n      target.add(deepClone(value, cache));\n    });\n    return target;\n  }\n  for (let key in source) {\n    if (source.hasOwnProperty(key)) {\n      target[key] = deepClone(source[key], cache);\n    }\n  }\n  return target;\n}\n')),(0,a.kt)("h2",{id:"29-arrtotree"},"29. arrToTree"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const list = [\n  {\n    id: 2,\n    text: \"\u8282\u70b91_1\",\n    parentId: 1, //\u901a\u8fc7\u8fd9\u4e2a\u5b57\u6bb5\u6765\u786e\u5b9a\u5b50\u7236\u7ea7\n  },\n  {\n    id: 1,\n    text: \"\u8282\u70b91\",\n    parentId: 0, //\u8fd9\u91cc\u75280\u8868\u793a\u4e3a\u9876\u7ea7\u8282\u70b9\n  },\n];\n\n/**\n * \u8f6c\u6210\n[\n  {\n      id: 1,\n      text: '\u8282\u70b91',\n      parentId: 0,\n      children: [\n          {\n              id:2,\n              text: '\u8282\u70b91_1',\n              parentId:1\n          }\n      ]\n  }\n]\n */\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function parse(arr, obj = {}, result = []) {\n  for (let item of arr) {\n    obj[item.id] = item;\n  }\n  for (let item of arr) {\n    const parentId = item.parentId;\n    if (parentId === 0) {\n      result.push(item);\n      break;\n    }\n    obj[parentId].children = [...(obj[parentId].children || []), item];\n  }\n  return result;\n}\n")),(0,a.kt)("h2",{id:"30settimeout-\u6a21\u62df\u5b9e\u73b0-setinterval\u5e26\u6e05\u9664\u5b9a\u65f6\u5668\u7684\u7248\u672c"},"30.",(0,a.kt)("a",{parentName:"h2",href:"https://zhuanlan.zhihu.com/p/87595858"},"settimeout \u6a21\u62df\u5b9e\u73b0 setinterval(\u5e26\u6e05\u9664\u5b9a\u65f6\u5668\u7684\u7248\u672c)")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"setinterval \u7684\u65f6\u95f4\u95f4\u9694\u4e0d\u51c6")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'// \u6d4b\u8bd5\u7528\u4f8b,\u5982\u679c\u4e3b\u8fdb\u884c\u6808\u7684\u65f6\u95f4\u592a\u957f \u53ef\u80fd\u4f1a\u5bfc\u81f4 end\u548cstart\u7684\u65f6\u95f4\u95f4\u9694\u4e0d\u51c6\nlet now = Date.now(),\n  cur = Date.now();\nsetInterval(() => {\n  console.log(Date.now() - now, "start");\n  while (Date.now() - cur < 2000) {}\n  cur = Date.now();\n  console.log(Date.now() - now, "end");\n}, 200);\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5b9e\u73b0")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function setInterval(func, t) {\n  let timer = setTimeout(() => {\n    clearTimeout(timer);\n    func();\n    setiInterval(func, t);\n  }, t);\n}\n")),(0,a.kt)("h2",{id:"31\u5b9e\u73b0-lazyman"},"31.\u5b9e\u73b0 LazyMan"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u9898\u76ee\u63cf\u8ff0:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-doc"},"\u5b9e\u73b0\u4e00\u4e2aLazyMan\uff0c\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u65b9\u5f0f\u8c03\u7528:\nLazyMan(\u201cHank\u201d)\u8f93\u51fa:\nHi! This is Hank!\n\nLazyMan(\u201cHank\u201d).sleep(10).eat(\u201cdinner\u201d)\u8f93\u51fa\nHi! This is Hank!\n//\u7b49\u5f8510\u79d2..\nWake up after 10\nEat dinner~\n\nLazyMan(\u201cHank\u201d).eat(\u201cdinner\u201d).eat(\u201csupper\u201d)\u8f93\u51fa\nHi This is Hank!\nEat dinner~\nEat supper~\n\nLazyMan(\u201cHank\u201d).eat(\u201csupper\u201d).sleepFirst(5)\u8f93\u51fa\n//\u7b49\u5f855\u79d2\nWake up after 5\nHi This is Hank!\nEat supper\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5b9e\u73b0")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'class LazyManC {\n  constructor(str) {\n    this.task = [\n      () => {\n        console.log(`Hi! This is ${str}!\\r\\n`);\n        this.next();\n      },\n    ];\n    setTimeout(() => {\n      this.next();\n    });\n  }\n  next() {\n    const task = this.task.shift(); // \u53d6\u7b2c\u4e00\u4e2a\u4efb\u52a1\u6267\u884c\n    task && task();\n  }\n  eat(str = "") {\n    this.task.push(() => {\n      console.log(`Eat ${str}~\\r\\n`);\n      this.next();\n    });\n    return this;\n  }\n  sleep(time) {\n    this.task.push(() => {\n      setTimeout(() => {\n        console.log(`Wake up after ${time}\\r\\n`);\n        this.next();\n      }, time * 1000);\n    });\n    return this;\n  }\n  sleepFirst(time) {\n    this.task.unshift(() => {\n      setTimeout(() => {\n        console.log(`Wake up after ${time}\\r\\n`);\n        this.next();\n      }, time * 1000);\n    });\n    return this;\n  }\n}\n\nfunction LazyMan(str) {\n  return new LazyManC(str);\n}\n')),(0,a.kt)("h2",{id:"32-\u5199\u7248\u672c\u53f7\u6392\u5e8f\u7684\u65b9\u6cd5"},"32. \u5199\u7248\u672c\u53f7\u6392\u5e8f\u7684\u65b9\u6cd5"),(0,a.kt)("p",null,"\u9898\u76ee\u63cf\u8ff0:\u6709\u4e00\u7ec4\u7248\u672c\u53f7\u5982\u4e0b",(0,a.kt)("inlineCode",{parentName:"p"},"['0.1.1', '2.3.3', '0.302.1', '4.2', '4.3.5', '4.3.4.5']"),"\u3002\u73b0\u5728\u9700\u8981\u5bf9\u5176\u8fdb\u884c\u6392\u5e8f\uff0c\u6392\u5e8f\u7684\u7ed3\u679c\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"['4.3.5','4.3.4.5','2.3.3','0.302.1','0.1.1']")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"")),(0,a.kt)("h2",{id:"33-lru-\u7b97\u6cd5"},"33. LRU \u7b97\u6cd5"),(0,a.kt)("h2",{id:"34-promise-\u4ee5\u53ca\u76f8\u5173\u65b9\u6cd5\u7684\u5b9e\u73b0"},"34. Promise \u4ee5\u53ca\u76f8\u5173\u65b9\u6cd5\u7684\u5b9e\u73b0"),(0,a.kt)("p",null,"\u9898\u76ee\u63cf\u8ff0:\u624b\u5199 Promise \u4ee5\u53ca Promise.all Promise.race \u7684\u5b9e\u73b0"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u624b\u5199 Promise")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'//1. promise\u662f\u4e00\u4e2a\u7c7b,new\u8fd9\u4e2a\u7c7b \u4f20\u5165\u4e00\u4e2aexector\u6267\u884c\u5668\n//2. promise \u6709\u4e09\u79cd\u72b6\u6001 pending fulfilled rejected\n//3. exector \u6709\u4e24\u4e2a\u53c2\u6570 resolve reject, \u5f53\u8c03\u7528resolve \u4f1a\u53d8\u6210FULFILLED \u72b6\u6001\uff0c\u5f53\u8c03\u7528reject \u4f1a\u53d8\u6210rejected,\u4f46\u662f\u53ea\u80fd\u4ecepending \u53d8\u6210\u6539\u72b6\u6001\n//4. exector \u6267\u884c\u5982\u679c\u62a5\u9519 \u4f1a\u53d8\u6210rejected\u72b6\u6001\n//5. promise \u7684\u5b9e\u4f8b\u4e0a\u6709\u4e00\u4e2athen\u7684\u65b9\u6cd5\uff0c\u65b9\u6cd5\u67092\u4e2a\u53c2\u6570onFulFilled onRejected ,onFulFilled onRejected \u4f1a\u6709\u503c\u7684\u7a7f\u900f\n//6. \u5982\u679cthen\u662f\u6210\u529f\u6001 value \u4f1a\u4f5c\u4e3aonFulFilled\u7684\u53c2\u6570\nconst PENDING = "PENDING";\nconst FULFILLED = "FULFILLED";\nconst REJECTED = "REJECTED";\n\nfunction resolvePromise(x, p, resolve, reject) {\n  if (x === p) {\n    return reject(new TypeError("\u5faa\u73af\u5f15\u7528"));\n  }\n  let called = false;\n  if ((typeof x === "object" && x != null) || typeof x === "function") {\n    try {\n      let then = x.then;\n      if (typeof then === "function") {\n        then.call(\n          x,\n          (y) => {\n            if (called) return;\n            called = true;\n            resolvePromise(y, p, resolve, reject);\n          },\n          (err) => {\n            reject(err);\n          }\n        );\n      } else {\n        //\u666e\u901a\u503c\n\n        resolve(x);\n      }\n    } catch (error) {\n      if (called) return;\n      called = true;\n      reject(error);\n    }\n  } else {\n    // \u666e\u901a\u503c\n    resolve(x);\n  }\n}\nclass Promise {\n  constructor(executor) {\n    this.status = PENDING;\n    this.value = undefined;\n    this.reason = undefined;\n    this.onFulFilledCallbacks = [];\n    this.onRejectedCallbacks = [];\n    const resolve = (value) => {\n      if (this.status === PENDING) {\n        this.value = value;\n        if (value instanceof Promise) {\n          resolve.then(resolve, reject);\n        }\n        this.status = FULFILLED;\n        this.onFulFilledCallbacks.forEach((l) => l());\n      }\n    };\n    const reject = (reason) => {\n      if (this.status === PENDING) {\n        this.reason = reason;\n        this.status = REJECTED;\n        this.onRejectedCallbacks.forEach((l) => l());\n      }\n    };\n    try {\n      executor(resolve, reject);\n    } catch (error) {\n      reject(error);\n    }\n  }\n  static all(promises = []) {\n    return new Promise((resolve, reject) => {\n      let result = [],\n        index = 0;\n      for (let i = 0; i < promises.length; i++) {\n        Promise.resolve(promises[i]).then((data) => {\n          if (++index === promises.length) {\n            resolve(result);\n          }\n          result[i] = data;\n        }, reject);\n      }\n    });\n  }\n  static race(promises) {\n    return new Promise((resolve, reject) => {\n      for (let i = 0; i < promises.length; i++) {\n        Promise.resolve(promises[i]).then(resolve, reject);\n      }\n    });\n  }\n  static resolve(data) {\n    return new Promise((resolve) => {\n      resolve(data);\n    });\n  }\n  static reject(err) {\n    return new Promise((resolve, reject) => {\n      reject(err);\n    });\n  }\n  then(onFulFilled, onRejected) {\n    onFulFilled =\n      typeof onFulFilled === "function" ? onFulFilled : (val) => val;\n    onRejected =\n      typeof onRejected === "function"\n        ? onRejected\n        : (err) => {\n            throw err;\n          };\n    let p1 = new Promise((resolve, reject) => {\n      if (this.status === FULFILLED) {\n        setTimeout(() => {\n          try {\n            let x = onFulFilled(this.value);\n            resolvePromise(x, p1, resolve, reject);\n          } catch (error) {\n            reject(error);\n          }\n        });\n      }\n      if (this.status === REJECTED) {\n        setTimeout(() => {\n          try {\n            let x = onRejected(this.reason);\n            resolvePromise(x, p1, resolve, reject);\n          } catch (error) {\n            reject(error);\n          }\n        });\n      }\n      if (this.status === PENDING) {\n        this.onFulFilledCallbacks.push(() => {\n          setTimeout(() => {\n            try {\n              let x = onRejected(this.reason);\n              resolvePromise(x, p1, resolve, reject);\n            } catch (error) {\n              reject(error);\n            }\n          });\n        });\n        this.onRejectedCallbacks.push(() => {\n          setTimeout(() => {\n            try {\n              let x = onRejected(this.reason);\n              resolvePromise(x, p1, resolve, reject);\n            } catch (error) {\n              reject(error);\n            }\n          });\n        });\n      }\n    });\n    return p1;\n  }\n}\n')),(0,a.kt)("h2",{id:"35-\u5b9e\u73b0\u9a7c\u5cf0a-bb-ccc-dddd--abbcccdddd"},"35. \u5b9e\u73b0\u9a7c\u5cf0'a-bb-ccc-dddd'--\x3e'ABbCccDddd'"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5927\u9a7c\u5cf0")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'function parse(str = "") {\n  return str.replace(/(^|-)\\w/g, (s) => {\n    return s.length === 1 ? s.toUpperCase() : s.slice(1).toUpperCase();\n  });\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5c0f\u9a7c\u5cf0")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'function parse(str = "") {\n  return str.replace(/-\\w/g, (s) => {\n    return s.slice(1).toUpperCase();\n  });\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u53cd\u8f6c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'function parse(str = "") {\n  return str.replace(/(?!^)(?=[A-Z])/g, "-").toLowerCase();\n}\n')),(0,a.kt)("h2",{id:"36-\u63d0\u53d6\u4e2d\u57df\u540dhttpwwwbaiducoma"},"36. \u63d0\u53d6\u4e2d\u57df\u540d'",(0,a.kt)("a",{parentName:"h2",href:"http://www.baidu.com/a'"},"http://www.baidu.com/a'")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function match(url) {\n  return url.match(/https?\\:\\/\\/([^/]+)/)[1];\n}\n")),(0,a.kt)("h2",{id:"37-objectis-\u5b9e\u73b0"},"37. Object.is \u5b9e\u73b0"),(0,a.kt)("blockquote",null,(0,a.kt)("ul",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ul"},"Object.is \u4e0d\u4f1a\u8f6c\u6362\u88ab\u6bd4\u8f83\u7684\u4e24\u4e2a\u503c\u7684\u7c7b\u578b\uff0c\u8fd9\u70b9\u548c===\u66f4\u4e3a\u76f8\u4f3c\uff0c\u4ed6\u4eec\u4e4b\u95f4\u4e5f\u5b58\u5728\u4e00\u4e9b\u533a\u522b\u3002"),(0,a.kt)("li",{parentName:"ul"},"NaN \u5728===\u4e2d\u662f\u4e0d\u76f8\u7b49\u7684\uff0c\u800c\u5728 Object.is \u4e2d\u662f\u76f8\u7b49\u7684"),(0,a.kt)("li",{parentName:"ul"},"+0 \u548c-0 \u5728===\u4e2d\u662f\u76f8\u7b49\u7684\uff0c\u800c\u5728 Object.is \u4e2d\u662f\u4e0d\u76f8\u7b49\u7684"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Object.is = function (a, b) {\n  if (x === y) {\n    // \u5f53\u524d\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u4e00\u79cd\u60c5\u51b5\u662f\u7279\u6b8a\u7684\uff0c\u5373 +0 -0\n    // \u5982\u679c x !== 0\uff0c\u5219\u8fd4\u56detrue\n    // \u5982\u679c x === 0\uff0c\u5219\u9700\u8981\u5224\u65ad+0\u548c-0\uff0c\u5219\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 1/+0 === Infinity \u548c 1/-0 === -Infinity\u6765\u8fdb\u884c\u5224\u65ad\n    return x !== 0 || 1 / x === 1 / y;\n  }\n  // x !== y \u7684\u60c5\u51b5\u4e0b\uff0c\u53ea\u9700\u8981\u5224\u65ad\u662f\u5426\u4e3aNaN\uff0c\u5982\u679cx!==x\uff0c\u5219\u8bf4\u660ex\u662fNaN\uff0c\u540c\u7406y\u4e5f\u4e00\u6837\n  // x\u548cy\u540c\u65f6\u4e3aNaN\u65f6\uff0c\u8fd4\u56detrue\n  return x !== x && y !== y;\n};\n")),(0,a.kt)("h2",{id:"38ajax"},"38.AJAX"),(0,a.kt)("p",null,"\u9898\u76ee\u63cf\u8ff0:\u5229\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"XMLHttpRequest")," \u624b\u5199 ",(0,a.kt)("inlineCode",{parentName:"p"},"AJAX")," \u5b9e\u73b0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'const getJSON = function (url) {\n  return new Promise((resolve, reject) => {\n    // \u5b9e\u4f8b\u5316xhr\n    const xhr = new XMLHttpRequest();\n\n    // xhrReq.open(method, url, async, user, password);\n    xhr.open("GET", url, true);\n    xhr.setRequestHeader("content-type", "application/json");\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState !== 4) return;\n      if (xhr.status === 200 || xhr.status === 304) {\n        resolve(xhr.responseText);\n      } else {\n        reject(new Error(xhr.responseText));\n      }\n    };\n    xhr.send(null);\n  });\n};\n')),(0,a.kt)("h2",{id:"39\u5c06\u865a\u62df-dom-\u8f6c\u5316\u4e3a\u771f\u5b9e-dom"},"39.\u5c06\u865a\u62df Dom \u8f6c\u5316\u4e3a\u771f\u5b9e Dom"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u9898\u76ee\u63cf\u8ff0:JSON \u683c\u5f0f\u7684\u865a\u62df Dom \u600e\u4e48\u8f6c\u6362\u6210\u771f\u5b9e Dom")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"{\n  tag: 'DIV',\n  attrs:{\n  id:'app'\n  },\n  children: [\n    {\n      tag: 'SPAN',\n      children: [\n        { tag: 'A', children: [] }\n      ]\n    },\n    {\n      tag: 'SPAN',\n      children: [\n        { tag: 'A', children: [] },\n        { tag: 'A', children: [] }\n      ]\n    }\n  ]\n}\n\u628a\u4e0a\u8bc9\u865a\u62dfDom\u8f6c\u5316\u6210\u4e0b\u65b9\u771f\u5b9eDom\n<div id=\"app\">\n  <span>\n    <a></a>\n  </span>\n  <span>\n    <a></a>\n    <a></a>\n  </span>\n</div>\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5b9e\u73b0")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'function render(vnode) {\n  // \u5982\u679c\u662f\u6570\u5b57\u7c7b\u578b\u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32\n  if (typeof vnode === "number") {\n    vnode = String(vnode);\n  }\n  // \u5b57\u7b26\u4e32\u7c7b\u578b\u76f4\u63a5\u5c31\u662f\u6587\u672c\u8282\u70b9\n  if (typeof vnode === "string") {\n    return document.createTextNode(vnode);\n  }\n  // \u666e\u901aDOM\n  const dom = document.createElement(vnode.tag);\n  if (vnode.attrs) {\n    // \u904d\u5386\u5c5e\u6027\n    Object.keys(vnode.attrs).forEach((key) => {\n      const value = vnode.attrs[key];\n      dom.setAttribute(key, value);\n    });\n  }\n   // \u5b50\u6570\u7ec4\u8fdb\u884c\u9012\u5f52\u64cd\u4f5c\n  vnode.children.forEach((child) => dom.appendChild(render(child))); \n  return dom;\n}\n')),(0,a.kt)("h2",{id:"39\u5b9e\u73b0\u6a21\u677f\u5b57\u7b26\u4e32\u89e3\u6790\u529f\u80fd"},"39.\u5b9e\u73b0\u6a21\u677f\u5b57\u7b26\u4e32\u89e3\u6790\u529f\u80fd"),(0,a.kt)("p",null,"\u9898\u76ee\u63cf\u8ff0:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let template = '\u6211\u662f{{name}}\uff0c\u5e74\u9f84{{age}}\uff0c\u6027\u522b{{sex}}';\nlet data = {\n  name: '\u59d3\u540d',\n  age: 18\n}\nrender(template, data); // \u6211\u662f\u59d3\u540d\uff0c\u5e74\u9f8418\uff0c\u6027\u522bundefined\n")),(0,a.kt)("p",null,"\u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function \n")),(0,a.kt)("h3",{id:"40-ts"},"40. ts"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"type a1 = CapitalizeString<'handler'>       // Handler\ntype a2 = CapitalizeString<'parent'>        // Parent\ntype a3 = CapitalizeString<233>             // 233\n")))}d.isMDXComponent=!0},5376:function(e,n,t){n.Z=t.p+"assets/images/7-5c530088ab149658826dfe0007d76d08.png"}}]);