(self.webpackChunkdapengdouyu=self.webpackChunkdapengdouyu||[]).push([[5810],{3905:function(n,e,t){"use strict";t.d(e,{Zo:function(){return p},kt:function(){return m}});var r=t(7294);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function l(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function i(n,e){if(null==n)return{};var t,r,a=function(n,e){if(null==n)return{};var t,r,a={},o=Object.keys(n);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var s=r.createContext({}),c=function(n){var e=r.useContext(s),t=e;return n&&(t="function"==typeof n?n(e):l(l({},e),n)),t},p=function(n){var e=c(n.components);return r.createElement(s.Provider,{value:e},n.children)},d={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},u=r.forwardRef((function(n,e){var t=n.components,a=n.mdxType,o=n.originalType,s=n.parentName,p=i(n,["components","mdxType","originalType","parentName"]),u=c(t),m=a,f=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return t?r.createElement(f,l(l({ref:e},p),{},{components:t})):r.createElement(f,l({ref:e},p))}));function m(n,e){var t=arguments,a=e&&e.mdxType;if("string"==typeof n||a){var o=t.length,l=new Array(o);l[0]=u;var i={};for(var s in e)hasOwnProperty.call(e,s)&&(i[s]=e[s]);i.originalType=n,i.mdxType="string"==typeof n?n:a,l[1]=i;for(var c=2;c<o;c++)l[c]=t[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},393:function(n,e,t){"use strict";t.r(e),t.d(e,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return u}});var r=t(4034),a=t(9973),o=(t(7294),t(3905)),l=["components"],i={},s=void 0,c={unversionedId:"books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/16\u3001\u6b4c\u5355\u8be6\u60c52  \u51c6\u5907\u9759\u6001\u6a21\u677f",id:"books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/16\u3001\u6b4c\u5355\u8be6\u60c52  \u51c6\u5907\u9759\u6001\u6a21\u677f",isDocsHomePage:!1,title:"16\u3001\u6b4c\u5355\u8be6\u60c52  \u51c6\u5907\u9759\u6001\u6a21\u677f",description:"\u672c\u8282\u4ee3\u7801\u5bf9\u5e94 GitHub \u5206\u652f: chapter6",source:"@site/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/16\u3001\u6b4c\u5355\u8be6\u60c52  \u51c6\u5907\u9759\u6001\u6a21\u677f.md",sourceDirName:"books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218",slug:"/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/16\u3001\u6b4c\u5355\u8be6\u60c52  \u51c6\u5907\u9759\u6001\u6a21\u677f",permalink:"/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/16\u3001\u6b4c\u5355\u8be6\u60c52  \u51c6\u5907\u9759\u6001\u6a21\u677f",editUrl:"https://github.com/dapengdouyu/docs/tree/master/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/16\u3001\u6b4c\u5355\u8be6\u60c52  \u51c6\u5907\u9759\u6001\u6a21\u677f.md",tags:[],version:"current",lastUpdatedAt:1633933712,formattedLastUpdatedAt:"10/11/2021",frontMatter:{},sidebar:"books",previous:{title:"15\u3001\u6b4c\u5355\u8be6\u60c51  \u52a8\u611f\u5207\u9875\u52a8\u753b\uff0c\u4f60\u5fc3\u52a8\u4e86\u5417\uff1f",permalink:"/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/15\u3001\u6b4c\u5355\u8be6\u60c51  \u52a8\u611f\u5207\u9875\u52a8\u753b\uff0c\u4f60\u5fc3\u52a8\u4e86\u5417\uff1f"},next:{title:"17\u3001\u6b4c\u5355\u8be6\u60c53  \u6253\u901a\u6b4c\u5355\u6570\u636e\u5c42",permalink:"/docs/books/React Hooks \u4e0e Immutable \u6570\u636e\u6d41\u5b9e\u6218/17\u3001\u6b4c\u5355\u8be6\u60c53  \u6253\u901a\u6b4c\u5355\u6570\u636e\u5c42"}},p=[{value:"\u9876\u90e8\u548c\u83dc\u5355\u5e03\u5c40",id:"\u9876\u90e8\u548c\u83dc\u5355\u5e03\u5c40",children:[],level:2},{value:"\u6b4c\u5355\u5217\u8868\u5e03\u5c40",id:"\u6b4c\u5355\u5217\u8868\u5e03\u5c40",children:[],level:2},{value:"\u6ed1\u52a8\u65f6 Header \u8054\u52a8\u6548\u679c",id:"\u6ed1\u52a8\u65f6-header-\u8054\u52a8\u6548\u679c",children:[],level:2}],d={toc:p};function u(n){var e=n.components,t=(0,a.Z)(n,l);return(0,o.kt)("wrapper",(0,r.Z)({},d,t,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u672c\u8282\u4ee3\u7801\u5bf9\u5e94 GitHub \u5206\u652f: chapter6")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/sanyuan0704/react-cloud-music/tree/chapter6"},"\u4ed3\u5e93\u4f20\u9001\u95e8")),(0,o.kt)("p",null,"\u73b0\u5728\u5c31\u8fdb\u5165\u5230\u5177\u4f53\u7ec4\u4ef6\u7684\u5f00\u53d1\u4e86\uff0c\u9996\u5148\u662f\u9759\u6001\u7684\u5e03\u5c40\u90e8\u5206\u3002"),(0,o.kt)("h2",{id:"\u9876\u90e8\u548c\u83dc\u5355\u5e03\u5c40"},"\u9876\u90e8\u548c\u83dc\u5355\u5e03\u5c40"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'//Album/index.js\nimport React, {useState} from \'react\';\nimport {Container} from \'./style\';\nimport { CSSTransition } from \'react-transition-group\';\nimport  Header  from \'./../../baseUI/header/index\';\nimport Scroll from \'../../baseUI/scroll/index\';\n\nfunction Album (props) {\n  const [showStatus, setShowStatus] = useState (true);\n  \n  //mock \u6570\u636e\n  const currentAlbum = {\n    creator: {\n      avatarUrl: "http://p1.music.126.net/O9zV6jeawR43pfiK2JaVSw==/109951164232128905.jpg",\n      nickname: "\u6d6a\u91cc\u63a8\u821f"\n    },\n    coverImgUrl: "http://p2.music.126.net/ecpXnH13-0QWpWQmqlR0gw==/109951164354856816.jpg",\n    subscribedCount: 2010711,\n    name: "\u542c\u5b8c\u5c31\u7761\uff0c\u8033\u673a\u662f\u5929\u9ed1\u4ee5\u540e\u67d4\u8f6f\u7684\u68a6\u5883",\n    tracks:[\n      {\n        name: "\u6211\u771f\u7684\u53d7\u4f24\u4e86",\n        ar: [{name: "\u5f20\u5b66\u53cb"}, {name: "\u5468\u534e\u5065"}],\n        al: {\n          name: "\u5b66\u53cb \u70ed"\n        }\n      },\n      {\n        name: "\u6211\u771f\u7684\u53d7\u4f24\u4e86",\n        ar: [{name: "\u5f20\u5b66\u53cb"}, {name: "\u5468\u534e\u5065"}],\n        al: {\n          name: "\u5b66\u53cb \u70ed"\n        }\n      },\n      {\n        name: "\u6211\u771f\u7684\u53d7\u4f24\u4e86",\n        ar: [{name: "\u5f20\u5b66\u53cb"}, {name: "\u5468\u534e\u5065"}],\n        al: {\n          name: "\u5b66\u53cb \u70ed"\n        }\n      },\n      {\n        name: "\u6211\u771f\u7684\u53d7\u4f24\u4e86",\n        ar: [{name: "\u5f20\u5b66\u53cb"}, {name: "\u5468\u534e\u5065"}],\n        al: {\n          name: "\u5b66\u53cb \u70ed"\n        }\n      },\n      {\n        name: "\u6211\u771f\u7684\u53d7\u4f24\u4e86",\n        ar: [{name: "\u5f20\u5b66\u53cb"}, {name: "\u5468\u534e\u5065"}],\n        al: {\n          name: "\u5b66\u53cb \u70ed"\n        }\n      },\n      {\n        name: "\u6211\u771f\u7684\u53d7\u4f24\u4e86",\n        ar: [{name: "\u5f20\u5b66\u53cb"}, {name: "\u5468\u534e\u5065"}],\n        al: {\n          name: "\u5b66\u53cb \u70ed"\n        }\n      },\n      {\n        name: "\u6211\u771f\u7684\u53d7\u4f24\u4e86",\n        ar: [{name: "\u5f20\u5b66\u53cb"}, {name: "\u5468\u534e\u5065"}],\n        al: {\n          name: "\u5b66\u53cb \u70ed"\n        }\n      },\n      {\n        name: "\u6211\u771f\u7684\u53d7\u4f24\u4e86",\n        ar: [{name: "\u5f20\u5b66\u53cb"}, {name: "\u5468\u534e\u5065"}],\n        al: {\n          name: "\u5b66\u53cb \u70ed"\n        }\n      },\n      {\n        name: "\u6211\u771f\u7684\u53d7\u4f24\u4e86",\n        ar: [{name: "\u5f20\u5b66\u53cb"}, {name: "\u5468\u534e\u5065"}],\n        al: {\n          name: "\u5b66\u53cb \u70ed"\n        }\n      },\n      {\n        name: "\u6211\u771f\u7684\u53d7\u4f24\u4e86",\n        ar: [{name: "\u5f20\u5b66\u53cb"}, {name: "\u5468\u534e\u5065"}],\n        al: {\n          name: "\u5b66\u53cb \u70ed"\n        }\n      },\n    ]\n  }\n\n  const handleBack = () => {\n    setShowStatus (false);\n  };\n\n  return (\n    <CSSTransition\n      in={showStatus}  \n      timeout={300} \n      classNames="fly" \n      appear={true} \n      unmountOnExit\n      onExited={props.history.goBack}\n    >\n      <Container>\n        <Header title={"\u8fd4\u56de"} handleClick={handleBack}></Header>\n        // \u8fd9\u91cc\u662f\u5177\u4f53\u5e03\u5c40 JSX \u4ee3\u7801\n      </Container>\n    </CSSTransition>\n  )\n}\n\nexport default React.memo (Album);\n\n')),(0,o.kt)("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u5f00\u59cb\u5177\u4f53\u5e03\u5c40\u7684 JSX \u4ee3\u7801\uff0c"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'<Scroll bounceTop={false}>\n  <div>\n    <TopDesc background={currentAlbum.coverImgUrl}>\n      <div className="background">\n        <div className="filter"></div>\n      </div>\n      <div className="img_wrapper">\n        <div className="decorate"></div>\n        <img src={currentAlbum.coverImgUrl} alt=""/>\n        <div className="play_count">\n          <i className="iconfont play">&#xe885;</i>\n          <span className="count">{Math.floor (currentAlbum.subscribedCount/1000)/10} \u4e07 </span>\n        </div>\n      </div>\n      <div className="desc_wrapper">\n        <div className="title">{currentAlbum.name}</div>\n        <div className="person">\n          <div className="avatar">\n            <img src={currentAlbum.creator.avatarUrl} alt=""/>\n          </div>\n          <div className="name">{currentAlbum.creator.nickname}</div>\n        </div>\n      </div>\n    </TopDesc>\n    <Menu>\n      <div>\n        <i className="iconfont">&#xe6ad;</i>\n        \u8bc4\u8bba\n      </div>\n      <div>\n        <i className="iconfont">&#xe86f;</i>\n        \u70b9\u8d5e\n      </div>\n      <div>\n        <i className="iconfont">&#xe62d;</i>\n        \u6536\u85cf\n      </div>\n      <div>\n        <i className="iconfont">&#xe606;</i>\n        \u66f4\u591a\n      </div>\n    </Menu>\n  </div>  \n</Scroll>\n\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'// \u5bf9\u5e94 style.js\n\n// \u6dfb\u52a0 TopDesc \u548c Menu\nexport const TopDesc = styled.div`\n  background-size: 100%;\n  padding: 5px 20px;\n  padding-bottom: 50px;\n  margin-bottom: 20px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  height: 275px;\n  position: relative;\n  .background {\n    z-index: -1;\n    background: url (${props => props.background}) no-repeat;\n    background-position: 0 0;\n    background-size: 100% 100%;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    filter: blur (20px);\n    .filter {\n      position: absolute;\n      z-index: 10;\n      top: 0; left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba (7, 17, 27, 0.2);\n    }\n  }\n  .img_wrapper {\n    width: 120px;\n    height: 120px;\n    position: relative;         \n    .decorate {\n      position: absolute;\n      top: 0;\n      width: 100%;\n      height: 35px;\n      border-radius: 3px;\n      background: linear-gradient (hsla (0,0%,43%,.4),hsla (0,0%,100%,0));\n    }\n    .play_count {\n      position: absolute;\n      right: 2px;\n      top: 2px;\n      font-size: ${style ["font-size-s"]};\n      line-height: 15px;\n      color: ${style ["font-color-light"]};\n      .play {\n        vertical-align: top;\n      }\n    }\n    img {\n      width: 120px;\n      height: 120px;\n      border-radius:3px;\n    }\n  }\n  .desc_wrapper {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    height: 120px;\n    padding: 0 10px;\n    .title {\n      max-height: 70px;\n      color: ${style ["font-color-light"]};\n      font-weight: 700;\n      line-height: 1.5;\n      font-size: ${style ["font-size-l"]};\n    }\n    .person {\n      display: flex;\n      .avatar {\n        width: 20px;\n        height: 20px;\n        margin-right: 5px;\n        img {\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n        }\n      }\n      .name {\n        line-height: 20px;\n        font-size: ${style ["font-size-m"]};\n        color: ${style ["font-color-desc-v2"]};\n      }\n    }\n  }\n`;\n\nexport const Menu = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  box-sizing: border-box;\n  padding: 0 30px 20px 30px;\n  margin: -100px 0 0 0;\n  >div {\n    display: flex;\n    flex-direction: column;\n    line-height: 20px;\n    text-align: center;\n    font-size: ${style ["font-size-s"]};\n    color: ${style ["font-color-light"]};\n    z-index:1000;\n    font-weight: 500;\n    .iconfont {\n      font-size: 20px;\n    }\n  }\n`;\n\n')),(0,o.kt)("p",null,"\u5bf9\u5e94\u7684\u6837\u5f0f\u7ec4\u4ef6\u81ea\u884c\u5f15\u5165\u7ec4\u4ef6\u4ee3\u7801\u4e2d\uff0c\u8fd9\u91cc\u76f8\u4fe1\u4f60\u5df2\u7ecf\u5f88\u5a34\u719f\u4e86\u3002"),(0,o.kt)("h2",{id:"\u6b4c\u5355\u5217\u8868\u5e03\u5c40"},"\u6b4c\u5355\u5217\u8868\u5e03\u5c40"),(0,o.kt)("p",null,"\u73b0\u5728\u6211\u4eec\u7d27\u63a5\u7740\u6765\u6dfb\u52a0\u6b4c\u5355\u5217\u8868\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'// \u7d27\u63a5\u7740 TopDesc \u548c Menu\n<SongList>\n  <div className="first_line">\n    <div className="play_all">\n      <i className="iconfont">&#xe6e3;</i>\n      <span > \u64ad\u653e\u5168\u90e8 <span className="sum">(\u5171 {currentAlbum.tracks.length} \u9996)</span></span>\n    </div>\n    <div className="add_list">\n      <i className="iconfont">&#xe62d;</i>\n      <span > \u6536\u85cf ({getCount (currentAlbum.subscribedCount)})</span>\n    </div>\n  </div>\n  <SongItem>\n    {\n      currentAlbum.tracks.map ((item, index) => {\n        return (\n          <li key={index}>\n            <span className="index">{index + 1}</span>\n            <div className="info">\n              <span>{item.name}</span>\n              <span>\n                { getName (item.ar) } - { item.al.name }\n              </span>\n            </div>\n          </li>\n        )\n      })\n    }\n  </SongItem>\n</SongList>\n\n')),(0,o.kt)("p",null,"\u5176\u4e2d getName \u662f\u4e00\u4e2a\u5de5\u5177\u65b9\u6cd5\uff0c\u6211\u4eec\u5728 api/utils.js \u91cc\u9762\u6765\u5199\u4e00\u4e0b:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'// \u5904\u7406\u6b4c\u624b\u5217\u8868\u62fc\u63a5\u6b4c\u624b\u540d\u5b57\nexport const getName = list => {\n  let str = "";\n  list.map ((item, index) => {\n    str += index === 0 ? item.name : "/" + item.name;\n    return item;\n  });\n  return str;\n};\n\n')),(0,o.kt)("p",null,"\u5728 Album \u7ec4\u4ef6\u4ee3\u7801\u4e2d\u5f15\u5165\uff0c"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"import { getName } from './../../api/utils';\n\n")),(0,o.kt)("p",null,"\u7136\u540e\u5f00\u59cb\u7f16\u5199\u6b4c\u5355\u7684\u6837\u5f0f\u7ec4\u4ef6:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'//style.js \u4e2d\u52a0\u5165\nexport const SongList = styled.div`\n  border-radius: 10px;\n  opacity: 0.98;\n  ${props => props.showBackground ? `background: ${style ["highlight-background-color"]}`: ""}\n  .first_line {\n    box-sizing: border-box;\n    padding: 10px 0;\n    margin-left: 10px;\n    position: relative;\n    justify-content: space-between;\n    border-bottom: 1px solid ${style ["border-color"]};\n    .play_all {\n      display: inline-block;\n      line-height: 24px;\n      color: ${style ["font-color-desc"]};\n      .iconfont {\n        font-size: 24px;\n        margin-right: 10px;\n        vertical-align: top;\n      }\n      .sum {\n        font-size: ${style ["font-size-s"]};\n        color: ${style ["font-color-desc-v2"]};\n      }\n      >span {\n        vertical-align: top;\n      }\n    }\n    .add_list,.isCollected {\n      display: flex;\n      align-items: center;\n      position: absolute;\n      right: 0; top :0; bottom: 0;\n      width: 130px;\n      line-height: 34px;\n      background: ${style ["theme-color"]};\n      color: ${style ["font-color-light"]};\n      font-size: 0;\n      border-radius: 3px;\n      vertical-align: top;\n      .iconfont {\n        vertical-align: top;\n        font-size: 10px;\n        margin: 0 5px 0 10px;\n      }\n      span {\n        font-size: 14px;\n        line-height: 34px;\n      }\n    }\n    .isCollected {\n      display: flex;\n      background: ${style ["background-color"]};\n      color: ${style ["font-color-desc"]};\n    }\n}\n`\nexport const SongItem = styled.ul`\n  >li {\n    display: flex;\n    height: 60px;\n    align-items: center;  \n    .index {\n      flex-basis: 60px;\n      width: 60px;\n      height: 60px;\n      line-height: 60px;\n      text-align: center;\n    }\n    .info {\n      box-sizing: border-box;\n      flex: 1;\n      display: flex;\n      height: 100%;\n      padding: 5px 0;\n      flex-direction: column;\n      justify-content: space-around;\n      border-bottom: 1px solid ${style ["border-color"]};\n      ${style.noWrap ()}\n      >span {\n        ${style.noWrap ()}\n      }\n      >span:first-child {\n        color: ${style ["font-color-desc"]};\n      }\n      >span:last-child {\n        font-size: ${style ["font-size-s"]};\n        color: #bba8a8;\n      }\n    }\n  }\n`\n\n')),(0,o.kt)("p",null,"\u63a5\u4e0b\u6765\u628a\u6837\u5f0f\u7ec4\u4ef6\u5f15\u5165\u5230 Album/index.js \u4e2d\uff0c\u5927\u5bb6\u81ea\u884c\u5b8c\u6210\u3002"),(0,o.kt)("p",null,"\u73b0\u5728\u521d\u6b65\u7684\u5e03\u5c40\u6548\u679c\u5c31\u6709\u4e86\uff0c\u8ba9\u5927\u5bb6\u77a7\u4e00\u77a7\u3002"),(0,o.kt)("h2",{id:"\u6ed1\u52a8\u65f6-header-\u8054\u52a8\u6548\u679c"},"\u6ed1\u52a8\u65f6 Header \u8054\u52a8\u6548\u679c"),(0,o.kt)("p",null,"\u4f5c\u4e3a\u4e00\u4e2a\u7cbe\u7f8e\u7684 WebApp\uff0c\u6211\u4eec\u5f53\u7136\u4e0d\u4ec5\u4ec5\u662f\u8003\u8651\u9759\u6001\u5e03\u5c40\u5566\uff0c\u6ed1\u52a8\u65f6\u7684\u4f53\u9a8c\u4e5f\u8981\u517c\u987e\uff0c\u5927\u5bb6\u53bb\u9879\u76ee\u9884\u89c8\u5730\u5740\u53ef\u4ee5\u770b\u5230\uff0c\u5728\u6ed1\u52a8\u7684\u8fc7\u7a0b\u4e2d Header \u7ec4\u4ef6\u7684\u80cc\u666f\u4f1a\u9010\u6e10\u53d8\u7ea2\uff0c\u800c\u4e14\u91cc\u9762\u7684\u6587\u5b57\u6362\u6210\u4e86\u6b4c\u5355\u540d\uff0c\u5e76\u4e14\u5448\u73b0\u51fa\u4e00\u4e2a\u8dd1\u9a6c\u706f\u7684\u6548\u679c\u3002"),(0,o.kt)("p",null,"\u73b0\u5728\u53c8\u4f53\u73b0\u51fa\u4e86\u5c01\u88c5 Scroll \u57fa\u7840\u7ec4\u4ef6\u7684\u4f18\u52bf\u4e86\uff0c\u5728 Scroll \u7ec4\u4ef6\u4e2d\uff0c\u521d\u59cb\u5316\u65f6\u5df2\u7ecf\u76d1\u542c\u4e86\u6eda\u52a8\u4e8b\u4ef6\u5e76\u4e14\u81ea\u52a8\u6267\u884c\u56de\u8c03\uff0c\u56e0\u6b64\u6211\u4eec\u76f4\u63a5\u7f16\u5199\u56de\u8c03\u903b\u8f91\u5373\u53ef\u3002"),(0,o.kt)("p",null,"\u9996\u5148\u6211\u4eec\u7a0d\u5fae\u6539\u9020\u4e00\u4e0b Header \u7ec4\u4ef6\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'const Header = React.forwardRef ((props, ref) => {\n  const { handleClick, title, isMarquee} = props;\n  return (\n    <HeaderContainer ref={ref}>\n      <i className="iconfont back"  onClick={handleClick}>&#xe655;</i>\n      {\n        isMarquee ? <marquee><h1>{title}</h1></marquee>:\n        <h1>{title}</h1>\n      }\n    </HeaderContainer>\n  )\n})\n\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Header.defaultProps = {\n  //...\n  isMarquee: false\n};\n\nHeader.propTypes = {\n  //...\n  isMarquee: PropTypes.bool\n};\n\n")),(0,o.kt)("p",null,"\u63a5\u4e0b\u6765\uff0c\u5728 Album \u7ec4\u4ef6\u4e2d\uff0c\u52a0\u5165:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"import React, { useState, useCallback, useRef } from 'react';\n\nconst [title, setTitle] = useState (\"\u6b4c\u5355\");\nconst [isMarquee, setIsMarquee] = useState (false);// \u662f\u5426\u8dd1\u9a6c\u706f\n\nconst headerEl = useRef ();\n// \u4f20\u53c2\u4fee\u6539\u5982\u4e0b:\n<Header ref={headerEl} title={title} handleClick={handleBack} isMarquee={isMarquee}></Header>\n\n")),(0,o.kt)("p",null,"\u63a5\u7740\u53ef\u4ee5\u52a0\u5165\u6ed1\u52a8\u5904\u7406\u903b\u8f91\u4e86:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'// \u9996\u5148\u5f15\u5165\nimport style from "../../assets/global-style";\n\nexport const HEADER_HEIGHT = 45;\n\nconst handleScroll = (pos) => {\n  let minScrollY = -HEADER_HEIGHT;\n  let percent = Math.abs (pos.y/minScrollY);\n  let headerDom = headerEl.current;\n  // \u6ed1\u8fc7\u9876\u90e8\u7684\u9ad8\u5ea6\u5f00\u59cb\u53d8\u5316\n  if (pos.y < minScrollY) {\n    headerDom.style.backgroundColor = style ["theme-color"];\n    headerDom.style.opacity = Math.min (1, (percent-1)/2);\n    setTitle (currentAlbum.name);\n    setIsMarquee (true);\n  } else {\n    headerDom.style.backgroundColor = "";\n    headerDom.style.opacity = 1;\n    setTitle ("\u6b4c\u5355");\n    setIsMarquee (false);\n  }\n};\n\n// \u4f20\u9012\u7ed9 Scroll \u7ec4\u4ef6\n<Scroll bounceTop={false} onScroll={handleScroll}></Scroll>\n\n')),(0,o.kt)("p",null,"OK, \u73b0\u5728\u9759\u6001\u9875\u9762\u7684\u5e03\u5c40\u5c31\u5df2\u7ecf\u57fa\u672c\u5b8c\u6210\u4e86\u3002\u63a5\u4e0b\u6765\u8fdb\u5165\u6570\u636e\u5c42\u7684\u5bf9\u63a5\uff0c\u5927\u5bb6\u52a0\u6cb9\uff01"))}u.isMDXComponent=!0}}]);